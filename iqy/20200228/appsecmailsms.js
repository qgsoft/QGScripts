(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["appsecmailsms"],{a268:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("SecurityCommon",{attrs:{title:t.title}},[s("SecurityHeadTitle",{attrs:{title:t.title}}),s("div",{staticClass:"m-box-items m-box-items-full"},[s("section",{directives:[{name:"show",rawName:"v-show",value:t.os.android,expression:"os.android"}],staticClass:"m-passport-tip"},[s("i",{staticClass:"c-passport-icon c-passport-succeed"}),t._v(t._s(t.mailI18n.mailSuccessTip)+"\n      "),s("a",{staticClass:"c-link",attrs:{href:"javascript:void(0)"},on:{click:t.openMailLogin}},[t._v("\n        "+t._s(t.mailI18n.openMail)+"\n      ")]),t._v(t._s(t.mailI18n.look)+"\n    ")]),s("section",{staticClass:"m-passport-form"},[s("div",{staticClass:"input-info"},[s("div",{staticClass:"c-info"},[s("span",{staticClass:"name"},[t._v(t._s(t.mailI18n.mailColon))]),s("span",{staticClass:"tel"},[t._v(t._s(t.mail))])])]),s("div",{staticClass:"input-wrap"},[s("input",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:"s-emailnum",expression:"'s-emailnum'"},{name:"model",rawName:"v-model",value:t.smsCode,expression:"smsCode"}],staticClass:"input-text",attrs:{placeholder:t.mailI18n.authcodePlaceholder,type:"text"},domProps:{value:t.smsCode},on:{input:[function(e){e.target.composing||(t.smsCode=e.target.value)},t.inputCode]}}),s("a",{directives:[{name:"show",rawName:"v-show",value:t.smsCodeRetryShow,expression:"smsCodeRetryShow"}],staticClass:"c-input-link",attrs:{href:"javascript:void(0)"},on:{click:t.resendCode}},[t._v(t._s(t.mailI18n.resendAuthcode))]),s("a",{directives:[{name:"show",rawName:"v-show",value:t.countDownShow,expression:"countDownShow"}],staticClass:"c-input-link disabled",attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.countDown+t.mailI18n.countDown))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.smsCodeError,expression:"smsCodeError"}],staticClass:"input-error"},[t._v(t._s(t.mailI18n.authCodeFormatError))])])]),s("SecuritySubmitButton",{directives:[{name:"pingback",rawName:"v-pingback",value:"c-modifyemail",expression:"'c-modifyemail'"}],attrs:{disable:t.buttonDisable,text:t.mailI18n.confirm},on:{submit:t.submit}}),t.isSlideCode?s("SecuritySlideCode",{attrs:{token:t.secondToken,"is-tw":t.isTw},on:{slideVerifySuccess:t.onSildeVerifySuccess}}):t._e(),s("SecurityTip",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:t.securityTipBlock,expression:"securityTipBlock"},{name:"show",rawName:"v-show",value:t.securityTipShow,expression:"securityTipShow"}],attrs:{"left-btn-text":t.mailI18n.close},on:{leftButtonClick:t.backToHome},scopedSlots:t._u([{key:"tipInfo",fn:function(){return[t.verifySuccess?s("i",{staticClass:"c-passport-icon c-passport-succeedBig"}):s("i",{staticClass:"c-passport-icon c-passport-warnBig"}),s("div",{staticClass:"c-title"},[t._v(t._s(t.securityTipText))])]},proxy:!0}])})],1)],1)},n=[],r=s("0a0d"),a=s.n(r),o=s("f499"),c=s.n(o),u=(s("96cf"),s("3b8d")),l=(s("7f7f"),s("57e7"),s("ead66")),p=s("7f4d"),m=s("8c82"),d=s("fd7d"),h=s("37024"),f=s("0460"),w=s("5191"),v=s("8296"),y=s("7313"),b={name:"SecurityMailVerify",components:{SecurityHeadTitle:m["a"],SecuritySubmitButton:d["a"],SecuritySlideCode:h["a"],SecurityCommon:p["a"],SecurityTip:l["a"]},data:function(){return{os:v["G"],title:"",mail:"",from:"",countDown:60,type:"5",smsCodeRetryShow:!1,smsCode:"",cryptVersion:"",buttonDisable:!0,countDownShow:!1,isSlideCode:!1,secondToken:"",smsCodeError:!1,verifySuccess:!1,securityTipShow:!1,securityTipBlock:"",securityTipText:""}},computed:{isMail:function(){return this.from.indexOf("Mail")>-1},isPassword:function(){return this.from.indexOf("Password")>-1},isTw:function(){return Object(y["G"])()}},created:function(){var t=this.$route.query,e=t.mail,s=void 0===e?"":e,i=t.next,n=void 0===i?"":i,r=t.type,a=void 0===r?"5":r,o=t.from,c=void 0===o?"":o;this.mailI18n=this.$i18n.t("mail"),this.title=this.$i18n.t("common").title[this.$route.name],this.mail=s,this.next=n,this.type=a,this.from=c},beforeMount:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,s,i,n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=v["O"].getItem(y["f"]),t.next=3,Object(f["d"])();case 3:if(this.cryptVersion=t.sent,!this.cryptVersion){t.next=36;break}return t.t0=c.a,t.t1=a()(),t.t2=e,t.next=10,Object(w["b"])();case 10:return t.t3=t.sent,t.t4={t:t.t1,token:t.t2,dfp:t.t3,clientVersion:1},s=(0,t.t0)(t.t4),t.next=15,Object(f["c"])(s);case 15:return t.t5=t.sent,t.t6=this.cryptVersion,i={cryptSrcData:t.t5,cryptVersion:t.t6,platform:"web",nifc:!1},t.t7=JSON,t.next=21,Object(f["e"])(i);case 21:if(t.t8=t.sent,n=t.t7.parse.call(t.t7,t.t8),"A00000"!==n.code){t.next=36;break}if("9"!==this.type){t.next=29;break}this.isSlideCode=!0,this.secondToken=n.data.initData.secondToken,t.next=36;break;case 29:if("5"!==this.type){t.next=36;break}return t.t9=JSON,t.next=33,Object(f["g"])(i);case 33:t.t10=t.sent,r=t.t9.parse.call(t.t9,t.t10),"A00000"===r.code&&this.mailSended();case 36:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),methods:{submit:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,s,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(6===this.smsCode.length){t.next=4;break}this.smsCodeError=!0,t.next=26;break;case 4:return e=v["O"].getItem(y["f"]),t.t0=c.a,t.t1=a()(),t.t2=e,t.t3=this.smsCode,t.next=11,Object(w["b"])();case 11:return t.t4=t.sent,t.t5={t:t.t1,token:t.t2,staticVerifyValue:t.t3,dfp:t.t4,clientVersion:1},s=(0,t.t0)(t.t5),t.next=16,Object(f["c"])(s);case 16:return t.t6=t.sent,t.t7=this.cryptVersion,i={cryptSrcData:t.t6,cryptVersion:t.t7,platform:"web",nifc:!1},t.t8=JSON,t.next=22,Object(f["f"])(i);case 22:t.t9=t.sent,n=t.t8.parse.call(t.t8,t.t9),"A00000"===n.code?(this.verifySuccess=!0,this.securityTipText=this.mailI18n.congratulate+this.title+this.mailI18n.success):this.securityTipText=this.mailI18n.verifyFail,this.securityTipShow=!0;case 26:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),backToHome:function(){this.verifySuccess?this.next?this.$router.push({path:this.next}):this.isMail?this.$router.push({path:"/m/security/mailInput?type=".concat(this.from)}):this.isPassword&&this.$router.push({path:"/m/security/passwordInput?type=".concat(this.from)}):this.securityTipShow=!1},inputCode:function(){6===this.smsCode.length?this.buttonDisable=!1:this.buttonDisable=!0,this.smsCodeError=!1},resendCode:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,s,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=v["O"].getItem(y["f"]),t.t0=c.a,t.t1=a()(),t.t2=e,t.t3=this.secondToken,t.next=7,Object(w["b"])();case 7:return t.t4=t.sent,t.t5={t:t.t1,token:t.t2,secondToken:t.t3,dfp:t.t4,clientVersion:1},s=(0,t.t0)(t.t5),t.next=12,Object(f["c"])(s);case 12:return t.t6=t.sent,t.t7=this.cryptVersion,i={cryptSrcData:t.t6,cryptVersion:t.t7,platform:"web",nifc:!1},t.t8=JSON,t.next=18,Object(f["g"])(i);case 18:t.t9=t.sent,n=t.t8.parse.call(t.t8,t.t9),"A00000"===n.code&&this.mailSended();case 21:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),mailSended:function(){var t=this;this.countDownShow=!0,this.smsCodeRetryShow=!1,this.countDown=60,this.timer=setInterval(function(){t.countDown>1?t.countDown--:(clearInterval(t.timer),t.countDownShow=!1,t.smsCodeRetryShow=!0)},1e3)},onSildeVerifySuccess:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,s,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isSlideCode=!1,e=v["O"].getItem(y["f"]),t.t0=c.a,t.t1=a()(),t.t2=e,t.t3=this.secondToken,t.next=8,Object(w["b"])();case 8:return t.t4=t.sent,t.t5={t:t.t1,token:t.t2,secondToken:t.t3,dfp:t.t4,clientVersion:1},s=(0,t.t0)(t.t5),t.next=13,Object(f["c"])(s);case 13:return t.t6=t.sent,t.t7=this.cryptVersion,i={cryptSrcData:t.t6,cryptVersion:t.t7,platform:"web",nifc:!1},t.t8=JSON,t.next=19,Object(f["g"])(i);case 19:t.t9=t.sent,n=t.t8.parse.call(t.t8,t.t9),"A00000"===n.code&&this.mailSended();case 22:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),openMailLogin:function(){var t=this.mail.indexOf("@")+1,e=this.mail.slice(t);window.open(y["j"][e])}}},S=b,x=s("2877"),C=Object(x["a"])(S,i,n,!1,null,null,null);e["default"]=C.exports}}]);