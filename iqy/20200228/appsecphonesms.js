(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["appsecphonesms"],{c822:function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("SecurityCommon",{attrs:{title:e.title}},[t("div",{staticClass:"m-box"},[t("div",{staticClass:"m-box-items m-box-items-full"},[t("SecurityHeadTitle",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:"s-phonenum",expression:"'s-phonenum'"}],attrs:{title:e.title}}),t("section",{staticClass:"m-passport-form"},[e.isVerify?t("div",{key:"vp",staticClass:"input-info"},[t("div",{staticClass:"c-info"},[t("span",{staticClass:"name"},[e._v(e._s(e.sms.phoneNumber)+"ï¼š")]),t("span",{staticClass:"tel"},[e._v("+"+e._s(e.acode)+" "+e._s(e.phone))])])]):t("div",{key:"cp",staticClass:"input-info input-dl"},[t("label",{staticClass:"input-label"},[e._v(e._s(e.area))]),t("div",{staticClass:"c-info"},[e._v("+"+e._s(e.acode)+" "+e._s(e.phone))]),t("a",{directives:[{name:"pingback",rawName:"v-pingback",value:"c-modifyphone",expression:"'c-modifyphone'"}],staticClass:"c-input-link",attrs:{href:"javascript:void(0)"},on:{click:e.update}},[e._v(e._s(e.sms.update))])]),t("div",{attrs:{id:"sms-verify"}})])],1)]),t("SecurityTip",{directives:[{name:"show",rawName:"v-show",value:e.isVerifyDone,expression:"isVerifyDone"}],attrs:{"left-btn-text":e.sms.leftBtnText},on:{leftButtonClick:e.close},scopedSlots:e._u([{key:"tipInfo",fn:function(){return[e.isVerifySuccess?t("i",{staticClass:"c-passport-icon c-passport-succeedBig"}):t("i",{staticClass:"c-passport-icon c-passport-warnBig"}),t("div",{staticClass:"c-title"},[e._v(e._s(e.popTitle))])]},proxy:!0}])})],1)},n=[],r=(t("96cf"),t("3b8d")),c=(t("57e7"),t("7f4d")),o=t("8c82"),a=t("ead66"),u=t("0460"),p=t("dd38"),h=t("7313"),f=t("5321"),m={name:"SecuritySmsVerify",components:{SecurityCommon:c["a"],SecurityTip:a["a"],SecurityHeadTitle:o["a"]},data:function(){return{phone:"",acode:"",requestType:"",type:"",from:"",next:"",isVerifyDone:!1,isVerifySuccess:!1,smsVerify:null,err:""}},computed:{sms:function(){return this.$i18n.t("common").smsVerify},area:function(){return Object(p["c"])(this.acode)},popTitle:function(){return this.err||("bp"===this.from?this.sms.bindSuccess:this.sms.changeSuccess)},isVerify:function(){return this.from.indexOf("vp")>-1||this.isMail||this.isPassword},isMail:function(){return this.from.indexOf("Mail")>-1},isPassword:function(){return this.from.indexOf("Password")>-1},title:function(){return"findPassword"===this.from?this.sms.title[this.from]:this.isVerify?this.sms.title.vp:this.sms.title[this.from]},successBlock:function(){return"bp"===this.from?"s-bindingphone-sucess":"s-modifyphone-sucess"},failBlock:function(){return"bp"===this.from?"s-bindingphone-faild":"s-modifyphone-faild"}},created:function(){var e=this.$route.query;this.phone=e.phone,this.acode=e.acode,this.requestType=e.requestType,this.from=e.from,this.type=Object(h["A"])(e.type),this.next=e.next},mounted:function(){this.initVerifySmsCode()},destroyed:function(){this.smsVerify.remove()},methods:{update:function(){window.history.back()},initVerifySmsCode:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.smsVerify&&this.smsVerify.remove(),s={wrapper:document.getElementById("sms-verify"),callback:this.verifySmsCode,captchaType:this.type,phoneNumber:this.phone,areaCode:this.acode,requestType:this.requestType,token:Object(h["B"])(),isTw:Object(h["G"])()},e.next=4,Object(u["b"])(s);case 4:this.smsVerify=e.sent;case 5:case"end":return e.stop()}},e,this)}));function s(){return e.apply(this,arguments)}return s}(),verifySmsCode:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(s){var t,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("A00000"!==s.code){e.next=21;break}if(!this.next){e.next=5;break}this.$router.push({path:this.next}),e.next=21;break;case 5:if(!this.isMail){e.next=9;break}this.$router.push({path:"/m/security/mailInput?type=".concat(this.from)}),e.next=21;break;case 9:if(!this.isPassword){e.next=13;break}this.$router.push({path:"/m/security/passwordInput?type=".concat(this.from)}),e.next=21;break;case 13:return t={phone:this.phone,acode:this.acode,requestType:this.requestType},e.next=16,Object(h["O"])(t);case 16:i=e.sent,this.isVerifyDone=!0,this.isVerifySuccess=i&&i.success,this.isVerifySuccess?Object(f["h"])({block:this.successBlock}):(Object(f["h"])({block:this.failBlock}),"session_id_err"===i.status?this.err=this.sms.sessionIdErr:this.err=i.msg),Object(h["J"])();case 21:case"end":return e.stop()}},e,this)}));function s(s){return e.apply(this,arguments)}return s}(),close:function(){this.isVerifySuccess?Object(h["D"])():(this.isVerifyDone=!1,this.$router.back())}}},l=m,d=t("2877"),y=Object(d["a"])(l,i,n,!1,null,null,null);s["default"]=y.exports}}]);