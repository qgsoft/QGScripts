(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21f0fb"],{d7e7:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("AppealPage",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:"idimage",expression:"'idimage'"}],ref:"page",staticClass:"m-appeal-box",attrs:{title:"上传手持身份证照片"}},[a("AppealNote",{scopedSlots:e._u([{key:"body",fn:function(){return[e._v("\n      *必须本人手持身份证"),a("br"),e._v("*人脸、身份证上的信息需清晰可见\n    ")]},proxy:!0}])}),a("section",{staticClass:"m-appeal-IDImg"},[a("picture",{staticClass:"ID-photo"},[a("source",{attrs:{srcset:e.picDarkUrl,media:"(prefers-color-scheme: dark)"}}),a("img",{attrs:{src:e.picUrl}})]),a("div",{staticClass:"ID-input"},[a("FileUpload",{staticClass:"select-input",attrs:{upload:e.upload,"input-name":"pic"}}),a("i",{directives:[{name:"show",rawName:"v-show",value:!e.isUpload,expression:"!isUpload"}],staticClass:"c-passport-icon icon-jia"}),a("i",{directives:[{name:"show",rawName:"v-show",value:e.isUpload,expression:"isUpload"}],staticClass:"c-passport-icon icon-refresh"}),a("div",{staticClass:"input-text",on:{click:e.upload}},[e._v(e._s(e.isUpload?"重新上传":"点击上传"))])],1)]),a("AppealButton",{directives:[{name:"pingback",rawName:"v-pingback",value:"idimage-next",expression:"'idimage-next'"}],attrs:{disable:e.disabled,text:"下一步"},on:{submit:e.goBindPhone}})],1)},s=[],r=(a("4917"),a("7f7f"),a("28a5"),a("96cf"),a("3b8d")),n=a("d5cb"),o=a("a542"),c=a("d006"),p=a("e8eb"),u=a("261c"),l={components:{AppealPage:n["a"],AppealNote:o["a"],AppealButton:c["a"],FileUpload:p["a"]},data:function(){return{isUpload:!1,picUrl:"//www.iqiyipic.com/common/fix/h5-passport3.0/ID-photo.png",picDarkUrl:"//www.iqiyipic.com/common/fix/h5-passport3.0/ID-photo-dark.png"}},computed:{disabled:function(){return!this.isUpload}},methods:{upload:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.target.value){e.next=2;break}return e.abrupt("return");case 2:if(i=t.target.files[0],s=this.checkValidHeadshot(i),!s){e.next=7;break}return this.$refs.page.toast({title:"无法上传",info:s}),e.abrupt("return",!1);case 7:return e.abrupt("return",this.uploadFile(t,i));case 8:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),uploadFile:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t,a){var i,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading(),e.next=3,Object(u["m"])();case 3:if(i=e.sent,!i.success){e.next=17;break}if(s=i.data,!t.target.value){e.next=15;break}return e.next=9,Object(u["v"])({file:a,fileType:a.name.split(".")[1],accessToken:s||"2.774adfddf90a1bd6e93e6f056cdd58d8"});case 9:return r=e.sent,this.$refs.page.clearToast(),this.picUrl=this.picDarkUrl=r.success?r.httpInnerUrl:"",this.isUpload=!0,this.toast({isMiniToast:!0,text:r.success?"上传成功":"上传失败"}),e.abrupt("return",!0);case 15:e.next=18;break;case 17:this.toast(i);case 18:return e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),goBindPhone:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.isUpload){e.next=2;break}return e.abrupt("return");case 2:return this.loading({info:""}),e.next=5,Object(u["t"])({picUrl:this.picUrl});case 5:t=e.sent,this.$refs.page.clearToast(),t.success?this.$router.push("/m/appeal/newphone"):this.toast(t);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),checkValidHeadshot:function(e){var t=5242880;return!e.type.match(/(jpeg|gif|png|bmp)/)&&e.size>=t?"仅支持jpg,jpeg,gif,png,bmp格式且图片大小不能大于5M":e.type.match(/(jpeg|gif|png|bmp)/)?e.size>=t?"图片大小不能大于5M":void 0:"仅支持jpg,jpeg,gif,png,bmp格式图片"},loading:function(){this.$refs.page.toast({closeIcon:!0,isLoading:!0,info:"正在上传..."})},toast:function(e){var t=this;this.$refs.page.toast({isMiniToast:e.isMiniToast,text:e.text,title:e.title||"无法申诉",closeIcon:!1,info:e.msg,buttonInfo:[{text:"关闭",callback:function(){return t.$refs.page.clearToast()}}]})}}},d=l,f=a("2877"),h=Object(f["a"])(d,i,s,!1,null,null,null);t["default"]=h.exports}}]);