(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-video-sdk"],{"1fa0":function(e,t,i){"use strict";var n=i("7618"),a=(i("96cf"),i("3b8d")),r=i("795b"),o=i.n(r),s=i("d225"),c=i("b0b4"),d=i("2a84"),u="m3u8",l="mp4";function p(){return d["j"].ios&&!d["a"].readApp&&!d["a"].readPlugin||d["k"].redmi&&"NOTE 2"===d["k"].version.toUpperCase()&&d["j"].android&&Object(d["b"])(d["j"].version,"5.0")>0&&!d["a"].baidubrowser||(d["a"].baidubox||d["a"].baidubrowser||d["a"].weixin||!d["a"].weixin&&d["a"].qq&&Object(d["b"])(d["a"].version,"7.6")>=0)&&d["j"].android&&Object(d["b"])(d["j"].version,"4.4")>=0||d["a"].vivobrowser&&d["j"].android&&Object(d["b"])(d["j"].version,"5.0")>0?u:l}function h(){return d["j"].ios?"qc_100001_100102":"qc_100001_100186"}i.d(t,"a",function(){return y});var v="02020031010000000000",f={},y=function(){function e(){Object(s["a"])(this,e),f=null}return Object(c["a"])(e,[{key:"loadJS",value:function(){return window.__player__||(window.__player__={}),window.__player__.engine={qvs:d["j"].ios||d["j"].android&&d["a"].isChrome(),mp4:p()===l,m3u8:p()===u},window.QiyiPlayerLoader?new o.a(function(e,t){e()}):Object(d["h"])(location.protocol+"//static.iqiyi.com/js/player_v2/pcweb.mbweb.20200117.js")}},{key:"createPlayer",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new o.a(function(e,a){return i.loadJS().then(function(){if(!window.QiyiPlayerLoader)return e({type:"error",msg:"QiyiPlayerLoader is ".concat(Object(n["a"])(window.QiyiPlayerLoader))}),!1;window.QiyiPlayerLoader.ready(function(i){var n=t.addata,a={videoId:t.videoId,tvid:t.tvid,vid:t.vid,autoplay:!!t.autoplay,ptid:v,isPrevent:t.isPrevent,addata:{adPlayerId:n.playerId||h(),adTheme:n.adTheme||"default",relatedTheme:n.relatedTheme||"default",rate:n.rate||""},adapi:t.adapi||{}};f=i.createPlayer(a),e(f)})}).catch(function(t){e(t)})}));case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadSource",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.cupid=e.adId||h(),f.switchVideo(e)}},{key:"preload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f.checkPreload()&&e.tvid&&f.preload(e.tvid,e.vid)}},{key:"setPreviewEnd",value:function(){f.setPreviewEnd()}},{key:"stopAres",value:function(){f.stopAres()}},{key:"sendPauseVV",value:function(){f.sendPauseVV()}},{key:"sendEndVV",value:function(){f.sendEndVV()}},{key:"switchDefinition",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];f.switchDefinition(e,t)}},{key:"setPlayPingbackInfo",value:function(e){f.setPlayPingbackInfo(e)}},{key:"getEngineType",value:function(){return f.getEngineType()}},{key:"getVd",value:function(){return f.vd}},{key:"clear",value:function(){f=null}},{key:"isAd",value:function(){return f.isAd()}},{key:"getType",value:function(){return p()}},{key:"getSkipHeaderTime",value:function(){return f.getSkipHeaderTime()}},{key:"getSkipTailTime",value:function(){return f.getSkipTailTime()}},{key:"isSkipPrelude",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return f.isSkipPrelude(e,t)}},{key:"setTempStore",value:function(){try{f.setTempStore()}catch(e){}}}]),e}()},"248c":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"m-video-player-wrap"},[i("section",{staticClass:"m-video-player m-video-fullScreenWrap change",class:e.playerClass,style:e.playerStyle},[i("QiyiVideo",{ref:"video",staticClass:"m-player hideControls",attrs:{tvid:e.tvid,vid:e.vid,"ad-params":e.adParams,autoplay:e.autoplay,rate:e.rate,"control-ele":e.controlEle},on:{inited:e.initQiyiVideo,error:function(t){return e.$emit("error",t)}}}),i("QiyiPosterLayer",e._b({ref:"qiyiPosterLayer"},"QiyiPosterLayer",e.$attrs,!1)),e.playButton?i("QiyiPlayButton",{ref:"playButton",on:{playClick:e.togglePlay}}):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.titleShow&&e.dashboardShow,expression:"titleShow && dashboardShow"}],staticClass:"video-title"},[i("span",{staticClass:"c-title"},[e._v(e._s(e.videoName))])]),e.dashboard?[i("QiyiDashboard",{directives:[{name:"show",rawName:"v-show",value:e.isVideo,expression:"isVideo"}],ref:"dashboard",attrs:{"is-video":e.isVideo},on:{playClick:e.togglePlay,seek:e.seek,fullscreen:e._handleFullscreen,dashboardShowChange:e._setDashboardShow}}),i("QiyiAdDashboard",{directives:[{name:"show",rawName:"v-show",value:!e.isVideo,expression:"!isVideo"}],on:{voiceClick:e.toggleMuted,fullscreen:e._handleFullscreen}})]:e._e(),e._t("layer"),e.source?i("QiyiSourceLayer",e._b({attrs:{"vip-type":e.vipType,"video-name":e.videoName,"is-show-vip-layer":e.isShowVipLayer},on:{sourceTypeChange:e._sourceTypeHandle,sourceLayerFoo:e._sourceLayerFooHandle,sourceVipType:e._sourceVipType,noSourceLayer:function(t){e.noSourceLayer=t}}},"QiyiSourceLayer",e.$attrs,!1)):e._e(),i("QiyiLoading",e._b({directives:[{name:"show",rawName:"v-show",value:!e.forceShowLayer,expression:"!forceShowLayer"}],ref:"loading",attrs:{"loading-callapp":e.loadingCallapp}},"QiyiLoading",e.$attrs,!1)),i("QiyiPlayLimit",e._b({on:{replayPlay:function(t){return e.seek(0)},play:e.play,stopPlay:function(t){e.played=!1},show:function(t){return e.$emit("limitShow",t)},playLimited:function(t){e.isPlayLimited=t}},scopedSlots:e._u([e.limitCallAppCustom?{key:"callApp",fn:function(){return[e._t("limitCallApp")]},proxy:!0}:null],null,!0)},"QiyiPlayLimit",e.$attrs,!1)),e.limit&&e.noSourceLayer?i("QiyiLimit",e._b({on:{replayPlay:function(t){return e.seek(0)},play:e.play,stopPlay:function(t){e.played=!1},show:function(t){return e.$emit("limitShow",t)}},scopedSlots:e._u([e.limitCallAppCustom?{key:"callApp",fn:function(){return[e._t("limitCallApp")]},proxy:!0}:null],null,!0)},"QiyiLimit",e.$attrs,!1)):e._e(),i("QiyiBottomBuyLayer",{directives:[{name:"show",rawName:"v-show",value:!e.dashboardShow,expression:"!dashboardShow"}]}),i("QiyiVideoContinue",{ref:"videoContinue",on:{seek:e.seek,srcChange:e.play,videoStatusChange:e.onVideoStatusChange,play:e._handlePlay,ended:e._handleEnded}})],2),e.vv?i("QiyiVV",{ref:"vv",attrs:{"is-video":e.isVideo,"vv-options":e.vvOptions,"coustom-vv-options":e.coustomVvOptions,"player-type":e.playerType,rate:e.rate},on:{sendVV:function(t){return e.$emit("sendVV",t)}}}):e._e()],1),e.record?i("QiyiRecord",{ref:"record",attrs:{"skip-head-and-end":e.skipHeadAndEnd},on:{ended:e._handleEnded}}):e._e(),e.source?i("portal-target",{attrs:{name:"playerPopupContainer"}}):e._e()],1)},a=[],r=(i("7514"),i("cebc")),o=(i("7f7f"),i("57e7"),i("96cf"),i("3b8d")),s=(i("c5f6"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("video",{attrs:{id:"video","webkit-playsinline":"",playsinline:""}})}),c=[],d=(i("d92a"),i("1fa0")),u=i("6ffa"),l={name:"QiyiVideo",props:{tvid:{type:[Number,String],required:!0},vid:{type:String,default:""},adParams:{type:Object,default:function(){return{}}},autoplay:{type:Boolean,default:!1},controlEle:{type:String,default:""}},data:function(){return{isLoadVideoSdk:null,seekLock:!0,isCreated:!1}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=document.getElementById("video"),e.next=4,this.createQiyiVideo(t);case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{createQiyiVideo:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.isCreated){e.next=2;break}return e.abrupt("return");case 2:return this.isCreated=!0,this.player=new d["a"],e.next=6,this.player.createPlayer({videoId:"video",tvid:this.tvid,vid:this.vid,autoplay:this.autoplay,addata:Object(r["a"])({playerId:this.adParams.adId},this.adParams),adapi:{height:this.videoHeight.bind(this),width:this.videoWidth.bind(this),fullscreen:this.toggleFullscreen.bind(this),isfullscreen:this.isFullscreen.bind(this)},isPrevent:this.isPrevent.bind(this)});case 6:i=e.sent,i&&"error"!==i.type?(this.video=new u["a"]({sdk:i,video:t||this.$el,controlEle:this.controlEle?document.getElementById(this.controlEle):""}),this.player.getVideo=function(){return n.video||{}},this.init()):this.$emit("error",{targetName:"api",msg:i?i.msg||"load_sdk":"init_player"});case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),init:function(){var e=this.player;this.player.isSkipPrelude(),this.$emit("inited",e)},videoWidth:function(){return this.video.width()},videoHeight:function(){return this.video.height()},toggleFullscreen:function(){var e=this.video.isFullscreen();e?this.video.exitFullscreen():(this.video.play(),this.video.fullscreen())},isFullscreen:function(){return this.video.isFullscreen()},isPrevent:function(){var e=this.video&&this.video.getSrcStatus();return!e}}},p=l,h=i("2877"),v=Object(h["a"])(p,s,c,!1,null,null,null),f=v.exports,y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},m=[],g={name:"QiyiVideoContinue",data:function(){return{isAd:!1}},beforeMount:function(){this.init()},methods:{init:function(){var e=this,t=this.$parent;t.$on("created",function(t){e.qiyiVideo=t,e.bindEvent()})},bindEvent:function(){var e=this,t=this.$parent;t.$on("load",function(){t.off("playing",e.play),t.once("playing",e.play)}),t.$on("loaded",function(t){e.isHttp=t.videoInfo.isHttp,e.isMp4="mp4"===t.type,e.prv=t.videoInfo.prv,e.videoStatus=""}),t.on("pause",function(){!e.isHttp&&e.prv&&t.currentTime()>=t.duration()&&!e.isAd&&e.$emit("ended","VIDEO",!0)}),t.on("ended",function(){t.reset(),e.triggerVideoStatus(),e.isAd?(t.off("playing",e.play),t.once("playing",e.play),e.$emit("srcChange")):e.$emit("ended",e.videoStatus)}),t.on("adended",function(){setTimeout(function(){e.triggerVideoStatus()},100),t.off("playing",e.play),t.once("playing",e.play)}),t.on("fullscreenchange",function(){e.isAd=e.qiyiVideo.isAd(),e.isAd||e.triggerVideoStatus()})},triggerVideoStatus:function(){this.isAd=this.qiyiVideo.isAd();var e=this.videoStatus;this.videoStatus=this.isAd?"AD":"VIDEO",this.videoStatus!==e&&this.$emit("videoStatusChange",this.videoStatus)},play:function(){this.triggerVideoStatus();var e=this.$parent;!e.paused()&&e.src()&&this.$emit("play",{videoStatus:this.videoStatus})},skipAd:function(){var e=this.$parent;this.isMp4?(e.off("playing",this.play),e.once("playing",this.play)):this.play()}}},b=g,k=Object(h["a"])(b,y,m,!1,null,null,null),w=k.exports,S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isLimit?i("div",[e.startShow?i("div",{staticClass:"m-play-appGuide",style:"background-image: url("+e.poster+");"},[i("div",{staticClass:"handle"},[i("a",{directives:[{name:"pingback",rawName:"v-pingback",value:"h5_xuanji_5min",expression:"'h5_xuanji_5min'"}],staticClass:"c-link",attrs:{href:"javascript:void(0)"},on:{click:e.play}},[i("i",{staticClass:"c-glyphicon c-glyphicon-albumPlay"}),e._v("试看5分钟\n      ")]),i("ButtonDown",{staticClass:"c-link",attrs:{subtype:e.subtype,"extral-options":e.extralOptions(),tag:"a",href:"javascript:void(0);","to-page":"play"}},[e._v("\n        进入爱奇艺观看完整版\n      ")])],1)]):e._e(),e.endShow?i("div",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:"h5_block_xianbo_seeend",expression:"'h5_block_xianbo_seeend'"}],staticClass:"m-player-tip m-video-limitePlay"},[i("div",{staticClass:"player-tip-inner"},[e.isVip?e._e():i("div",{staticClass:"c-player-tip-info"},[e._v("试看结束")]),i("div",{staticClass:"c-player-tip-info"},[e._v(e._s(e.tipInfo))]),i("div",{staticClass:"player-tip-btn"},[i("ButtonDown",{staticClass:"c-link laqi",attrs:{subtype:e.subtype,"extral-options":e.extralOptions(),tag:"a",rseat:"h5_xianbo_seeend",href:"javascript:void(0);","to-page":"play"}},[e._v("观看完整版\n        ")])],1),e.isVip?e._e():i("a",{staticClass:"c-refresh-btn",attrs:{href:"javascript:void(0)"},on:{click:e.replayPlay}},[i("i",{staticClass:"c-glyphicon c-glyphicon-playRefresh"}),e._v("重新播放\n      ")])])]):e._e()]):e._e()},_=[],C=i("795b"),P=i.n(C),T=i("2a84"),x=i("38ff"),V=i("ba45"),$=i("f191"),j=i("b2e7"),I=i("5321"),O={name:"QiyiPlayLimit",components:{ButtonDown:x["a"]},props:{subtype:{type:String,default:"H5qzql_523"},templateType:{type:String,default:""},redirect:{type:Boolean,default:!1},playTemplate:{type:String,default:""},second:{type:Number,default:300},poster:{type:String,default:""},limitFilter:{type:Boolean,default:!1}},data:function(){return{startShow:!1,endShow:!1,purchaseType:0,isVip:!1,tipInfo:"请打开爱奇艺APP观看完整版",videoInfo:{},isLimit:!1,vipUser:!1}},computed:{show:function(){return this.startShow||this.endShow}},watch:{show:function(e){this.$emit("show",e),this.$emit("playLimited",!0)}},beforeMount:function(){this.isVipUser(),this.init()},methods:{init:function(){var e=this;this.$parent.$on("created",function(){e.video=e.$parent.video,e.video.once("play",function(){e.isLimit&&(e.stop(),e.start())})}),this.$parent.$on("load",function(t){e.purchaseType=t.purchaseType}),this.$parent.$on("loaded",function(t){e.videoInfo=t.videoInfo;var i=t.videoInfo;e.tvid=i.tvid,e.duration=i.duration,i&&(i.purchaseType=+e.purchaseType),e.isLimit=Object($["a"])(i,e.playTemplate,e.limitFilter,e.vipUser),e.isLimit&&(1!==+e.purchaseType&&2!==+e.purchaseType||e.vipUser?(e.isVip=!1,e.tipInfo="请打开爱奇艺APP观看完整版 ",e.startShow=!e.redirect,e.endShow=!1):(e.isVip=!0,e.tipInfo="由于版权限制，请打开爱奇艺App观看完整版",e.endShow=!0,e.startShow=!1),e.video.pause(),e.$emit("stopPlay"))})},extralOptions:function(){var e=this.cid||this.videoInfo.cid||(this.videoInfo.data?this.videoInfo.data.cid:"")||"",t=this.tvid||this.videoInfo.tvid||"";return{progress:this.$parent.video.currentTime(),ftype:27,cid:e,tvid:t}},callApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=V["h"][e]||{},i=this.subtype,n=this.cid||this.videoInfo.cid||(this.videoInfo.data?this.videoInfo.data.cid:"")||"",a=this.tvid||this.videoInfo.tvid||"";return Object(V["y"])({down:0,ftype:27,progress:this.$parent.video.currentTime(),cid:n,tvid:a,subtype:i}).catch(function(){var e=t.downloadUrl||Object(V["m"])({downAppPos:"play_button_open"});return Object(V["k"])(e),P.a.reject(new Error("callapp fail"))})},play:function(){Object(I["g"])({rseat:"h5_xuanji_5min"}),this.hide(),this.$emit("play")},replayPlay:function(){this.hide(),this.$emit("replayPlay")},continuePlay:function(){this.hide(),this.continue=!0,this.$emit("play")},hide:function(){T["j"].android&&this.video.show(),this.startShow=!1,this.endShow=!1},redirectOrCallApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.callApp().catch(function(){e.toCopy&&(location.href="/m5/app/guide.html?redirect_url=".concat(encodeURIComponent(location.href)))})},start:function(){this.timer=L(1e3)(this.limit.bind(this))},stop:function(){this.timer&&this.timer()},limit:function(){var e=this.$parent.currentTime(),t=this.second,i=this.duration;i<=t||this.continue||(e>t+3?(this.video.seek(t),this.hide()):e>t&&this.showLayerAndPause())},showLayerAndPause:function(){T["j"].android&&this.video.hide(),this.video.paused()||(this.video.exitFullscreen(),this.startShow=!1,this.endShow=!0,this.video.pause())},isVipUser:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(Object(j["M"])()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Object(j["u"])();case 4:return t=e.sent,e.next=7,Object(j["I"])();case 7:if(i=e.sent,"A00000"!==t.code){e.next=16;break}if(!(i&&i.data&&i.data.vip_info&&+i.data.vip_info.vipType===+j["k"])){e.next=14;break}return this.vipUser=!1,e.abrupt("return",!1);case 14:return this.vipUser=!0,e.abrupt("return",!1);case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}};function L(e){return function t(i){return clearTimeout(L.time),L.time=setTimeout(function(){i(),t(i)},e),function(){clearTimeout(L.time)}}}var A=O,E=Object(h["a"])(A,S,_,!1,null,null,null),R=E.exports,B=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.posterShow,expression:"posterShow"}]},[e.poster?i("div",{staticClass:"m-video-poster"},[i("img",{attrs:{id:"player-posterimg",src:e.poster}})]):e._e(),e.title?i("div",{staticClass:"video-title"},[i("span",{staticClass:"c-title"},[e._v(e._s(e.title))])]):e._e(),e.num||e.time?i("div",{staticClass:"playCount-time"},[e.num?i("span",{staticClass:"c-num"},[e._v(e._s(e.num))]):e._e(),e.time?i("span",{staticClass:"c-time"},[e._v(e._s(e.time))]):e._e()]):e._e()])},F=[],q={name:"QiyiPoster",inheritAttrs:!1,props:{poster:{type:String,default:""},title:{type:String,default:""},num:{type:String,default:""},time:{type:String,default:""}},data:function(){return{posterShow:!0}},beforeMount:function(){var e=this;this.$parent.$on("created",function(){e.init()})},methods:{init:function(){var e=this;this.$parent.on("playing",function(){e.posterShow=!1})}}},N=q,H=Object(h["a"])(N,B,F,!1,null,null,null),D=H.exports,M=(i("6762"),i("2fdb"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"m-player-tip"},[i("div",{staticClass:"player-tip-inner"},[i("div",{staticClass:"c-player-tip-info",domProps:{innerHTML:e._s(e.info.text)}}),e.info.returnHomeText?i("a",{staticClass:"c-btn",attrs:{href:"//m.iqiyi.com/"}},[e._v("\n      "+e._s(e.info.returnHomeText)+"\n    ")]):e._e(),e.info.callAppText?i("a",{staticClass:"c-btn",attrs:{"down-app-pos":"play_oversea_error_down",rseat:""},on:{click:e.callApp}},[e._v("\n      "+e._s(e.info.callAppText)+"\n    ")]):e._e(),e.code?i("div",{staticClass:"c-error-info"},[e._v("\n      错误代码: "+e._s(e.code)+"\n    ")]):e._e()])])}),Q=[],U=i("ec1c"),z={name:"QiyiSourceCodeLayer",props:{videoInfo:{type:Object,default:function(){return{}}}},computed:{code:function(){var e=this.videoInfo,t=e.code,i=e.data,n=i.st;return t&&n?"".concat(t,"_").concat(n):""},info:function(){var e={},t=this.videoInfo,i=t.data,n=i.st;return e=this.isPano(t)?{text:"很抱歉，<br>当前节目只能在客户端观看",callAppText:"去爱奇艺APP观看"}:this.videoInfo.code?"A00001"===this.videoInfo.code?{text:"很抱歉<br>您所查看的视频不存在",returnHomeText:"去看看其他视频"}:501===n?{text:"很抱歉，该平台无法观看本视频<br>下载爱奇艺APP观看海量高清视频",callAppText:"去爱奇艺APP观看"}:502===n?{text:"很抱歉，由于版权限制，<br>您所在的地区暂时无法观看该视频",returnHomeText:"去看看其他视频"}:[505,506].includes(n)?{text:"很抱歉<br>由于视频版权限制，您无法观看该视频",callAppText:"去爱奇艺APP观看"}:509===n?{text:"很抱歉，该视频为私密视频，本平台暂无法观看",returnHomeText:"去看看其他视频"}:503===n?{text:"很抱歉<br>该视频尚未通过审核，暂时无法观看",returnHomeText:"去看看其他视频"}:[492,405,406].includes(n)?{text:"很抱歉<br>您所查看的视频已下线",returnHomeText:"去看看其他视频"}:[602,701,702,703].includes(n)?{text:"很抱歉，<br>应版权方要求，当前节目只能在客户端观看",callAppText:"去爱奇艺APP观看"}:{text:"很抱歉<br>您所查看的视频不存在",returnHomeText:"去看看其他视频"}:{text:"很抱歉<br>当前视频暂时无法播放，请您稍后再试",returnHomeText:"去看看其他视频"},e}},methods:{isPano:function(e){var t=e&&e.data?e.data:e;if(t.p.pano){var i=t.p.pano.type;return 1!==i}return!1},callApp:function(e){var t=this;Object(V["y"])(Object(r["a"])({subtype:152,down:"0"},this.videoInfo)).catch(function(){var i=Object(V["m"])({downAppUrl:t.downAppUrl,downAppPos:t.downAppPos,downAppAndroidUrl:t.downAppAndroidUrl,downAppIosUrl:t.downAppIosUrl});Object(V["k"])(i);var n=e.target;Object(U["c"])({rt:{A:"a",IMG:"i"}[n.nodeName]||"e",rseat:"mcltdown_4bfydwn",rlink:n.getAttribute("href"),packgtype:T["j"].android?"androidphone":"iphone"})})}}},G=z,W=Object(h["a"])(G,M,Q,!1,null,null,null),J=W.exports,X=(i("a481"),i("bd86")),Z=i("a78e"),Y=i.n(Z),K="QC006",ee="suid",te="1",ie="4",ne="",ae="//act.vip.iqiyi.com/interact/api/show",re="97ae2982356f69d8";function oe(){var e=Y.a.get("P00002"),t=Y.a.get("P00003");return e&&"deleted"!==e&&t&&"deleted"!==t}function se(){return Y.a.get("P00001")||""}function ce(){if(ne)return ne;var e=T["i"].getItem(ee),t=Y.a.get(K);if(ne=e||t)return(!t||!e)&&de(ne),ne;var i=Object(T["m"])();return de(i),i}function de(e){ne=e,T["i"].setItem(ee,e),Y.a.set(K,e,{expires:31536e6,path:"/",domain:"iqiyi.com"})}function ue(){return le.apply(this,arguments)}function le(){return le=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i,n,a,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",i={P00001:se(),code:t,platform:re,deviceID:ce(),version:"1.0",lang:"cn",app_lm:"cn"},e.next=4,Object(T["g"])(ae,{params:i});case 4:if(n=e.sent,a=n.data||{},"A00000"!==a.code||!a.data.detail){e.next=8;break}return e.abrupt("return",a.data.detail);case 8:return e.abrupt("return","");case 9:case"end":return e.stop()}},e)})),le.apply(this,arguments)}var pe,he,ve,fe,ye=i("51cb"),me=i("e814"),ge=i.n(me),be=i("5176"),ke=i.n(be),we=(i("6d67"),{name:"EduPackageLayer",props:{videoName:{type:String,default:""},videoInfo:{type:Object,default:function(){return{}}},layerInfo:{type:Object,default:function(){return{}}}},data:function(){return{layerShow:!1,packages:[],index:0}},methods:{show:function(){this.formatPackage(),this.layerShow=!0},hideLayer:function(){this.layerShow=!1},updateIndex:function(e){this.index=e},formatPackage:function(){var e=this,t=this.layerInfo,i=t.aid,n=t.data;n&&n.package&&(this.packages=n.package.map(function(t){return ke()({},t,{price:ge()(t.price||0)/100,originPrice:ge()(t.originPrice||0)/100,halfPrice:ge()(t.halfPrice||0)/100,content:t.content.map(function(e){return e.url=e.url.replace(/((http(s)?:)?\/\/)?(www|m)\.(i)?qiyi\.com/i,""),e}),validityPeriod:t.validityPeriod?t.validityPeriod.slice(0,-3):"",videoName:e.videoName,aid:i})}))},buyPackage:function(){var e=this.packages[this.index],t="a3c61c9f84531245",i="".concat(window.location.protocol,"//m.iqiyi.com/productPay.html?fc=").concat(t,"&serviceCode=").concat(e.serviceCode||"","&aid=").concat(e.aid||"","&pid=").concat(e.pid||"");oe()||(i="//m.iqiyi.com/user.html?redirect_url=".concat(encodeURIComponent(i))),window.location.href=i}},render:function(){var e=this,t=arguments[0],i=this.packages.map(function(i,n){return t("li",{class:[n===e.index&&"selected"]},[t("a",{attrs:{href:"javascript:void(0);"},class:"c-link-item",on:{click:e.updateIndex.bind(e,n)}},["套餐",n+1])])}),n=this.packages[this.index],a=n?n.content.map(function(e){return t("li",[t("div",{class:"piclist-img"},[t("a",{attrs:{href:e.url?e.url:"javascript:void(0);"},class:"piclist-link",style:"background-image:url(".concat(e.pic,")")},[t("div",{class:"c-rb"},[t("span",{class:"c-date"},[e.set?"".concat(e.set,"集全"):""])]),t("div",{class:"c-videoplay hide"},[t("i",{class:"c-videoplay-icon c-videoplay-small"})])])]),t("div",{class:"piclist-title"},[t("div",{class:"c-title"},[t("a",{attrs:{href:e.url?e.url:"javascript:void(0);"}},[e.name])])])])}):[];return t("div",[[this.layerShow&&t("div",{class:"m-cover-popup",style:"overflow-y:scroll;"},[t("div",{class:"m-Package-details"},[t("div",{class:"content-header"},[t("div",{class:"header-fixed"},[t("div",{class:"content"},[t("h1",{class:"c-title"},["套餐详情"]),t("a",{attrs:{href:"javascript:void(0);"},class:"close-info-btn",on:{click:this.hideLayer}},[t("i",{class:"c-glyphicon c-glyphicon-guideClose"})])])])]),t("div",{class:"c-info"},[this.videoName?"《".concat(this.videoName,"》包含在 如下套餐中:"):""]),t("div",{class:"m-sliding"},[t("div",{class:"contain clearfix"},[t("ul",{class:"list-item m-sliding-list",style:"overflow-x:scroll;width:100%;"},[i])])])]),t("div",{class:"m-setMeal-info"},[t("div",{class:"left-wrap"},[t("div",{class:"c-title"},[n.name?n.name:"高等数学全部讲解高等数学全部讲解高 等数学全部讲解"]),t("div",{class:"c-price"},["优惠价：",n.price,"元 ",n.price<n.originPrice&&t("span",{class:"c-line-through"},["（原价",n.originPrice,"元）"])]),t("div",{class:"c-time"},["有效期：",n.validity," 至 ",n.validityPeriod])]),t("div",{class:"right-wrap",on:{click:this.buyPackage.bind(this)}},[t("span",{class:"c-btn-pay"},["打包购买"])])]),t("div",{class:"m-box m-box-top m-box-bottom"},[t("div",{class:"m-setMeal-tiele"},[t("div",{class:"title"},[t("h3",{class:"c-title-des"},["包含专辑(",n.content.length,")"])])]),t("div",{class:"m-box-items m-box-items-full"},[t("section",{class:"m-pic m-pic-vercital m-pic-vercital-sliding m-sliding"},[t("ul",{class:"m-pic-list m-sliding-list m-pic-list-new",style:"transform: translate(0px, 0px) translateZ(0px);overflow-x:scroll;width:100%;"},[a])])])])])]])}}),Se=we,_e=Object(h["a"])(Se,pe,he,!1,null,null,null),Ce=_e.exports,Pe={name:"QiyiSourceVipLayer",components:{Login:{functional:!0,render:function(e,t){var i=t.props;return e("div",{class:"c-login-tip-info"},[i.label,e("a",{directives:[{name:"show-pingback",value:"8051101_db_login_block"},{name:"pingback",value:"8051101_db_login"}],attrs:{href:"//m.iqiyi.com/user.html"},domProps:{innerHTML:i.text},class:"c-link"})])}},VipMarketButton:{functional:!0,render:function(e,t){var i=t.props,n=i.marketTip||{},a=n.detail||{},r=i.aid||i.tvid,o=(a.redirectUrl1?a.redirectUrl1+"&aid=".concat(r):"")||"//m.iqiyi.com/pay.html?fc=".concat(i.fc,"&aid=").concat(r);return e("div",{class:"vipPlayer-tip"},[e("a",{directives:[{name:"show-pingback",value:i.block},{name:"pingback",value:i.rseat}],attrs:Object(X["a"])({href:"javascript:void(0)"},"href",o),class:"c-btn"},[i.text]),a.text1?e("span",{directives:[{name:"show-pingback",value:"8051101_dbq_qipao_block"}],class:"c-info"},[a.text1]):e("span",{class:"c-info"},["立送",i.vodCouponCount?"".concat(i.vodCouponCount,"张"):null,"点播券"])])}},TipInfo:{functional:!0,render:function(e,t){var i=t.props;return e("div",{class:"c-player-tip-info"},[i.text])}},BuyButton:{functional:!0,render:function(e,t){var i=t.props,n=i.price,a=i.originPrice||n,r=null;n<a?r="会员特惠".concat(n,"元(原价").concat(a,"元)"):n===a&&(r="".concat(n,"元购买本片"));var o="".concat(window.location.protocol,"//m.iqiyi.com/productPay.html?fc=").concat(i.fc,"&serviceCode=").concat(i.serviceCode||"","&aid=").concat(i.aid||"","&pid=").concat(i.pid||"");oe()||(o="//m.iqiyi.com/user.html?redirect_url=".concat(encodeURIComponent(o)));var s=[i.className,"c-btn-buy"];return e("a",{directives:[{name:"show-pingback",value:i.block},{name:"pingback",value:i.rseat}],attrs:{href:o},class:s},[r])}},VipBuyButton:{functional:!0,render:function(e,t){var i=t.props,n=i.aid||i.tvid,a="//m.iqiyi.com/pay.html?fc=".concat(i.fc,"&aid=").concat(n);return e("div",{class:"vipPlayer-tip"},[e("a",{attrs:{href:a},class:"c-btn"},["开通会员",i.price,"元购买"])])}},CouponLayer:{props:{videoName:{type:String,default:""},validityPeriod:{type:String,default:""},leftCouponNum:{type:Number,default:0},useVodCouponUrl:{type:String,default:""}},data:function(){return{toastText:"",toastShow:!1,popupShow:!1}},methods:{useCoupon:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(ye["d"])(this.useVodCouponUrl.replace(/^(http(s)?:\/\/)/i,"//")).catch(function(){return{data:{}}});case 2:t=e.sent,"A00000"===t.data.code?(this.showToast("已使用 1 张点播券, 请在 48 小时内完成观看"),setTimeout(function(){window.location.reload()},3e3)):this.showToast("点播券消费失败");case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),show:function(){this.hideToast(),this.popupShow=!0},showToast:function(e){var t=this;this.hide(),this.toastText=e||"",this.toastShow=!0,setTimeout(function(){t.hideToast()},2e3)},hideToast:function(){this.toastShow=!1},hide:function(){this.popupShow=!1}},render:function(){var e=arguments[0];return e("div",[[this.popupShow&&e("div",[e("div",{class:"cover"}),e("div",{class:"m-player-buy-pop"},[e("div",{class:"info"},[e("div",{class:"title"},[this.videoName?"观看《".concat(this.videoName,"》"):""]),e("div",{class:"des"},["观影有效期至：",this.validityPeriod]),e("div",{class:"des"},["剩余",e("span",{class:"orange"},[this.leftCouponNum]),"张点播券，使用",e("span",{class:"orange"},["1"]),"张"])]),e("div",{class:"handle"},[e("a",{attrs:{href:"javascript:void(0)"},class:"c-link",on:{click:this.hide}},["取消"]),e("a",{attrs:{href:"javascript:void(0)"},class:"c-link orange",on:{click:this.useCoupon}},["使用"])])])]),this.toastShow&&e("div",{class:"m-toast m-player-toast"},[e("div",{class:"info"},[this.toastText])])]])}},EduPackageLayer:Ce},props:{videoInfo:{type:Object,default:function(){return{}}},vipType:{type:String,default:""},videoName:{type:String,default:""},layerInfo:{type:Object,default:function(){return{}}},templateType:{type:Number,default:0}},data:function(){return{vipHtml:""}},methods:{useCoupon:function(){this.$refs.coupon.show()},buyPackage:function(){this.$refs.eduPackageLayer.show()}},render:function(){var e=arguments[0];if(0===this.templateType)return null;var t=this.layerInfo,i=this.videoInfo,n=this.templateType,a=t.price,r=t.vipPrice,o=t.originPrice,s=t.leftCouponNum,c=t.useVodCouponUrl,d=t.validityPeriod,u=this.videoName,l="1"===i.prvType&&i.src,p=!1;function h(){var t="//sports.iqiyi.com/resource/h5/live-buy.html",n=i.aid?"".concat(t,"?cid=").concat(i.aid||"","&isLive=0&isShowMemOnly=1"):"javascript:void(0)";return e("a",{attrs:{href:n},class:"c-btn"},[e("i",{class:"icon-sports-vip"}),"立即购买"])}var v="";if(1===n)v=e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"".concat(l?"试看结束，":"","由于版权方要求，本片需购买观看")}}),e("div",{class:"c-player-btn"},[a<=r?e("BuyButton",{attrs:{price:a,"class-name":"vipPlayer-tip","service-code":t.serviceCode,aid:t.aid,pid:t.pid,fc:"b10b185d7db52958"}}):[e("BuyButton",{attrs:{price:a,"service-code":t.serviceCode,aid:t.aid,pid:t.pid,fc:"b10b185d7db52958"}}),e("VipBuyButton",{attrs:{price:r,fc:"bb2942736c2d5e67",aid:i.aid,tvid:i.tvid}})]]),e("Login",{attrs:{label:"已购本片？请",text:"登录观看"}})]);else if(2===n)v=e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"".concat(l?"试看结束，":"","由于版权方要求，本片需购买观看")}}),e("div",{class:"vipPlayer-tip"},[e("BuyButton",{attrs:{price:a,"origin-price":o,"service-code":t.serviceCode,aid:t.aid,pid:t.pid,"class-name":"c-btn",fc:"b10b185d7db52958"}})])]);else if(3===n)v=e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"".concat(l?"试看结束，":"","由于版权方要求，本片需购买观看")}}),e("div",{class:"c-player-btn"},[a<=r?e("BuyButton",{attrs:{price:a,"service-code":t.serviceCode,aid:t.aid,pid:t.pid,"class-name":"vipPlayer-tip",fc:"b10b185d7db52958"}}):[e("BuyButton",{attrs:{price:a,"service-code":t.serviceCode,aid:t.aid,pid:t.pid,fc:"b10b185d7db52958"}}),e("VipBuyButton",{attrs:{price:r,fc:"bb2942736c2d5e67",aid:i.aid,tvid:i.tvid}})]])]);else if(4===n)v=e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"".concat(l?"试看结束，":"","由于版权方要求，本片需用券观看")}}),e("div",{class:"c-player-btn"},[e("BuyButton",{attrs:{price:a,"service-code":t.serviceCode,aid:t.aid,pid:t.pid,fc:"b10b185d7db52958"}}),e("VipMarketButton",{attrs:{"vod-coupon-count":t.vodCouponCount,"market-tip":t.marketTip,aid:t.aid,fc:"b6c004c57a163f9a",text:"开通VIP会员"}})]),e("Login",{attrs:{label:"已是会员或已购买，",text:"请登录"}})]);else if(5===n)v=e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"".concat(l?"试看结束，":"","由于版权方要求，本片需用券观看")}}),e("div",{class:"c-ticket-tip"},["您还有",s,"张券可用于观看本片"]),e("div",{class:"c-player-btn"},[e("BuyButton",{attrs:{price:a,"origin-price":o,"service-code":t.serviceCode,aid:t.aid,pid:t.pid,fc:"b10b185d7db52958"}}),e("div",{class:"vipPlayer-tip"},[e("a",{attrs:{href:"javascript:void(0)"},class:"c-btn",on:{click:this.useCoupon}},["用券观看"])]),e("portal",{attrs:{to:"playerPopupContainer"}},[e("CouponLayer",{ref:"coupon",attrs:{"video-name":u,"validity-period":d,"left-coupon-num":s,"use-vod-coupon-url":c}})])])]);else if(6===n)v=e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"".concat(l?"试看结束，":"","由于版权方要求，本片需用券观看")}}),e("div",{class:"c-ticket-tip"},["您的点播券已用完"]),e("div",{class:"c-player-btn"},[e("BuyButton",{attrs:{price:a,"origin-price":o,"service-code":t.serviceCode,aid:t.aid,pid:t.pid,fc:"b10b185d7db52958"}}),e("VipMarketButton",{attrs:{"vod-coupon-count":t.vodCouponCount,"market-tip":t.marketTip,aid:t.aid,fc:"b6c004c57a163f9a",text:"续费VIP会员"}})])]);else if(7===n)v=e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"".concat(l?"试看结束，":"","由于版权方要求，本片需用券观看")}}),e("div",{class:"c-ticket-tip"},["您还有",s,"张券可用于观看本片"]),e("div",{class:"c-player-btn"},[e("BuyButton",{attrs:{price:a,"service-code":t.serviceCode,aid:t.aid,pid:t.pid,fc:"b10b185d7db52958"}}),e("div",{class:"vipPlayer-tip"},[e("a",{attrs:{href:"javascript:void(0)"},class:"c-btn",on:{click:this.useCoupon}},["用券观看"])]),e("portal",{attrs:{to:"playerPopupContainer"}},[e("CouponLayer",{ref:"coupon",attrs:{"video-name":u,"validity-period":d,"left-coupon-num":s,"use-vod-coupon-url":c}})])])]);else if(8===n)v=e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"".concat(l?"试看结束，":"","由于版权方要求，本片需用券观看")}}),e("div",{class:"c-player-btn"},[e("BuyButton",{attrs:{price:a,"service-code":t.serviceCode,aid:t.aid,pid:t.pid,fc:"b10b185d7db52958"}}),e("VipMarketButton",{attrs:{"vod-coupon-count":t.vodCouponCount,"market-tip":t.marketTip,aid:t.aid,fc:"b6c004c57a163f9a",text:"开通VIP会员"}})])]);else if(9===n)p=e("div",{class:"m-player-tip m-sportsPlayer-tip"},[e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"购买观看完整版"}}),[h(t,i)],e("Login",{attrs:{label:"我有体育会员/球票，",text:'请登录<i class="c-glyphicon c-glyphicon-roundArrow">'}})])]);else if(10===n)p=e("div",{class:"m-player-tip m-sportsPlayer-tip"},[e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"购买观看完整版"}}),[h()]])]);else if(11===n)v=e("div",{class:"player-tip-inner"},[e("div",{class:"c-player-tip-info"},[u?"《".concat(u,"》为爱奇艺付费内容"):"本片为爱奇艺付费内容",e("br"),"请购买套餐后观看"]),e("div",{class:"vipPlayer-tip"},[e("a",{attrs:{href:"javascript:void(0)"},class:"c-btn",on:{click:this.buyPackage}},["打包购买"]),e("span",{class:"c-info hie"},["同时购买多个专辑更划算"])]),e("portal",{attrs:{to:"playerPopupContainer"}},[e(Ce,{ref:"eduPackageLayer",attrs:{"video-name":u,"layer-info":t,"video-info":i}})])]);else if(13===n)v=e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"爱奇艺付费影片，观看完整版请开通VIP"}}),e("div",{class:"c-player-btn"},[e("BuyButton",{attrs:{price:a,block:"8051101_db_dandian_block",rseat:"8051101_db_dandian","service-code":t.serviceCode,aid:t.aid,pid:t.pid,fc:"9b43045a005a9061"}}),e("VipMarketButton",{attrs:{block:"8051101_db_buy_block",rseat:"8051101_db_buy","vod-coupon-count":t.vodCouponCount,"market-tip":t.marketTip,aid:t.aid,fc:"9b43045a005a9061",text:"开通VIP会员"}})]),e("Login",{attrs:{label:"已是VIP，",text:"请登录"}})]);else if(14===n){var f;v=e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"爱奇艺付费影片，观看完整版请开通VIP"}}),e("div",{class:"c-player-btn"},[e("BuyButton",{attrs:{price:a,block:"8051101_db_buy_block",rseat:"8051101_db_dandian",fc:"9b43045a005a9061","service-code":t.serviceCode,aid:t.aid,pid:t.pid}}),e("VipMarketButton",{attrs:(f={block:"8051101_db_dandian_block",rseat:"8051101_db_buy","vod-coupon-count":t.vodCouponCount,"market-tip":t.marketTip,aid:t.aid,fc:"9b43045a005a9061",text:"开通VIP会员"},Object(X["a"])(f,"aid",i.aid),Object(X["a"])(f,"tvid",i.tvid),f)})])])}else if(15===n){var y;v=e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"爱奇艺付费影片，观看完整版请开通VIP"}}),e("div",{class:"c-player-btn"},[e("VipMarketButton",{attrs:(y={block:"8051101_vip_buy_block",rseat:"8051101_vip_buy","vod-coupon-count":t.vodCouponCount,"market-tip":t.marketTip,aid:t.aid,fc:"9b43045a005a9061",text:"开通VIP会员"},Object(X["a"])(y,"aid",i.aid),Object(X["a"])(y,"tvid",i.tvid),y)})]),e("Login",{attrs:{label:"已是VIP，",text:"请登录"}})])}else if(16===n){var m;v=e("div",{class:"player-tip-inner"},[e("TipInfo",{attrs:{text:"爱奇艺付费影片，观看完整版请开通VIP"}}),e("div",{class:"c-player-btn"},[e("VipMarketButton",{attrs:(m={block:"8051101_vip_buy_block",rseat:"8051101_vip_buy","vod-coupon-count":t.vodCouponCount,"market-tip":t.marketTip,aid:t.aid,fc:"9b43045a005a9061",text:"开通VIP会员"},Object(X["a"])(m,"aid",i.aid),Object(X["a"])(m,"tvid",i.tvid),m)})])])}else if(18===n||17===n){var g=17===n?e("a",{attrs:{href:"//m.iqiyi.com/user.html"},class:"c-login"},["请登录"]):null,b=e("a",{attrs:{href:t.data&&t.data.purchase&&t.data.purchase[0].url||"javascript:void(0);"},class:"c-btn"},[t.data&&t.data.purchase&&t.data.purchase[0].info||""]);p=e("div",{class:"m-player-tip m-sportsPlayer-tip"},[e("div",{class:"player-tip-inner"},[e("div",{class:"c-player-tip-tlt"},[u]),e("div",{class:"c-player-tip-info"},[t.data&&t.data.contentInfo?t.data.contentInfo.info:""]),e("div",{class:"c-player-btnBox"},[g,b])])])}var k=!!p;return e("div",[k?p:e("div",{class:"m-player-tip"},[e("div",{class:"m-player-tip m-vipPlayer-tip"},[v])])])}},Te=Pe,xe=Object(h["a"])(Te,ve,fe,!1,null,null,null),Ve=xe.exports,$e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"m-player-laqiPop-box"},[i("img",{staticClass:"layer-video-img",attrs:{src:e.poster}}),i("div",{staticClass:"m-player-laqiPop"},[i("div",{staticClass:"player-tip-inner"},[i("div",{staticClass:"player-tip-info"},[e._v("\n        请打开爱奇艺APP，观看完整版视频\n      ")]),i("div",{staticClass:"player-tip-btn"},[i("a",{ref:"copyLink",staticClass:"c-link laqi",attrs:{href:"javascript:void(0)"}},[i("i",{staticClass:"c-glyphicon c-glyphicon-iqy"}),e._v("\n          前往APP观看\n        ")])])])])])},je=[],Ie={name:"QiyiSourceSealRivalLayer",props:{videoInfo:{type:Object,default:function(){return{}}},poster:{type:String,default:""}},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{init:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,Object(U["d"])({block:"804231_toutiao_xianbofuceng"}),e.next=4,this.registerCopy(this.$refs.copyLink,"http://ota.iqiyi.com/f4.jsp?url=h5_fuceng");case 4:t=e.sent,t.on("success",function(){Object(U["c"])({rseat:T["j"].ios?"804231_toutiaourl_ios":"804231_toutiaourl_android"}),i.$emit("sourceLayerFoo",{code:"sealingRivalCopyLink",data:{code:"success"}})}),e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](0),e.t0;case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),registerCopy:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,i){var n,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n="//static.iqiyi.com/js/html5/js/lib/clipboard.min.js",t.setAttribute("data-clipboard-text",i),e.abrupt("return",new P.a(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(i,r){var o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.isNotSupportCopy()){e.next=4;break}r(new Error("notSupport")),e.next=7;break;case 4:return e.next=6,Object(T["h"])(n);case 6:window.Clipboard?(o=new window.Clipboard(t),i(o)):r(new Error("noClipboard"));case 7:case"end":return e.stop()}},e)}));return function(t,i){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}},e)}));function t(t,i){return e.apply(this,arguments)}return t}(),isNotSupportCopy:function(){var e=window.navigator.userAgent,t=/iPhone OS (\d*)_(\d*)/i.exec(e),i=t&&8===t[1];return/BLN-TL10/i.test(e)||/PE-TL20/i.test(e)||i||/VivoBrowser/i.test(e)}}},Oe=Ie,Le=Object(h["a"])(Oe,$e,je,!1,null,null,null),Ae=Le.exports,Ee="//serv.vip.iqiyi.com/pay/queryLayer.action",Re=0,Be=1,Fe=2,qe=3,Ne=4,He=5,De=6,Me=7,Qe=8,Ue=9,ze=10,Ge=11,We=13,Je=14,Xe=15,Ze=16,Ye=17,Ke=18,et=0,tt=1,it=2,nt=3,at=4,rt=5;function ot(e){return st.apply(this,arguments)}function st(){return st=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=t.aid,n=t.pre,e.next=3,ht(i);case 3:return a=e.sent,ke()(a,a.data),a.aid=i,a.pre=n,a.price=a.price?ge()(a.price)/100:"",a.originPrice=a.originPrice?ge()(a.originPrice)/100:"",a.halfPrice=a.halfPrice?ge()(a.halfPrice)/100:"",a.vipPrice=a.vipPrice?ge()(a.vipPrice)/100:a.vipPrice,a.marketTip=a.marketTip?JSON.parse(a.marketTip):a.marketTip,a.validityPeriod=a.validityPeriod?a.validityPeriod.slice(0,-3):"",e.abrupt("return",a);case 14:case"end":return e.stop()}},e)})),st.apply(this,arguments)}function ct(e,t){return dt.apply(this,arguments)}function dt(){return dt=Object(o["a"])(regeneratorRuntime.mark(function e(t,i){var n,a,r,o,s,c,d,u,l,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=Re,a=0,r=6,o=1,s=t.vipContentType,c=ge()(t.sourceType),s!==a){e.next=32;break}if(d=ut(t),d!==et){e.next=12;break}n=Re,e.next=30;break;case 12:return u=t.leftCouponNum,l=oe(),e.next=16,!!oe&&lt(i);case 16:p=e.sent,n=n||d===it&&!l&&Be,n=n||d===it&&l&&p&&Fe,n=n||d===it&&l&&!p&&qe,n=n||d===nt&&!l&&Ne,n=n||d===nt&&l&&p&&u&&He,n=n||d===nt&&l&&p&&!u&&De,n=n||d===nt&&l&&!p&&u&&Me,n=n||d===nt&&l&&!p&&!u&&Qe,n=n||d===at&&Ge,n=n||d===rt&&!l&&We,n=n||d===rt&&l&&Je,n=n||d===tt&&!l&&Xe,n=n||d===tt&&l&&Ze;case 30:e.next=33;break;case 32:1===c?n=oe()?Ke:Ye:[r,o].indexOf(s)>-1&&(n=oe()?ze:Ue);case 33:return e.abrupt("return",n);case 34:case"end":return e.stop()}},e)})),dt.apply(this,arguments)}function ut(e){var t,i=e.isSupportVod,n=e.isSupportVodCoupon,a=e.isSupportMonth,r=e.isSupportPackage;return t=t||!i&&a&&!n&&tt,t=t||i&&!a&&!n&&it,t=t||i&&!a&&n&&nt,t=t||r&&!i&&!a&&!n&&at,t=t||i&&a&&!n&&rt,t||et}function lt(e){return pt.apply(this,arguments)}function pt(){return pt=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.indexOf(ie)>-1||t.indexOf(te)>-1);case 1:case"end":return e.stop()}},e)})),pt.apply(this,arguments)}function ht(e){return Object(ye["d"])(Ee,{params:{aid:e,platform:"97ae2982356f69d8",platformType:"h5",messageid:Object(T["m"])(),version:"7.0",P00001:se(),dataType:"json"},withCredentials:!0}).then(function(e){return e.data||{}})}var vt,ft,yt=0,mt=1,gt=2,bt=3,kt={0:"none",1:"code",2:"vip",3:"rival"},wt={name:"QiyiSourceLayer",components:{QiyiSourceCodeLayer:J,QiyiSourceVipLayer:Ve},props:{vipType:{type:String,default:""},videoName:{type:String,default:""},isShowVipLayer:{type:Boolean,default:!0},poster:{type:String,default:""}},data:function(){return{sourceType:yt,vipStatus:{},videoInfo:{},layerInfo:{},templateType:0,show:!1}},beforeMount:function(){this.init()},methods:{init:function(){this.bindEvent()},bindEvent:function(){var e=this,t=this.$parent;t.$on("load",function(){e.show&&(e.show=!1,t.showVideo())}),t.$on("loaded",function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(i){var n,a,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.videoInfo=i.videoInfo,n=!!e.isSourceVip(e.videoInfo),a={},e.$emit("noSourceLayer",!n&&!e.isSourceCode(e.videoInfo)),e.videoInfo.prv?e.emitSourceType(yt):(o=e.setSourceType(e.videoInfo),e.emitSourceType(o)),!n){t.next=9;break}return t.next=8,e.getVipLayerInfo();case 8:a=t.sent;case 9:e.$emit("sourceVipType",Object(r["a"])({},a,{isVip:n}));case 10:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()),t.$on("recharge",function(){if(e.videoInfo.prv){var t=e.setSourceType(e.videoInfo);e.emitSourceType(t)}}),t.$on("showSourceLayer",function(){var t=e.setSourceType(e.videoInfo);e.emitSourceType(t)})},getVipLayerInfo:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=this.videoInfo,e.next=3,ot({aid:t.albumId||t.aid||t.tvid});case 3:return this.layerInfo=i=e.sent,e.next=6,ct(i,this.vipType);case 6:return this.templateType=n=e.sent,e.next=9,ut(i);case 9:return a=e.sent,e.abrupt("return",{templateType:n,layerInfo:i,layerType:a});case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),isPano:function(e){var t=e&&e.data?e.data:e;if(t&&t.p&&t.p.pano){var i=t.p.pano.type;return 1!==i}return!1},setSourceType:function(e){return this.isSourceVip(e)?this.sourceType=gt:this.isSourceCode(e)?this.isSealRivalCode(e)?this.sourceType=bt:this.sourceType=mt:this.sourceType=yt,this.sourceType},emitSourceType:function(e){var t=this.$parent;this.show=e!==yt,this.$emit("sourceTypeChange",{type:e,name:kt[e]}),this.show&&(t.pause(),t.hideVideo())},isSourceCode:function(e){var t=e.data,i=e.src||"",n=e.code,a=t.st;return!("A00000"===n&&[101,200].includes(a)&&i)||this.isPano(t)||"A00004"===n},isSealRivalCode:function(e){return"A00030"===e.code},isSourceVip:function(e){var t=e.data,i=t.boss_ts;return i.code&&"A00000"!==i.code||e.prvType},sourceLayerFooHandle:function(e){this.$emit("sourceLayerFoo",e)}},render:function(){var e=arguments[0];if(this.sourceType!==yt&&this.show)return this.sourceType===mt?e(J,{attrs:{"video-info":this.videoInfo}}):this.sourceType===gt&&this.isShowVipLayer?e(Ve,{attrs:{"video-info":this.videoInfo,"vip-type":this.vipType,"video-name":this.videoName,"layer-info":this.layerInfo,"template-type":this.templateType}}):this.sourceType===bt?e(Ae,{attrs:{"video-info":this.videoInfo,poster:this.poster},on:Object(r["a"])({},{sourceLayerFoo:this.sourceLayerFooHandle})}):null}},St=wt,_t=Object(h["a"])(St,vt,ft,!1,null,null,null),Ct=_t.exports,Pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:"190910_videoplay",expression:"'190910_videoplay'"},{name:"pingback",rawName:"v-pingback",value:"190910_videoplay",expression:"'190910_videoplay'"},{name:"show",rawName:"v-show",value:e.playShow,expression:"playShow"}],attrs:{onclick:"if(!this.getAttribute('srcset')) {\n    this.setAttribute('playBtnClickedBeforeInit', 'true');\n    if (!document.getElementById('video').src) {\n      document.getElementById('video').load();\n    }\n  }"},on:{click:function(t){return e.$emit("playClick")}}},[e.prvShow?i("div",{key:"prv",staticClass:"c-vipPlayer-btn"},[i("i",{staticClass:"c-glyphicon c-glyphicon-tryPlay"}),e._v("试看6分钟\n  ")]):i("div",{key:"common",staticClass:"c-videoplay"},[i("i",{staticClass:"c-player-icon c-player-big"})])])},Tt=[],xt={name:"QiyiPlayButton",data:function(){return{playShow:!0,prvShow:!1}},beforeMount:function(){var e=this;this.$parent.$on("created",function(t){var i=t.getVideo();i.on("playing",function(){e.playShow=!1}),i.on("pause",function(){e.playShow=!0}),i.on("src",function(){e.$el.getAttribute("srcset")||!e.$el.getAttribute("playBtnClickedBeforeInit")&&!document.querySelector("[playBtnClickedBeforeInit=true]")||e.$parent.play(),e.$el.setAttribute("srcset",!0)})}),this.$parent.$on("loaded",function(t){var i=t.videoInfo;i.prv&&(e.prvShow=!0)}),this.$parent.$on("clear",function(){e.playShow=!1,e.prvShow=!1}),this.$parent.$on("videoChange",function(){e.playShow=!1,e.prvShow=!1})}},Vt=xt,$t=Object(h["a"])(Vt,Pt,Tt,!1,null,null,null),jt=$t.exports,It=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showAutoHide,expression:"showAutoHide"}],staticClass:"m-video-dashboard"},[i("div",{staticClass:"video-console"},[i("div",{staticClass:"video-switch",class:{selected:!e.paused},on:{click:function(t){return e.$emit("playClick")}}},[i("i",{staticClass:"c-glyphicon c-glyphicon-switchPlay"})]),i("span",{staticClass:"timeDisplay-current"},[e._v(e._s(e.currentTime))]),i("div",{ref:"progress",staticClass:"video-progress",on:{touchstart:e.touchstart,touchmove:function(t){return t.preventDefault(),e.touchmove(t)},touchend:e.touchend}},[i("div",{staticClass:"progress-track"},[i("div",{staticClass:"progress-load",style:{width:e.progressLoad}}),i("div",{staticClass:"progress-play",style:{width:e.progressPlay}}),i("div",{staticClass:"progress-seek",style:{left:e.progressSeek}})])]),i("span",{staticClass:"timeDisplay-duration"},[e._v(e._s(e.duration))])]),i("span",{directives:[{name:"pingback",rawName:"v-pingback",value:"h5_player_danmu",expression:"'h5_player_danmu'"},{name:"show-pingback",rawName:"v-show-pingback",value:"h5_block_player_danmu",expression:"'h5_block_player_danmu'"}],staticClass:"danmu",on:{click:function(t){e.callApp("danmu").catch(function(){})}}},[i("i",{staticClass:"c-icon-danmu"})]),i("div",{staticClass:"fullScreen",class:{selected:e.isFullscreen},on:{click:e.fullscreen}},[i("i",{staticClass:"c-glyphicon c-glyphicon-fullscreenNew"})])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.regulationShow,expression:"regulationShow"}],staticClass:"video-regulation",class:{backOff:e.direction<0},staticStyle:{display:"none"}},[e._m(0),i("div",{staticClass:"regulation-progress"},[i("i",{staticClass:"progress-time",style:{width:e.progressRegulation}})]),i("div",{staticClass:"video-time"},[i("span",{staticClass:"timeCurrent"},[e._v(e._s(e.currentTime))]),i("span",{staticClass:"line"},[e._v("/")]),i("span",{staticClass:"timeDuration"},[e._v(e._s(e.duration))])])])])},Ot=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"regulation-status"},[i("i",{staticClass:"c-glyphicon c-glyphicon-forward"})])}],Lt={data:function(){return{showAutoHide:!1}},beforeMount:function(){var e=this;this.$parent.$on("created",function(){e.initAutoHide()})},methods:{initAutoHide:function(){var e=this,t=this.$parent;t.on("playing",function(){e.autoHide()}),t.on("pause",function(){e.showDashBoard()}),t.on("click",function(){t.paused()||(e.showAutoHide=!e.showAutoHide,e.showAutoHide&&e.autoHide())})},showDashBoard:function(){this.stopHideTimer(),this.showAutoHide=!0},autoHide:function(){var e=this;this.stopHideTimer(),this.timer=setTimeout(function(){e.showAutoHide=!1},3e3)},stopHideTimer:function(){clearTimeout(this.timer)}}},At={beforeMount:function(){var e=this;this.$parent.$on("loaded",function(t){e.videoInfo=t.videoInfo})},methods:{callApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=V["h"][e]||{},i=t.subtype||this.subType||149,n=this.cid||this.videoInfo.cid||(this.videoInfo.data?this.videoInfo.data.cid:"")||"",a=this.tvid||this.videoInfo.tvid||"";return Object(V["y"])({down:0,ftype:27,progress:this.$parent.video.currentTime(),cid:n,tvid:a,subtype:i}).catch(function(){var e=t.downloadUrl||Object(V["m"])({downAppPos:"play_button_open"});return Object(V["k"])(e),P.a.reject(new Error("callapp fail"))})}}},Et={name:"QiyiDashboard",mixins:[Lt,At],props:{isVideo:{type:Boolean,default:!1}},data:function(){return{isFullscreen:!1,regulationShow:!1,paused:!0,duration:"",currentTime:"",progressPlay:"",progressSeek:"",progressLoad:"",progressRegulation:"",direction:0}},computed:{extraOptions:function(){return this.videoInfo.tvid?{tvid:this.videoInfo.tvid,aid:this.videoInfo.aid,cid:this.videoInfo.cid,vid:this.videoInfo.vid}:{}}},watch:{showAutoHide:function(e){this.$emit("dashboardShowChange",e)}},beforeMount:function(){var e=this;this.$parent.$on("created",function(){e.init()})},methods:{init:function(){var e=this.$parent;this.paused=e.paused(),this.bindEvent()},bindEvent:function(){var e=this,t=this.$parent;t.$on("load",function(){e.showAutoHide=!1}),t.$on("playStart",function(e){var i=e.status;"VIDEO"===i&&t.muted(!1)}),t.on("playing",function(){e.paused=t.paused(),e.duration=Object(T["c"])(t.duration())}),t.on("pause",function(){e.paused=t.paused()}),t.on("durationchange",function(){e.duration=Object(T["c"])(t.duration())}),t.on("timeupdate",function(){e.updateProgressAndTime()}),t.on("seeking",function(){e.updateProgressAndTime()}),t.on("progress",function(){var t=e.getBufferPercent();e.updateProgressLoad(t)}),t.on("touchstart",function(i){if(e.isVideo){e.isDragingVideo=!0,e.lockRegulation=!1;var n=i.touches[0];e.videoStartSecond=t.currentTime(),e.videoStartPos=n.pageX,e.videoStartYPos=n.pageY}}),t.on("touchmove",function(t){if(e.isVideo&&!e.lockRegulation){var i=t.touches[0],n=Math.abs(i.pageY-e.videoStartYPos),a=Math.abs(i.pageX-e.videoStartPos);(a||n)&&(!e.regulationShow&&n>=1&&a<5?e.lockRegulation=!0:e.isDragingVideo&&(e.regulationShow=!0,t.preventDefault(),t.stopPropagation(),e.isDraging=!0,e.videoSeekPos=i.pageX,e.seekVideo(e.videoSeekPos)))}}),t.on("touchend",function(){if(e.isVideo&&!e.lockRegulation&&(e.isDragingVideo=!1,e.regulationShow)){e.isDraging=!1,e.regulationShow=!1,e.direction=0;var t=e.seekVideo(e.videoSeekPos);e.$emit("seek",t)}}),t.on("fullscreenchange",function(t){e.isFullscreen=t.isFullscreen})},getBufferPercent:function(){var e=this.$parent,t=e.duration();return t?e.video.buffered()/t:0},updateProgress:function(e){var t="".concat(100*e,"%");this.progressPlay=t,this.progressSeek=t,this.progressRegulation=t},updateProgressLoad:function(e){var t="".concat(100*e,"%");this.progressLoad=t},touchstart:function(e){this.isDraging=!0,this.seekPos=e.touches[0].pageX,this.stopHideTimer()},touchmove:function(e){this.isDraging=!0,this.seekPos=e.touches[0].pageX,this.seekDashboard(this.seekPos)},touchend:function(){var e=this.seekDashboard(this.seekPos);this.isDraging=!1,this.$emit("seek",e)},seekDashboard:function(e){var t=this.$refs.progress,i=t.getBoundingClientRect().left,n=t.offsetWidth,a=e-i,r=Math.min(Math.max(a,0),n),o=r/n;return this.updateProgress(o),this.updateCurrentTimeProgress(o)},seekVideo:function(e){var t=this.videoStartPos,i=e-t,n=this.$parent.duration(),a=n/2e3,r=(this.videoStartSecond+i*a)/n;return r=Math.min(Math.max(r,0),1),this.direction=i>0?1:-1,this.updateProgress(r),this.updateCurrentTimeProgress(r)},updateCurrentTimeProgress:function(e){var t=this.$parent.duration(),i=e*t;return this.updateCurrentTime(i),i},updateCurrentTime:function(e){e>=0&&(this.currentTime=Object(T["c"])(e))},fullscreen:function(e){var t=this.$parent.src();!t||t.indexOf(".html")>=0||this.$emit("fullscreen",e)},updateProgressAndTime:function(){if(!this.isDraging){var e=this.$parent.currentTime(),t=this.$parent.duration(),i=e/t;this.updateCurrentTime(e),this.updateProgress(i)}}}},Rt=Et,Bt=Object(h["a"])(Rt,It,Ot,!1,null,null,null),Ft=Bt.exports,qt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"handle-ad"},[i("span",{directives:[{name:"show",rawName:"v-show",value:e.showAutoHide,expression:"showAutoHide"}],staticClass:"player-voice",class:{selected:e.muted},on:{click:function(t){return e.$emit("voiceClick")}}},[i("i",{staticClass:"c-player-icon c-player-voice"})]),i("span",{directives:[{name:"show",rawName:"v-show",value:e.fullScreenShow,expression:"fullScreenShow"}],staticClass:"player-fullscreen",class:{selected:e.isFullScreen},on:{click:e.fullscreen}},[i("i",{staticClass:"c-player-icon c-player-fullscreen"})])])])},Nt=[],Ht={name:"QiyiAdDashboard",mixins:[Lt],data:function(){return{isFullScreen:!1,fullScreenShow:!1,muted:!1}},beforeMount:function(){var e=this;this.$parent.$on("created",function(){e.bindEvent()}),this.$parent.$on("load",function(){e.fullScreenShow=!1,e.showAutoHide=!1,e.muted=!1})},methods:{bindEvent:function(){var e=this,t=this.$parent;t.on("playing",function(){e.fullScreenShow=!0}),t.on("muted",function(t){e.muted=t}),t.on("fullscreenchange",function(t){e.isFullScreen=t.isFullscreen})},fullscreen:function(e){this.$emit("fullscreen",e),this.isFullScreen=this.$parent.video.isFullscreen()}}},Dt=Ht,Mt=Object(h["a"])(Dt,qt,Nt,!1,null,null,null),Qt=Mt.exports,Ut=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.loadingTipShow,expression:"loadingTipShow"}],staticClass:"m-player-tip"},[i("div",{staticClass:"player-tip-inner"},[i("div",{staticClass:"c-player-tip-info"},[i("i",{staticClass:"player-loading-logo",style:"background-image:url("+e.loadingImage+")"}),i("div",{staticClass:"player-loading-info"},[i("i",{staticClass:"update-icon"}),e._v("正在全力加载\n          "),e.loadingCallapp?i("a",{directives:[{name:"pingback",rawName:"v-pingback",value:"h5_player_loading",expression:"'h5_player_loading'"}],staticClass:"c-link",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.callApp("loading").catch(function(){})}}},[e._v("\n            ,去爱奇艺APP流畅看\n          ")]):e._e()])])])]),e._m(0),i("div",{directives:[{name:"show",rawName:"v-show",value:e.loadingShow&&!e.quailtyChange,expression:"loadingShow && !quailtyChange"}],staticClass:"c-player-loading"},[i("i",{staticClass:"loading-icon"}),e._v(" 正在全力加载\n    "),e.loadingCallapp?i("a",{directives:[{name:"pingback",rawName:"v-pingback",value:"h5_player_loading",expression:"'h5_player_loading'"}],staticClass:"c-link",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.callApp("loading").catch(function(){})}}},[e._v("\n      ,去爱奇艺APP流畅看\n    ")]):e._e()]),e.quailtyChange?i("div",{staticClass:"c-player-loading"},[i("span",[e._v("\n      已切换到\n      "),i("a",{staticClass:"c-link",attrs:{href:"javascript:void(0);"}},[e._v("\n        "+e._s(e.quailtyChange)+"\n      ")])])]):e._e()])},zt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"c-player-loading dn"},[i("i",{staticClass:"loading-icon"}),e._v(" 正在全力加载，\n    "),i("a",{staticClass:"c-link",attrs:{href:"javascript:void(0)"}},[e._v("刷新")]),e._v("重试\n  ")])}],Gt={name:"QiyiLoading",mixins:[At],props:{loadingCallapp:{type:Boolean,default:!0},loadingImage:{type:String,default:"//m.iqiyipic.com/common/lego/20181127/84cbd21b7e8844689f99fe48bb0de6d6.png"}},data:function(){return{loadingShow:!1,loadingTipShow:!1,quailtyChange:"",isFirstClick:!0,isVideoDataReady:!1}},watch:{loadingTipShow:function(e){e||(this.isFirstClick=!1)}},beforeMount:function(){this.init()},methods:{init:function(){var e=this;this.beforeVideoCreated(),this.$parent.$on("created",function(){var i=e.$parent.video;i.once("play",t),e.bindEvent(i)}),this.$parent.$on("load",function(){var n=e.$parent.video;n.off("playing",i),n.off("play",t),n.once("playing",i),n.once("play",t)}),this.$parent.$on("src",function(){e.isVideoDataReady=!0});var t=function(){e.loadingTipShow=!0},i=function(){e.$logger.log("hidetip");var i=e.$parent.video;i.off("play",t),e.loadingTipShow=!1,e.isFirstClick=!1};this.$parent.$on("sourceTypeChange",function(t){var i=t.type;0!==i&&(e.loadingTipShow=!1)}),this.$parent.$on("layerShow",function(t){var i=t.type;i&&(e.loadingTipShow=!1)}),this.$parent.$on("quailtyChange",function(t){e.quailtyChange=t})},beforeVideoCreated:function(){var e=this;document.querySelector("[playBtnClickedBeforeInit=true]")&&(this.loadingTipShow=!0),this.$parent.$on("playBtnClick",function(){e.isFirstClick&&!e.isVideoDataReady&&(e.loadingTipShow=!0),e.isFirstClick=!1}),this.$parent.$on("videoChange",function(){e.$logger.log("change"),e.isVideoDataReady||(e.loadingTipShow=!0)})},bindEvent:function(e){var t=this;e.on("playing",function(){t.loadingShow=!1}),e.on("timeupdate",function(){t.loadingShow&&e.buffered()>2&&(t.loadingShow=!1)}),e.on("waiting",function(){t.loadingShow=!0,Object(U["d"])({block:"h5_block_player_loading"})})}}},Wt=Gt,Jt=Object(h["a"])(Wt,Ut,zt,!1,null,null,null),Xt=Jt.exports,Zt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.startShow?i("div",{staticClass:"m-play-appGuide",style:"background-image: url("+e.poster+")"},[i("div",{staticClass:"handle"},[i("a",{staticClass:"c-link",attrs:{href:"javascript:void(0)"},on:{click:e.play}},[i("i",{staticClass:"c-glyphicon c-glyphicon-albumPlay"}),e._v("试看5分钟\n      ")]),i("a",{staticClass:"c-link",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.redirectOrCallApp({toCopy:!0})}}},[e._v("\n        进入爱奇艺观看完整版\n      ")])])]):e._e(),e.endShow?i("div",{staticClass:"m-play-appGuide guide-bgcol",style:"background-image: url("+e.poster+")"},[i("a",{staticClass:"c-link c-link-iqy",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.redirectOrCallApp({toCopy:!0})}}},[i("i",{staticClass:"c-glyphicon c-glyphicon-iqy"}),e._v("进入爱奇艺，观看完整版\n    ")]),i("a",{staticClass:"c-link c-link-again",attrs:{href:"javascript:void(0)"},on:{click:e.replayPlay}},[i("i",{staticClass:"c-glyphicon c-glyphicon-album-Bplay"}),e._v("重新播放\n    ")])]):e._e(),e.continueShow?i("div",{staticClass:"m-play-appGuide guide-bgcol",style:"background-image: url("+e.poster+")"},[e._t("callApp",[i("a",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:"806081_floatlayer",expression:"'806081_floatlayer'"},{name:"pingback",rawName:"v-pingback",value:"806081_daoliu",expression:"'806081_daoliu'"}],staticClass:"c-link c-link-iqy",attrs:{href:"javascript:void(0)"},on:{click:e.redirectOrCallApp}},[i("i",{staticClass:"c-glyphicon c-glyphicon-iqy"}),e._v("打开爱奇艺，提升3倍流畅度!\n      ")])]),i("a",{directives:[{name:"pingback",rawName:"v-pingback",value:"806081_continue",expression:"'806081_continue'"}],staticClass:"c-link c-link-again",attrs:{href:"javascript:void(0)"},on:{click:e.continuePlay}},[i("i",{staticClass:"c-glyphicon c-glyphicon-album-Bplay"}),e._v("继续播\n    ")])],2):e._e()])},Yt=[],Kt=(i("386d"),i("b383")),ei=i.n(Kt),ti="QC015",ii="QC007";function ni(){return T["a"].iPhone?12:13}function ai(){var e=ui();return li(ti,e.msrc)}function ri(e){var t=ui();return li(ti,t.vfm,e)}function oi(){var e=ui();return e.cfrm}function si(){var e=document.referrer||"DIRECT";return ci(ii,e)}function ci(e,t){var i=Y.a.get(e);return i||(i="function"===typeof t?t():t,Y.a.set(e,i,di)),i}var di={path:"/",domain:"iqiyi.com"};function ui(){return ei.a.parse(location.search.replace("?",""))}function li(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.expires,a=t;if(a){var o=di;n&&(o=Object(r["a"])({expires:n},di)),Y.a.set(e,a,o)}else a=Y.a.get(e);return a}var pi=i("4f30"),hi=Object(X["a"])({},pi["CHANNEL_SHAOER"],"H55fza_589"),vi={name:"QiyiLimit",mixins:[At],props:{subtype:{type:String,default:"H5qzql_523"},templateType:{type:String,default:""},second:{type:Number,default:300},poster:{type:String,default:""}},data:function(){return{startShow:!1,endShow:!1,continueShow:!1,purchaseType:0,videoInfo:{}}},computed:{show:function(){return this.startShow||this.endShow||this.continueShow},subType:function(){return hi[this.videoInfo.cid||(this.videoInfo.data?this.videoInfo.data.cid:"")]||this.subtype}},watch:{show:function(e){this.$emit("show",e)}},beforeMount:function(){this.init()},methods:{init:function(){var e=this;this.$parent.$on("created",function(){e.video=e.$parent.video,e.video.once("play",function(){e.isLimit=e.getLimitStatus(),e.isLimit&&(e.stop(),e.start())})}),this.$parent.$on("load",function(t){e.purchaseType=t.purchaseType}),this.$parent.$on("loaded",function(t){var i=t.videoInfo;e.tvid=i.tvid,e.duration=i.duration,e.isLimit=e.getLimitStatus(),e.isLimit&&(e.startCondition()&&(e.video.pause(),e.$emit("stopPlay"),e.startShow=!0),e.endShow=!1,e.continueShow=!1)})},play:function(){this.hide(),this.$emit("play")},replayPlay:function(){this.hide(),this.$emit("replayPlay")},continuePlay:function(){this.hide(),this.continue=!0,this.$emit("play")},hide:function(){T["j"].android&&this.video.show(),this.startShow=!1,this.endShow=!1,this.continueShow=!1},redirectOrCallApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.callApp().catch(function(){e.toCopy&&(location.href="/m5/app/guide.html?redirect_url=".concat(encodeURIComponent(location.href)))})},getLimitStatus:function(){return!this.whiteCondtion()},whiteCondtion:function(){return-1===["MOVIE","ALBUM","SOURCE"].indexOf(this.templateType)||["2008_aldbd"].indexOf(ri()||oi())>=0||/$http(s)?:\/\/([^\s]+).baidu.com/.test(document.referrer)||T["a"].baidubox||this.duration<this.second||0!==this.purchaseType||!T["a"].txTV&&T["a"].weixin},startCondition:function(){return T["a"].txTV||T["a"].youku||T["a"].xigua||T["a"].toutiao},endCondtion:function(){return T["a"].txTV||T["a"].youku||T["a"].xigua||T["a"].toutiao},continueCondition:function(){return!T["a"].txTV&&!T["a"].youku&&!T["a"].xigua&&!T["a"].toutiao},start:function(){this.timer=fi(1e3)(this.limit.bind(this))},stop:function(){this.timer&&this.timer()},limit:function(){var e=this.$parent.currentTime(),t=this.second,i=this.duration;i<=t||this.continue||(e>t+3?this.continueCondition()||(this.video.seek(t),this.hide()):e>t&&this.showLayerAndPause())},showLayerAndPause:function(){T["j"].android&&this.video.hide(),this.video.paused()||(this.video.exitFullscreen(),this.startShow=!1,this.endCondtion()?this.endShow=!0:this.continueCondition()&&(this.continueShow=!0,this.continue=!0),this.video.pause())}}};function fi(e){return function t(i){return clearTimeout(fi.time),fi.time=setTimeout(function(){i(),t(i)},e),function(){clearTimeout(fi.time)}}}var yi=vi,mi=Object(h["a"])(yi,Zt,Yt,!1,null,null,null),gi=mi.exports,bi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},ki=[],wi={name:"QiyiVV",props:{vvOptions:{type:Object,default:function(){return{}}},coustomVvOptions:{type:Object,default:function(){return{}}},isVideo:{type:Boolean,default:!0},playerType:{type:String,default:""},rate:{type:Number,default:void 0}},data:function(){return{refer:"",href:"",useHref:!1,lastPlayerSeconds:0,vvParams:null}},computed:{_vvOptions:function(){return this.vvOptions},_isVideo:function(){return this.isVideo}},watch:{_vvOptions:function(e,t){e.tvid!==t.tvid&&(this.realVideoPlayed=!1,this.isPrv=e.prv?"1":"0",this.lastPlayerSeconds=0,this.setParams())},_isVideo:function(e){e&&this.checkRealVideoVV()}},beforeMount:function(){var e=this;this.realVideoPlayed=!1,this.lastPlayerSeconds=0,this.$parent.$on("created",function(t){e.qiyiVideo=t})},methods:{setParams:function(){var e=this,t=this.formatParams(),i=Object(U["a"])(),n=ui();this.vvParams=Object(r["a"])({},t,this.coustomVvOptions,{tmplt:i.tmplt||"",ce:i.weid||"",sprov:i.sprov,lrfr:si(),vfm:ai(),openid:n.appKey,p2:n.version?"1015":"1011",abtest:"h5player_new",br:Object(T["d"])(),os:Object(T["e"])()}),this.qiyiVideo.setPlayPingbackInfo(this.vvParams),this.$parent.on("pause",function(){e.isVideo&&e.sendPauseVV()})},sendPauseVV:function(){this.isPrevent({pt:this.$parent.currentTime()})||(this.qiyiVideo.sendPauseVV(),this.$emit("sendVV",this.vvParams))},sendEndVV:function(e){this.lastPlayerSeconds=0,this.isPrevent({pt:this.$parent.currentTime()})||(e?this.qiyiVideo.setPreviewEnd():this.qiyiVideo.sendEndVV(),this.$emit("sendVV",this.vvParams))},isPrevent:function(e){return Math.floor(e.pt)===this.lastPlayerSeconds||(this.lastPlayerSeconds=Math.floor(e.pt),!1)},bindEvent:function(){var e=this,t=this.$parent;t.on("playing",function(){e.checkRealVideoVV()})},checkRealVideoVV:function(){!this.realVideoPlayed&&this.isVideo&&(this.realVideoPlayed=!0)},formatParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{duby:e.duby||this._vvOptions.duby,plyrtp:e.plyrtp||this.playerType,rfr:this.getRefer(),ft:this.qiyiVideo.getType(),tvid:this._vvOptions.tvid,vid:this._vvOptions.vid,c1:this._vvOptions.c1,ps3:this._vvOptions.ps3||"",ps4:this._vvOptions.ps4||"",s3:this._vvOptions.s3||"",s4:this._vvOptions.s4||"",vfrmblk:this.$route.query.vfrmblk||this._vvOptions.vfrmblk,vfrmrst:this._vvOptions.vfrmrst,fatherid:this._vvOptions.fatherid||"",ra:this.rate||"",s1:1,pf:"2",p:"20",p1:"201",p1new:"2_20_201",fstply:this._vvOptions.fstply}},getRefer:function(){return this.refer=this.refer||document.referrer,this.href=this.href||location.href,this.useHref||this.href===location.href||(this.refer=this.href,this.useHref=!0),this.refer}}},Si=wi,_i=Object(h["a"])(Si,bi,ki,!1,null,null,null),Ci=_i.exports,Pi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.vipShow&&!e.adPlaying?i("div",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:e.pingback,expression:"pingback"},{name:"pingback",rawName:"v-pingback",value:e.pingback,expression:"pingback"}],staticClass:"c-openVip"},[e.labelShow?i("span",[e._v("观看完整版，请")]):e._e(),i("a",{staticClass:"c-link",attrs:{href:"javascript:void(0);"},on:{click:e.toVip}},[i("span",[e._v("\n      "+e._s(e.text)+"\n    ")]),e.vipMarket.text1?i("span",{staticClass:"c-marketing"},[e._v("\n      "+e._s(e.vipMarket.text1)+"\n    ")]):e._e()])]):e._e()},Ti=[],xi={name:"QiyiBottomBuyLayer",data:function(){return{vipShow:!1,labelShow:!0,adPlaying:!1,pingback:"",text:"开通会员",vipMarket:{},tvid:0}},beforeMount:function(){var e=this,t=this.$parent;t.$on("load",function(t){e.labelShow=!0,e.vipShow=!1,e.tvid=t.tvid}),t.$on("loaded",function(i){var n=i.videoInfo;n.prv&&(t.off("playing",e.hideLabel),t.once("playing",e.hideLabel),e.shouldShowLayer=!0)}),t.$on("sourceVipType",function(t){var i=t.layerType,n=t.isVip;n&&e.shouldShowLayer&&e.showVipLayer(i)}),t.$on("playStart",function(t){var i=t.status;e.adPlaying="AD"===i})},methods:{showVipLayer:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return[et,tt,rt].indexOf(t)>-1?(this.text="开通会员",this.pingback="711142_video_vip1"):it===t?(this.text="购买本片",this.pingback="711142_video_viponce"):nt===t&&(this.text="用券观看",this.pingback="711142_video_vipquan"),e.next=3,this.vipMarketCheck();case 3:this.vipShow=!0;case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),vipMarketCheck:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="b5a0d92aa6966a99",e.next=3,ue(t).catch(function(){});case 3:this.vipMarket=e.sent,this.vipMarket=this.vipMarket||{};case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),toVip:function(){this.vipMarket.redirectUrl1?window.location.href="".concat(this.vipMarket.redirectUrl1,"&aid=").concat(this.tvid):this.$parent.showSourceLayer()},hideLabel:function(){this.labelShow=!1}}},Vi=xi,$i=Object(h["a"])(Vi,Pi,Ti,!1,null,null,null),ji=$i.exports,Ii=i("5bce"),Oi="play-record",Li="https://l-rcd.iqiyi.com/apis/qiyirc/getvplay",Ai="https://l-rcd.iqiyi.com/apis/qiyirc/setrc",Ei="https://nl-rcd.iqiyi.com/apis/urc/setrc",Ri=null;function Bi(e){return Fi.apply(this,arguments)}function Fi(){return Fi=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,qi(t).catch(function(){});case 2:return i=e.sent,i&&i.data&&"A00000"===i.code&&(n=i.data.videoPlayTime||0),e.abrupt("return",n||0);case 5:case"end":return e.stop()}},e)})),Fi.apply(this,arguments)}function qi(e){return Ni.apply(this,arguments)}function Ni(){return Ni=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(ye["d"])(Li,{params:{tvId:t,agent_type:ni()}});case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}},e)})),Ni.apply(this,arguments)}function Hi(){return Ri||(Ri=new Ii["b"]({name:Oi,maxNum:50}))}function Di(e){if(!e)return 0;var t=Gi(e);return t?Hi().get(t):0}function Mi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.tvid&&!isNaN(e.time)){var t=Gi(e.tvid);t&&(e.time?Hi().set(t,e.time):Hi().delete(t))}}function Qi(e){return oe()?Ui(e):zi(e)}function Ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(ye["d"])(Ai,{params:{tvId:e.tvid,videoPlayTime:e.time,terminalId:"31",agent_type:ni()}})}function zi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(ye["d"])(Ei,{params:{tvId:e.tvid,videoPlayTime:e.time,terminalId:"31",ckuid:ce(),agent_type:ni()}})}function Gi(e){return"".concat(ce(),"-").concat(e)}var Wi,Ji,Xi={name:"QiyiRecord",props:{skipHeadAndEnd:{type:Boolean,default:!1},enableGetRecord:{type:Boolean,default:!0}},data:function(){return{progress:0,tvid:"",noRecord:!1,beginTime:0,endTime:1/0,isEnd:!1}},beforeMount:function(){var e=this,t=this.$parent;t.$on("load",function(i){e.isEnd=!1,t.off("pause",e.pauseHandle),t.off("ended",e.endedHandle),e.stopRecord(),e.progress=i.progress,e.tvid=i.tvid,e.noRecord=i.noRecord}),t.$on("playStart",function(i){var n=i.status;if("VIDEO"===n){if(t.on("pause",e.pauseHandle),t.on("ended",e.endedHandle),!e.enableGetRecord)return;e.useRecord().then(function(){e.startRecord()})}}),this.skipHeadAndEnd&&(t.$on("loaded",function(i){var n=i.videoInfo,a=t.qiyiVideo;n&&n.data&&n.data.p&&(e.beginTime=a.getSkipHeaderTime(),e.endTime=a.getSkipTailTime())}),t.$on("created",function(i){t.on("timeupdate",function(){var i=t.currentTime();e.endTime>0&&i>=e.endTime&&!e.isEnd&&(e.isEnd=!0,e.$emit("ended","VIDEO"))})}))},methods:{useRecord:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.$parent,!this.noRecord||!t.isVideo){e.next=3;break}return e.abrupt("return",this.$emit("videoRecord",{time:0}));case 3:if(i=!0,!this.progress){e.next=9;break}n=this.progress,i=!1,e.next=14;break;case 9:if(n=Di(this.tvid),!oe()){e.next=14;break}return e.next=13,Bi(this.tvid);case 13:n=e.sent;case 14:a=!!this.skipHeadAndEnd&&this.checkSkipHead({time:n,isFromRecord:i}),n>0&&!a&&this.$parent.seek(n);case 16:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),checkSkipHead:function(e){var t=e.time,i=e.isFromRecord;return!(!this.beginTime||this.beginTime<0)&&(!(t&&!(t>0&&t<this.beginTime&&i))&&(this.$parent.seek(this.beginTime),!0))},startRecord:function(){this.startRemoteRecord(),oe()||this.startLocalRecord()},startRemoteRecord:function(){var e=this;this.remoteRecordTimer=setInterval(function(){e.addRemoteRecord()},12e4)},startLocalRecord:function(){var e=this;this.localRecordTimer=setInterval(function(){e.addLocalRecord()},2e3)},stopRecord:function(){clearInterval(this.remoteRecordTimer),clearInterval(this.localRecordTimer)},addRecord:function(e){this.addLocalRecord(e),this.addRemoteRecord(e)},addLocalRecord:function(e){Mi({tvid:this.tvid,time:this.getCurrentTime(e)})},addRemoteRecord:function(e){Qi({tvid:this.tvid,time:this.getCurrentTime(e)})},pauseHandle:function(){!this.isEnd&&!this.$parent.ended()&&this.getCurrentTime()&&this.addRecord()},endedHandle:function(){this.isEnd=!0,this.addRecord(0)},getCurrentTime:function(e){return void 0!==e?e:ge()(this.$parent.currentTime(),10)}},render:function(){return null}},Zi=Xi,Yi=Object(h["a"])(Zi,Wi,Ji,!1,null,null,null),Ki=Yi.exports,en={methods:{off:function(e,t){this.video&&this.video.off(e,t)},on:function(e,t){this.video&&this.video.on(e,t)},once:function(e,t){this.video&&this.video.once(e,t)},showVideo:function(){this.video.show()},hideVideo:function(){this.video.hide()},buffered:function(){return this.video.buffered()},paused:function(){return this.video&&this.video.paused()},pause:function(e){this.video&&this.video.pause(e)},muted:function(e){return this.video.muted(e)},fullscreen:function(){this.video.requestFullscreen()},requestFullscreen:function(){this.video.requestFullscreen()},exitFullscreen:function(){this.video.exitFullscreen()},currentTime:function(){return this.video?this.video.currentTime():0},src:function(e){return this.video&&this.video.src(e)},lockSeek:function(){this.video.lockSeek()},unLockSeek:function(){this.video.unLockSeek()},reset:function(){return this.video.reset()},destroy:function(){return this.video.destroy()},ended:function(){return this.video.ended()}}};i("f3e2");function tn(){var e={};return"undefined"!==typeof document.hidden?(e.hidden="hidden",e.event="visibilitychange",e.state="visibilityState"):"undefined"!==typeof document.webkitHidden?(e.hidden="webkitHidden",e.event="webkitvisibilitychange",e.state="webkitVisibilityState"):"undefined"!==typeof document.mozHidden?(e.hidden="mozHidden",e.event="mozvisibilitychange",e.state="mozVisibilityState"):"undefined"!==typeof document.msHidden&&(e.hidden="msHidden",e.event="msvisibilitychange",e.state="msVisibilityState"),e}var nn=[];function an(e){nn.push(e)}function rn(e,t){nn.forEach(function(i){e.active=t,i(e)})}var on={mounted:function(){this.bindGlobalEvent()},methods:{bindGlobalEvent:function(){this.loseFocusPause&&this.autoPauseLoseFocus()},autoPauseLoseFocus:function(){var e=this;if("undefined"!==typeof window){var t=tn();window.addEventListener("focus",function(e){return rn(e,!0)}),window.addEventListener("blur",function(e){return rn(e,!1)}),window.addEventListener("beforeunload",function(e){return rn(e,!1)}),window.document.addEventListener(t.event,function(e){return rn(e,document[t.hidden])}),an(function(t){t.active?e.play():e.pause()})}}}},sn=["created","videoChanged","videoChange","authReady","skipAd","load","error","loaded","playEnd","recharge","fullscreenClick"],cn={name:"QiyiPlayer",components:{QiyiVideoContinue:w,QiyiPosterLayer:D,QiyiSourceLayer:Ct,QiyiPlayButton:jt,QiyiDashboard:Ft,QiyiAdDashboard:Qt,QiyiLoading:Xt,QiyiLimit:gi,QiyiPlayLimit:R,QiyiBottomBuyLayer:ji,QiyiRecord:Ki,QiyiVideo:f,QiyiVV:Ci},mixins:[en,on],inheritAttrs:!1,props:{autoplay:{type:Boolean,default:!1},adParams:{type:Object,default:function(){return{}}},tvid:{type:[Number,String],required:!0},vid:{type:String,default:""},purchaseType:{type:Number,default:void 0},vipType:{type:String,default:""},videoName:{type:String,default:""},titleShow:{type:Boolean,default:!1},controlEle:{type:String,default:""},dashboard:{type:Boolean,default:!0},limit:{type:Boolean,default:!1},ad:{type:Boolean,default:!0},playButton:{type:Boolean,default:!0},record:{type:Boolean,default:!1},skipHeadAndEnd:{type:Boolean,default:!1},source:{type:Boolean,default:!0},vv:{type:Boolean,default:!0},playerClass:{type:Object,default:function(){return{}}},playerStyle:{type:Object,default:function(){return{}}},quailtyChange:{type:String,default:""},isShowVipLayer:{type:Boolean,default:!0},forceShowLayer:{type:Boolean,default:!1},loadingCallapp:{type:Boolean,default:!0},fatherid:{type:Number,default:0},playerType:{type:String,default:"0"},rate:{type:Number,default:void 0},loseFocusPause:{type:Boolean,default:!1},limitCallAppCustom:{type:Boolean,default:!1},coustomVvOptions:{type:Object,default:function(){return{}}}},data:function(){return{videoStatus:"",qiyiVideo:{},isResetVideo:!1,video:null,authData:null,isVideo:!0,isHttp:!0,dashboardShow:!1,noSourceLayer:!0,vvOptions:{tvid:"",vid:"",c1:"",ht:"",prv:"",duration:"",vfrmblk:"",vfrmrst:"",fatherid:"",ps3:"",ps4:"",s3:"",s4:""},videoInfo:{},isAndroid:!1,isBaidu:!1,isPlay:!1,btnPlay:!1}},watch:{quailtyChange:function(e){this.$emit("quailtyChange",e)}},methods:{initQiyiVideo:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.qiyiVideo=t,this.video=this.qiyiVideo.getVideo()||{},i=this.qiyiVideo.getEngineType(),this.isHttp="HTTP"===i,this.bindEvent(),this.playState();case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),bindEvent:function(){var e=this;for(var t in this.$emit("created",this.qiyiVideo),this.$emit("load",{purchaseType:this.purchaseType,tvid:this.tvid,isInit:!0}),this.$listeners)-1===sn.indexOf(t)&&this.video.on(t,this.$listeners[t]);this.video.on("videoChange",function(){e.$emit("videoChange")}),this.video.on("videoChanged",function(){e.$emit("videoChanged")}),this.video.on("recharge",function(){e.$emit("recharge")}),this.video.on("error",function(t){e.$emit("error",t)}),this.on("authRomte",function(t){if(t&&"P00001"!==t.code){var i=t;e.authData={videoInfo:i,adInfo:{},type:e.isHttp?i.type:"mp4"},e.$emit("authReady",e.qiyiVideo)}}),this.on("skipAd",function(){e.$refs.videoContinue.skipAd()})},playState:function(){var e=this;this.isAndroid=T["j"].android,this.isBaidu=T["a"].baidubox||T["a"].baidubrowser,this.isAndroid&&this.video.on("play",function(){try{e.video.show(),e.isBaidu&&(e.btnPlay?e.btnPlay=!1:e.isPlay=!0)}catch(t){console.log(t)}})},loadSource:function(e){this.$emit("load",e),this.video.setSrcStatus(!0),this.load(e)},load:function(e){this.qiyiVideo.loadSource({tvid:e.tvid,vid:e.vid,autoplay:e.autoplay,adId:e.adId,autoSwitch:!0,supportSwitchToCurrent:!0})},afterAuth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.authData||{},i=this.getDuby(t);this.updateVVOptions(Object(r["a"])({},e,{prv:t.videoInfo.prv||t.videoInfo.prvType,duration:t.videoInfo.duration,duby:i})),e.albumId&&(t.videoInfo.albumId=e.albumId||t.videoInfo.aid),this.updateVideoInfo(t.videoInfo),this.$emit("loaded",this.authData)},togglePlay:function(){this.$emit("playBtnClick"),this.video&&(this.paused()?(this.isResetVideo?this.replay():this.play(),this.isResetVideo=!1):this.pause())},play:function(){this.video&&(this.isAndroid&&(this.video.show(),this.isBaidu&&(this.btnPlay=!0)),this.src()?this.video.play():(console.log("src is not null"),this.played=!0))},preload:function(e){this.qiyiVideo.preload(e)},switchRate:function(e){this.qiyiVideo.switchDefinition(e)},getVd:function(){return this.qiyiVideo.getVd()},getDuby:function(e){var t=e.videoInfo.data.ctl,i=t&&t.bid,n=e.videoInfo.data.program.video||[],a=n.find(function(e){return i===e.bid});return a&&a.isdol},updateVVOptions:function(e){this.vvOptions={tvid:e.tvid,vid:e.vid,c1:e.channelId||e.cid,ht:e.purchaseType,prv:e.prv,duration:e.duration,vfrmblk:e.vfrmblk||"",vfrmrst:e.vfrmrst||"",fatherid:this.fatherid,temlt:e.tmplt,duby:e.duby,ps3:e.ps3,ps4:e.ps4,s3:e.s3,s4:e.s4,fstply:e.fstply}},updateVideoInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.videoInfo=e},showSourceLayer:function(){this.$emit("showSourceLayer")},toggleMuted:function(){this.muted(!this.muted())},getReadyState:function(){return this.video.getReadyState()},seek:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=Math.min(e,this.duration()-1);var i=this.video.seek(e,t);i&&!t&&this.video.play()},duration:function(){return this.authData.videoInfo.prv?this.authData.videoInfo.prvTime:this.video.duration()},onVideoStatusChange:function(e){this.isVideo="VIDEO"===e,this.$emit("videoStatusChange",this.isVideo),this.isVideo?this.unLockSeek():this.lockSeek(),this.played&&this.play()},preplay:function(){this.video&&(this.video.preplay(),this.$refs.loading.loadingTipShow=!0)},replay:function(){this.$emit("load",{purchaseType:this.purchaseType,tvid:this.tvid}),this.video.setSrcStatus(!0),this.$refs.loading.loadingTipShow=!0,this.video.replay()},clear:function(){this.video&&(!this.video.ended()&&this.$refs.vv&&this.$refs.vv.sendPauseVV(),this.$refs.record.pauseHandle(),this.$emit("clear"),this.src(""),this.qiyiVideo.stopAres())},removeSrc:function(){this.src()&&(this.pause(!0),this.src(""),this.video&&this.video.isFullscreen()&&this.exitFullscreen())},hide:function(){this.$el.style.display="none",this.$emit("hidePlayer")},show:function(){this.$el.style.display="block"},_handelBeforeEnded:function(e){this.$refs.vv.sendEndVV(e)},resetVideo:function(){this.isAndroid?T["a"].oppobrowser?(this.isResetVideo=!0,this.video.hide(),this.src(""),this.$refs.loading.loadingShow=!1,this.$refs.qiyiPosterLayer.posterShow=!0):this.isBaidu?this.isBaidu&&!this.isPlay?(this.video.hide(),this.seek(.1,!0),this.setTempStore(),this.$refs.dashboard.showDashBoard(),this.$refs.playButton.playShow=!0,this.$refs.loading.loadingShow=!1,this.$refs.qiyiPosterLayer.posterShow=!0):this.isPlay=!1:(this.video.hide(),this.seek(.1,!0),this.setTempStore(),this.$refs.loading.loadingShow=!1,this.$refs.qiyiPosterLayer.posterShow=!0):this.isBaidu?(this.isResetVideo=!0,this.removeSrc(),this.$refs.loading.loadingShow=!1,this.$refs.qiyiPosterLayer.posterShow=!0):(this.seek(0,!0),this.setTempStore(),this.$refs.qiyiPosterLayer.posterShow=!0)},setTempStore:function(){this.qiyiVideo.setTempStore()},_handleEnded:function(e,t){this._handelBeforeEnded(t),this.pause(),this.reset(),this.$emit("playEnd",{status:e,end:!0,prv:this.videoInfo.prv})},_handlePlay:function(e){var t=e.videoStatus;this.$emit("playStart",{status:t})},_toggleFullscreen:function(){var e=this.video.isFullscreen();e?this.exitFullscreen():(this.play(),this.fullscreen())},_handleFullscreen:function(e){e.isFullscreen=this.video.isFullscreen(),this.$emit("fullscreenClick",e),e.defaultPrevented||this._toggleFullscreen()},_sourceTypeHandle:function(e){0!==e.type&&this.video.hide(),this.$emit("sourceTypeChange",e)},_sourceLayerFooHandle:function(e){var t=e.code,i=e.data;this.$emit("sourceLayerFoo",{code:t,data:i})},_setDashboardShow:function(e){this.dashboardShow=e},_sourceVipType:function(e){this.$emit("sourceVipType",e)}}},dn=cn,un=Object(h["a"])(dn,n,a,!1,null,null,null);t["a"]=un.exports},"2a84":function(e,t,i){"use strict";i.d(t,"j",function(){return h}),i.d(t,"a",function(){return v}),i.d(t,"k",function(){return f}),i.d(t,"c",function(){return y}),i.d(t,"m",function(){return m}),i.d(t,"b",function(){return g});i("28a5");var n=i("0a0d"),a=i.n(n),r=(i("6b54"),i("87b3"),i("e814")),o=i.n(r),s=i("8d81"),c=i.n(s),d=i("7aa9");i.d(t,"d",function(){return d["b"]}),i.d(t,"e",function(){return d["c"]});var u=i("51cb");i.d(t,"f",function(){return u["c"]}),i.d(t,"g",function(){return u["d"]}),i.d(t,"h",function(){return u["e"]}),i.d(t,"i",function(){return u["f"]}),i.d(t,"l",function(){return u["h"]});var l="";"undefined"!==typeof window&&(l=window.navigator.userAgent);var p=Object(d["a"])(l),h=p.os,v=p.browser,f=p.osProducer;function y(e){e=+e,e=o()(e);var t=e/3600>>0,i=e%3600/60>>0,n=e%3600%60,a=t?1===t.toString().length?"0"+t+":":t+":":"";return a+=i?1===i.toString().length?"0"+i+":":i+":":"00:",a+=1===n.toString().length?"0"+n:n,a}function m(){return c()(window.navigator.userAgent+document.cookie+Math.random()+a()())}function g(e,t){try{for(var i,n,a=e.split("."),r=t.split("."),s=Math.max(a.length,r.length),c=0,d=0;d<s&&!c;d++)i=o()(a[d],10)||0,n=o()(r[d],10)||0,i<n&&(c=-1),i>n&&(c=1);return c}catch(u){return 0}}},"6ffa":function(e,t,i){"use strict";i("57e7"),i("ac6a"),i("f3e2"),i("d92a");var n=i("e814"),a=i.n(n),r=i("d225"),o=i("b0b4"),s=i("308d"),c=i("6bb5"),d=i("4e2b"),u=function(){function e(){Object(r["a"])(this,e)}return Object(o["a"])(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this}},{key:"once",value:function(e,t){var i=this;function n(){i.off(e,n),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this}},{key:"off",value:function(e,t){if(this._callbacks=this._callbacks||{},!arguments.length)return this._callbacks={},this;var i,n=this._callbacks[e];if(!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var a=0;a<n.length;a++)if(i=n[a],i===t||i.fn===t){n.splice(a,1);break}return this}},{key:"trigger",value:function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),i=this._callbacks[e];if(i){i=i.slice(0);for(var n=0,a=i.length;n<a;++n)i[n].apply(this,t)}return this}},{key:"listeners",value:function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]}},{key:"hasListeners",value:function(e){return!!this.listeners(e).length}}]),e}(),l=i("2a84"),p=i("7504");i("0cd8");function h(e,t){var i="HTTP"===t;e=e||{};var n=e.data=e.data||{},a=n.boss_ts=(n["boss_ts"]?n["boss_ts"]:n["boss"])||{};if(a.data=a&&a.data?a.data:{},n.program=n.program||{},n.p=n.p||{},e.aid=n.aid,e.tvid=n.tvid,e.prvType="1"===a.data.prv?a.previewType:"","1"===a.data.prv&&("1"===a.previewType?e.prvTime=60*a.previewTime:"3"===a.previewType&&(e.prvTime=a.previewTime)),n.program.video){var r=n.program.video.reduce(function(e,t){return t._selected?t:e},{});e.cid=r.cid,e.vid=r.vid,e.duration=r.duration,e.isHttp=i,e.src=i?"mp4"===r.ff?r.mp4Url:r.url:r.mu,e.bid=r.bid,e.type=r.ff}return e.prv=e.src&&e.prvType&&708!==n.st,e}var v=i("8296");i.d(t,"a",function(){return y});var f=Object(v["F"])("player",{feedback:!1}),y=function(e){function t(e){var i;return Object(r["a"])(this,t),i=Object(s["a"])(this,Object(c["a"])(t).call(this)),i.sdk=e.sdk||{},i.video=e.video||{},i.controlEle=e.controlEle,i._seekLock=!1,i._timeupdatetime=0,i.setSrcStatus(!0),i.bindNativeEvent(),i.bindSdkEvent(),i.updateFullScreen(),i}return Object(d["a"])(t,e),Object(o["a"])(t,[{key:"bindNativeEvent",value:function(){var e=this;l["j"].ios&&11===a()(l["j"].version)?this.video.addEventListener("touchend",function(){e.trigger("click")}):this.video.addEventListener("click",function(){e.trigger("click")}),this.video.addEventListener("touchstart",function(t){e.trigger("touchstart",t)}),this.video.addEventListener("touchmove",function(t){e.trigger("touchmove",t)}),this.video.addEventListener("touchend",function(t){e.trigger("touchend",t)}),this.playerZone=l["j"].ios?this.video:this.controlEle||this.video.parentNode,this.playerZone&&this.playerZone.addEventListener(p["a"].fullscreenchange,this._handleFullscreenchange.bind(this))}},{key:"bindSdkEvent",value:function(){var e=this;m.forEach(function(t){e.sdk.on(t,function(){e.trigger(t)})});var t=this.sdk.CoreType;this.sdk.on(t.NTF_StatusChanged,function(i){switch(i.state){case t.Status_AdLoadstart:e.trigger("loadstart",i);break;case t.Status_Ready:e.isFirst=!0;var n=e.video.src;e.trigger("src",n);break;case t.Status_LoadedMetaData:if(e.isFirst)e.isFirst=!1;else{var a=e.video.src;e.trigger("src",a)}break;case t.Status_Play:f.log("sdk event play"),e.trigger("play",i);break;case t.Status_AdPlaying:f.log("sdk event ad playing"),e.trigger("playing",i);break;case t.Status_Playing:f.log("sdk event video playing"),e.trigger("playing",i);break;case t.Status_AdPaused:case t.Status_Paused:f.log("sdk event pause"),e.trigger("pause",i);break;case t.Status_AdWaiting:case t.Status_Waiting:e.trigger("waiting",i);break;case t.Status_AdError:e.trigger("error",{targetName:"ad"});break;case t.Status_PlayError:e.trigger("error",{targetName:"play"});break;case t.Status_AdStalled:e.trigger("stalled",i);break;case t.Status_Stoped:f.log("sdk event ended"),e.trigger("ended",i);break;case t.Status_Loaddone:break;default:}}),this.sdk.on(t.Status_AresEnded,function(){f.log("sdk event adended"),e.trigger("adended",event)}),this.sdk.on(t.NTF_DashRemote,function(t){var i=e.sdk.getEngineType(),n=h(t,i);e.trigger("authRomte",n)}),this.sdk.on(t.NTF_AD_EVENTNOAD,function(){e.trigger("skipAd")}),this.sdk.on(t.NTF_VideoChange,function(){f.log("sdk event videochange"),e.setSrcStatus(!0),e.trigger("videoChange")}),this.sdk.on(t.NTF_VideoChanged,function(){e.trigger("videoChanged")}),this.sdk.on(t.NTF_VRSPreloaded,function(){e.trigger("vrsPreloaded")}),this.sdk.on(t.NTF_DefinitionSwitching,function(){e.trigger("rateSwitching")}),this.sdk.on(t.NTF_DefinitionSwitched,function(t){e.trigger("rateSwitched",t)}),this.sdk.on(t.NTF_Recharge,function(t){e.trigger("recharge",t)}),this.sdk.on(t.NTF_Error,function(t){t&&t.code&&(t&&t.code.indexOf("P")>-1?e.trigger("error",{targetName:"api",msg:t.code}):e.trigger("error",{targetName:"sdk",msg:"SDK_code:".concat(t.code,"-type:").concat(t.type||"","-st:").concat(t.st||"")}))})}},{key:"play",value:function(){f.log("call sdk video play"),this.sdk.play(!0)}},{key:"preplay",value:function(){try{var e=l["j"].android&&l["a"].qq;this._chromePlayed||e||!(l["a"].chrome||l["j"].ios||l["a"].vivobrowser)||(f.log("call video preplay"),this.sdk.play(!0),this._chromePlayed=!0)}catch(t){}}},{key:"replay",value:function(){f.log("replay"),this.sdk.replay()}},{key:"refresh",value:function(){this.sdk.refresh()}},{key:"paused",value:function(){return this.sdk.isPaused()}},{key:"pause",value:function(e){return f.log("call video pause, isForce:",!!e),this.sdk.pause(!1,e)}},{key:"src",value:function(e){if(""!==e)return this.video.src||document.getElementById("video").src;var t=this.sdk.getEngineType();this.isHttp="HTTP"===t,this.setSrcStatus(!1),this.sdk.cleanSrc(),this.video.removeAttribute("src"),this.video.load(),f.log("set src empty, engineType:",t)}},{key:"getSrcStatus",value:function(){return f.log("isSetSrc",this.isSetSrc),this.isSetSrc}},{key:"setSrcStatus",value:function(e){this.isSetSrc=e}},{key:"getReadyState",value:function(){return this.video.readyState}},{key:"currentTime",value:function(){return this.sdk.getCurrenttime()}},{key:"duration",value:function(){return this.sdk.getDuration()||NaN}},{key:"buffered",value:function(){return this.sdk.getBufferTime()}},{key:"seek",value:function(e,t){return"number"===typeof e&&(this.sdk.seek(e,null,t),!0)}},{key:"lockSeek",value:function(){this._seekLock=!0}},{key:"unLockSeek",value:function(){this._seekLock=!1}},{key:"checkSeekBack",value:function(){if(this._seekLock){var e=this.sdk.getCurrenttime();if(e-this._timeupdatetime>2)return this.seek(this._timeupdatetime),!0}return!1}},{key:"_handleAdtimeupdate",value:function(){this.checkSeekBack()||(this._timeupdatetime=this.currentTime(),this.trigger("timeupdate"))}},{key:"_handleAdseeking",value:function(e){this.checkSeekBack()||this.trigger("seeking")}},{key:"_handleAdseeked",value:function(){this._seekLock||this.trigger("seeked")}},{key:"muted",value:function(e){if("undefined"===typeof e)return this.sdk.getMuted();this.sdk.setMuted(e),this.trigger("muted",e)}},{key:"destroy",value:function(){this._timeupdatetime=0,this.sdk.destroy()}},{key:"reset",value:function(){this._timeupdatetime=0}},{key:"hide",value:function(){this.video.style.display="none",this.video.style.top="-1000px"}},{key:"show",value:function(){this.video.style.display="block",this.video.style.top="0px"}},{key:"width",value:function(){return this.video.offsetWidth}},{key:"height",value:function(){return this.video.offsetHeight}},{key:"ended",value:function(){return this.video.ended}},{key:"isFullscreen",value:function(){return p["a"].isFullscreen()}},{key:"updateFullScreen",value:function(){p["a"].requestFullscreen||this.video.webkitEnterFullscreen&&(p["a"].requestFullscreen="webkitEnterFullscreen")}},{key:"requestFullscreen",value:function(){p["a"].requestFullscreen&&this.playerZone[p["a"].requestFullscreen]()}},{key:"_handleFullscreenchange",value:function(e){e.isFullscreen=this.isFullscreen(),this.trigger("fullscreenchange",e)}},{key:"exitFullscreen",value:function(){try{p["a"].exitFullscreen&&p["a"].isFullscreen()&&document[p["a"].exitFullscreen]().catch(function(){})}catch(e){}}}]),t}(u),m=["loadstart","pause","waiting","progress","abort","canplay","canplaythrough","playing","play","ended","durationchange","error","seeked","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","resize","volumechange","texttrackchange","touchstart","touchmove","touchend","change","cancel","seeking","adseeking","adseeked","adtimeupdate"]},7504:function(e,t,i){"use strict";(function(e){for(var n,a=i("7618"),r=(i("ac6a"),i("f3e2"),{}),o=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],s=o[0],c=e.document||{},d=0;d<o.length;d++)if(o[d][1]in c){n=o[d];break}if(n)for(var u=0;u<n.length;u++)r[s[u]]=n[u];function l(e,t){var i;return["webkit","moz","ms","o",""].forEach(function(n){if(!i){""===n&&(t=t.slice(0,1).toLowerCase()+t.slice(1));var r=Object(a["a"])(e[n+t]);r+""!=="undefined"&&(i="function"===r?e[n+t]()||!0:e[n+t])}}),i}r.isFullscreen=function(){return c.IsFullScreen||l(c,"FullScreen")||l(c,"IsFullScreen")},t["a"]=r}).call(this,i("483b"))}}]);