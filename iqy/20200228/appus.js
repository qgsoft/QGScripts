(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["appus"],{b155:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("LoadPage",{attrs:{callback:t.loadMore}},[s("AuraHeadTitle",{attrs:{fixed:!0,title:"关注","left-url":"/u/","right-url":"/aipindao/","right-title":"发现"}}),t.loaded?s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],staticClass:"m-box-items"},[s("section",{staticClass:"m-subscibe-topSite"},[t._v("\n        共关注\n        "),s("a",{staticClass:"c-link",attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.total))]),t._v("\n        个用户及爱奇艺号\n      ")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.total,expression:"!total"}],staticClass:"m-box-items"},[s("section",{staticClass:"m-subscibe-topSite"},[t._v("你还没有关注任何爱奇艺号，动动手指，马上关注")])])]):t._e(),s("div",{staticClass:"m-box-items m-box-items-full"},[s("section",{staticClass:"m-home-subscibe"},[t.userInfos.length?s("SubList",{attrs:{users:t.userInfos,pingback:t.pingback}}):t._e()],1)]),t.showRecommand?s("div",{staticClass:"m-box"},[s("div",{staticClass:"m-box-items"},[s("section",{staticClass:"m-subscibeTitle"},[s("h3",{staticClass:"c-title-des"},[t._v("你可能会喜欢")])])]),s("div",{staticClass:"m-box-items m-box-items-full"},[s("section",{staticClass:"m-home-subscibe"},[s("SubList",{attrs:{users:t.recommandUserInfos,pingback:t.pingback},on:{addSuccess:t.onAdd,addFailure:function(e){return t.showError("关注失败")}}})],1)])]):t._e(),t.showRecommand?t._e():s("LoadBottom",{attrs:{load:!0,callback:t.loadMore,"load-complete":t.loadComplete}}),s("AuraToast",{directives:[{name:"show",rawName:"v-show",value:t.toastShow,expression:"toastShow"}],attrs:{text:t.toastText}}),s("BackTop"),s("AuraFooter")],1)},o=[],i=(s("96cf"),s("3b8d")),n=(s("a481"),s("73d5")),r=s("9e5e"),c=s("da1f"),u=s("aa91"),m=s("657e"),l=s("fe3a"),d=s("1533"),h=s("b2e7"),p={name:"UserSub",components:{AuraHeadTitle:n["a"],BackTop:r["a"],LoadBottom:c["a"],LoadPage:u["a"],SubList:m["a"]},mixins:[l["a"]],title:"视频关注-爱奇艺号关注-爱奇艺",style:["base","user"],data:function(){return{loaded:!1,total:0,page:-1,pageSize:20,userInfos:[],recommandUserInfos:[],recommandLength:0,toastShow:!1,toastText:"",pingback:{itemPingback:"609131_subscribecard",subPingback:"609131_subscribebtn",updatePingback:"803141_updata"}}},asyncData:function(t){t.res},computed:{loadComplete:function(){return this.total<=(this.page+1)*this.pageSize},showRecommand:function(){return this.recommandUserInfos.length>0}},beforeMount:function(){Object(h["M"])()||this.$router.replace("/u/")},methods:{loadMore:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,s,a,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={pageSize:this.pageSize,page:this.page+1},t.next=3,Object(d["g"])(Object(h["C"])(),e,{page:0,pageSize:6}).catch(function(t){return t});case 3:if(s=t.sent,a=s.user,o=s.recommandUser,this.pageSize=a.pageSize,this.page=a.page,this.total=a.total,this.userInfos=this.userInfos.concat(a.userInfos),this.loaded=!0,this.total){t.next=14;break}return t.next=14,this.getRecommandList(o);case 14:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getRecommandList:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.recommandLength=this.recommandLength+e.pageSize,this.recommandUserInfos=this.recommandUserInfos.concat(e.userInfos);case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),onAdd:function(t){var e,s=t.uid;for(var a in this.pageSize+=1,this.total+=1,this.recommandUserInfos){var o=this.recommandUserInfos[a];o.uid===s&&(e=a)}var i=this.recommandUserInfos.splice(e,1)[0];i.friend.status=1,this.userInfos.push(i),this.getRecommandList({page:this.recommandLength+1,pageSize:1})},showError:function(t){var e=this;this.toastText=t,this.toastShow=!0,setTimeout(function(){e.toastShow=!1},1e3)}}},b=p,f=s("2877"),g=Object(f["a"])(b,a,o,!1,null,null,null);e["default"]=g.exports}}]);