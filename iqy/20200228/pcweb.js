/*Built by pcw player group @2/27/2020, 12:01:48 PM */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.QiyiPlayerLoader=t()}(this,function(){"use strict";var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function n(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var t={"p2p.abs.mbw":"//static.iqiyi.com/js/player_v2/p2p.mbw.20200117.js","mbweb.data":"//static.iqiyi.com/js/player_v2/mbweb.data.5a238633.js","mbweb.http":"//static.iqiyi.com/js/player_v2/mbweb.http.5a238633.js",pako_deflate:"//static.iqiyi.com/js/player_v2/pako_deflate.5a238633.js","qvs.mat.stream":"//static.iqiyi.com/js/player_v2/qvs.mat.stream.5a238633.js","vendors~pako_deflate":"//static.iqiyi.com/js/player_v2/vendors~pako_deflate.5a238633.js"};function o(t,n){"object"!=typeof t&&(t=[t]);var r=document.getElementsByTagName("head").item(0)||document.documentElement,o=[],i=t.length-1,a=function(e){o[e]=document.createElement("script"),o[e].setAttribute("type","text/javascript"),o[e].onload=o[e].onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),e!=i?a(e+1):"function"==typeof n&&n(!0))},o[e].onerror=o[e].onstalled=function(){"function"==typeof n&&n(!1)},o[e].setAttribute("src",t[e]),r.appendChild(o[e])};a(0)}function e(){var e="",c={},l={},t=navigator,n=t.platform,r=t.userAgent.toLowerCase(),o=r.match(/rtrident/),i=!o&&r.match(/(ipad).*os\s([\d_]+)/),a=!o&&!i&&r.match(/(iphone\sos)\s([\d_]+)/),s=r.match(/Android\s+([\d.]+)/i),f="",u="";if(u=navigator.connection&&navigator.connection.effectiveType?navigator.connection.effectiveType:(u=r.match(/NetType\/\w+/)?r.match(/NetType\/\w+/)[0]:"").toLowerCase().replace("nettype/",""),l.userAgent=r,l.IE11=/rv\:11/.test(r),l.IE=/msie/.test(r)||l.IE11,l.IE6=/msie 6/.test(r),l.IE7=/msie 7/.test(r),l.IE8=/msie 8/.test(r),l.IE9=/msie 9/.test(r),l.IE10=/msie 10/.test(r),l.EDGE=/edge/.test(r),l.iPhone=/iphone os/.test(r)&&!o,l.iPhone4=/iphone os [45]_/.test(r)&&!o,l.iPad=/ipad/.test(r)&&!o,l.iPod=/iPod/i.test(r)&&!o,l.isTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,l.CHROMEIOS=/crios/.test(r),l.CHROME=/chrome/.test(r)&&!l.EDGE,l.SAFARI=/safari/.test(r)&&!/chrome/.test(r),l.FIREFOX=/firefox/.test(r),l.mobile=/mobile/gi.test(r),l.mobileSafari=l.iPhone||l.iPhone||l.iPad,l.QQ=/QQBrowser/gi.test(r),l.WECHAT=/(wechat)|(micromessenger)/gi.test(r),l.CHROME){var p=/chrome\/([\d\.]+) /gi.exec(r);l.version=p?parseInt(p[1],10):0}if(l.EDGE){var d=/edge\/([\d\.]+)/gi.exec(r);l.version=d?parseInt(d[1],10):0}var h=/mac/i.test(n),v="X11"==n&&!h,y=/win/i.test(n)&&!v,m=/android/.test(r);c.unix=v,c.win=y,c.mac=h,c.android=m,c.androidMobile=m&&l.mobile,c.androidTablet=m&&(!l.mobile||/pad/i.test(r)),s&&(c.version=s[1]),c.ios=!1,a&&(c.ios=!0,c.version=a[2].replace(/_/g,".")),i&&(c.ios=!0,c.version=i[2].replace(/_/g,".")),l.iPod&&(c.ios=!0),e=l.iPad?"b85da1cf3ae44351":"b6c13e26323c537d";var g=function(e){var t="01";(l.iPhone||c.android)&&(t="02"),(l.iPad||c.androidTablet)&&(t="03");var n="01",r,o,i,a,s;return c.android&&(n="02"),c.mac&&(n="08"),c.ios&&(n=e?"03":"02"),t+n+"003"+"101"+"00"+(e?"10":"00")+"000000"},w=function(e){return f||g(e)},b=function(e){f=e},_=function(e){var t=1,n;switch(w(e).substr(0,4)){case"0108":t=276;break;case"0303":t=10;break;case"0302":t=11;break;case"0203":t=13;break;case"0202":t=12}return t},E=function(){var e="";return l.CHROME?e="CHROME":l.SAFARI?e="SAFARI":l.FIREFOX?e="FIREFOX":l.QQ?e="QQ":l.WECHAT?e="WECHAT":l.IE?e="IE":l.IE6?e="IE6":l.IE7?e="IE7":l.IE8?e="IE8":l.IE9?e="IE9":l.IE10?e="IE10":l.EDGE?e="EDGE":l.mobileSafari?e="mobileSafari":c.ios?e="ios":c.ios?e="ios":c.androidMobile?e="androidMobile":c.androidTablet&&(e="androidTablet"),e},I=r.match(/miuivideo\//i)||c.android&&4<parseInt(c.version)&&r.match(/MiuiBrowser/i),P=l.iPad||l.iPhone||c.android&&4<parseFloat(c.version)||I?"m3u8":"mp4";l.CHROME&&l.version<41&&(P="mp4");var A,L=(window.__player__||{}).engine,O="data";return L&&(L.qvs||(O="http"),L.mp4?P="mp4":L.m3u8&&(P="m3u8")),/__pmode__=qvs/.test(window.location.href)?O="data":/__pmode__=m3u8/.test(window.location.href)?(O="http",P="m3u8"):/__pmode__=mp4/.test(window.location.href)&&(O="http",P="mp4"),{browser:l,os:c,code:e,getPtid:w,setPtid:b,getAgentType:_,browserName:E,network:u,playerMode:P,engineMode:O}}var a=e();function i(){var e=!!window.Promise&&!!window.Uint8Array&&!!Array.prototype.forEach,t=window.MediaSource||window.WebKitMediaSource,n=window.URL,r=!1;if(t&&"function"==typeof t.isTypeSupported){var o=t.isTypeSupported('video/mp4;codecs="avc1.42E01E"'),i;r=t.isTypeSupported('audio/mp4;codecs="mp4a.40.2"')&&o}return e&&!!n&&(!!r||a.browser.EDGE)}var s=i(),c=navigator.userAgent,l=/chrome\/([\d.]+) /gi.exec(c.toLowerCase());l=l?parseInt(l[1],10):0;var f=/firefox\/([\d.]+)/gi.exec(c.toLowerCase());f=f?parseInt(f[1],10):0;var u=/Version\/([\d.]+)/gi.exec(c.toLowerCase());function p(){var e=a.browser.WECHAT,t=a.browser.CHROME&&34<=l&&!a.browser.EDGE,n=a.browser.SAFARI&&10<=u;a.os.ios&&parseFloat(a.os.version)<13&&(n=!1);var r=a.browser.FIREFOX&&42<=f,o=a.browser.EDGE,i;return s&&(e||t||n||r||o)}function d(n,e,r,o){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function t(e,t){var n;for(n in e)if(i(e,n)&&t(e[n],n))break}return e&&t(e,function(e,t){!r&&i(n,t)||(o&&"string"!=typeof e&&"boolean"!=typeof e?(n[t]||(n[t]={}),d(n[t],e,r,o)):n[t]=e)}),n}u=u?parseFloat(u[1]):0;var h={},v={},y={},m=0,g={getItem:function(e){return h[e]},setItem:function(e,t){h[e]=t},removeItem:function(e){delete h[e]}},w=function(){try{return window.localStorage.setItem("_Q_test_",1),window.localStorage.removeItem("_Q_test_"),window.localStorage}catch(e){}return g}(),b=function(){0===m&&(clearTimeout(m),m=setTimeout(function(){for(var e in m=0,v)w.setItem(e,v[e]),delete v[e];for(var t in y)w.removeItem(t),delete y[e]},1e3))},_={PLAYER_VD_KEY:"QiyiPlayerVD",read:function(e){return h[e]||(h[e]=w.getItem(e)),h[e]},write:function(e,t){h[e]=t,v[e]=t,b()},remove:function(e){delete h[e],y[e]=0,b()}},E=!1,I="",P="QiyiPlayerLogger",A="QiyiPlayerLoggerLevel",L="#FFA500",O="#ff6cb7",k="#F30",F="#FFA500",R={OFF:{value:0,name:"OFF"},ERROR:{value:1,name:"ERROR"},WARN:{value:2,name:"WARN"},INFO:{value:3,name:"INFO"},DEBUG:{value:4,name:"DEBUG"}},C=parseInt(_.read(A),10),j=Array.prototype.slice,T="",x=0,M="",D=function(e,t){var n="",r=e<0,o=String(Math.abs(e));return o.length<t&&(n=new Array(t-o.length+1).join("0")),(r?"-":"")+n+o},S=function(){var e=new Date;return e.getFullYear()+"-"+D(e.getMonth()+1,2)+"-"+D(e.getDate(),2)+" "+D(e.getHours(),2)+":"+D(e.getMinutes(),2)+":"+D(e.getSeconds(),2)+(e.getMilliseconds?"."+D(e.getMilliseconds(),3):"")},N=function(e){var t=e.join("");M!==t?(M=t,x=0):(1<++x&&(I=(I=I.replace(T,"")).substring(0,I.length-2)),e.push(">>repeat("+x+")<<"))},Q=function(e,t){var n,r=L;if(e=j.call(e),N(e),e.unshift("%c"),e.unshift("["+t.name+"]"),e.unshift("%c["+S()+" IQIYI_PLAYER_"+t.level.name+"]"),t.level!==R.DEBUG){T=e.join("").replace(/(%c|IQIYI_PLAYER_)/gi,"");var o=I||"";I=(""!==o?o+"\n":"")+T,E=!0}if("undefined"!=typeof console)try{n=console.log,t.level===R.WARN&&console.warn?(n=console.warn,r=O):t.level===R.ERROR&&console.error?(n=console.error,r=k):t.level===R.INFO&&console.info?n=console.info:t.level===R.DEBUG&&console.debug&&(n=console.debug,r=F),t.print&&n.apply(console,[e.join(" ")+" ","background-color:#699f00;color:#fff;","background-color:"+r+";color:#fff;"])}catch(i){}},G=function(){function n(e){this.context={name:e||"Unknown"}}return n.stringify=function(e){var t="";try{t=JSON.stringify(e)}catch(n){}return t},n.setLevel=function(e){e&&"value"in e&&(n._filterLevel=e,_.write(A,e.value))},n.getLevel=function(){if(!n._filterLevel){var e=R.WARN;for(var t in R)R[t].value===C&&(e=R[t]);n._filterLevel=e}return n._filterLevel},n.getLog=function(){return I},n.saveImmediately=function(){B()},n.prototype.enabledFor=function(e){return e.value<=n.getLevel().value},n.prototype.invoke=function(e,t){Q(t,d({level:e,print:this.enabledFor(e)},this.context))},n.prototype.debug=function(){this.invoke(R.DEBUG,arguments)},n.prototype.log=function(){this.invoke(R.INFO,arguments)},n.prototype.info=function(){this.invoke(R.INFO,arguments)},n.prototype.warn=function(){this.invoke(R.WARN,arguments)},n.prototype.error=function(){this.invoke(R.ERROR,arguments)},n}();G.Levels=R;var U=3e4,H,W=.5*1048576;function q(e,t){var n="\n",r,o=I.split(n).slice(0,6).join(n)+n+"~~~~~truncated log~~~~~"+n;I=o+I.slice(o.length<e?e:o.length,t)}function B(){var e=I.length;W<e&&q(e-W,e),_.write(P,I)}function Y(){E&&(E=!1,B()),setTimeout(Y,U)}setTimeout(Y,U);var X="//static.iqiyi.com/js/common/ares-mobile-h5.min.js",V=function(){function e(){this.logger=new G("PackLoader"),this.configUrl=t,this.p2pcb=[],this.adcb=[],this.type=this.loadPackage()}return e.prototype.loadPackage=function(){var e="",t,n="mbweb."+(e=!("http"==a.engineMode)&&p()?"data":"http");/__uplog__/.test(window.location.href)&&(n+=".debug");var r=this.configUrl[n];return setTimeout(function(){o(r)},0),e},e.prototype.loadP2P=function(e){var r=this;"boolean"==typeof this.p2pcb.loaded?e():("function"==typeof e&&this.p2pcb.push(e),this.p2pcb.loading||(this.p2pcb.loading=!0,o(this.configUrl["p2p.abs.mbw"],function(e){for(r.p2pcb.loading=!1,r.p2pcb.loaded=e;0<r.p2pcb.length;)try{var t;r.p2pcb.shift()()}catch(n){}})))},e.prototype.loadAD=function(e){var r=this;"boolean"==typeof this.adcb.loaded?e():("function"==typeof e&&this.adcb.push(e),this.adcb.loading||(this.adcb.loading=!0,o(X,function(e){for(r.adcb.loading=!1,r.adcb.loaded=e;0<r.adcb.length;)try{var t;r.adcb.shift()()}catch(n){}})))},e}(),K=Object.create||me,z=Object.keys||ge,J=Function.prototype.bind||we,Z=20,$=function(){function e(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=K(null),this._eventsCount=0),this._maxListeners=this._maxListeners||undefined}return e.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):de.call(e,t)},e.prototype.emit=function(e){var t,n,r,o,i,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(1<arguments.length&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(n=a[e]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:re(n,l,this);break;case 2:oe(n,l,this,arguments[1]);break;case 3:ie(n,l,this,arguments[1],arguments[2]);break;case 4:ae(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(r-1),i=1;i<r;i++)o[i-1]=arguments[i];se(n,l,this,o)}return!0},e.prototype.on=function(e,t){return ce(this,e,t,!1)},e.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,ue(this,e,t)),this},e.prototype.off=function(e,t){return le.call(this,e,t)},e.prototype.un=function(e,t){this.off(e,t)},e.prototype.removeAllListeners=function(e){var t,n,r;if(!(n=this._events))return this;if(!n.off)return 0===arguments.length?(this._events=K(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=K(null):delete n[e]),this;if(0===arguments.length){var o=z(n),i;for(r=0;r<o.length;++r)"off"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("off"),this._events=K(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.off(e,t);else if(t)for(r=t.length-1;0<=r;r--)this.off(e,t[r]);return this},e.prototype.listeners=function(e){return pe(this,e,!0)},e.prototype.rawListeners=function(e){return pe(this,e,!1)},e.prototype.listenerCount=function(){return e.listenerCount.apply(this,arguments)},e}(),ee;try{var te={};Object.defineProperty&&Object.defineProperty(te,"x",{value:0}),ee=0===te.x}catch(Oe){ee=!1}function ne(e){return e._maxListeners===undefined?$.defaultMaxListeners:e._maxListeners}function re(e,t,n){if(t)e.call(n);else for(var r=e.length,o=ve(e,r),i=0;i<r;++i)try{o[i].call(n)}catch(a){}}function oe(e,t,n,r){if(t)e.call(n,r);else for(var o=e.length,i=ve(e,o),a=0;a<o;++a)try{i[a].call(n,r)}catch(s){}}function ie(e,t,n,r,o){if(t)e.call(n,r,o);else for(var i=e.length,a=ve(e,i),s=0;s<i;++s)try{a[s].call(n,r,o)}catch(c){}}function ae(e,t,n,r,o,i){if(t)e.call(n,r,o,i);else for(var a=e.length,s=ve(e,a),c=0;c<a;++c)try{s[c].call(n,r,o,i)}catch(l){}}function se(e,t,n,r){if(t)e.apply(n,r);else for(var o=e.length,i=ve(e,o),a=0;a<o;++a)try{i[a].apply(n,r)}catch(s){}}function ce(e,t,n){var r,o,i;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]):(o=e._events=K(null),e._eventsCount=0),i){if("function"==typeof i?i=o[t]=[i,n]:i.push(n),!i.warned&&(r=ne(e))&&0<r&&i.length>r){i.warned=!0;var a=new Error("Possible Dispatcher memory leak detected. "+i.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=i.length,"object"==typeof console&&console.warn}}else i=o[t]=n,++e._eventsCount;return e}function le(e,t){var n,r,o,i,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=K(null):(delete r[e],r.off&&this.emit("off",e,n.listener||t));else if("function"!=typeof n){for(o=-1,i=n.length-1;0<=i;i--)if(n[i]===t||n[i].listener===t){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():he(n,o),1===n.length&&(r[e]=n[0]),r.off&&this.emit("off",e,a||t)}return this}function fe(){if(!this.fired)switch(this.target.off(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function ue(e,t,n){var r={fired:!1,wrapFn:undefined,target:e,type:t,listener:n},o=J.call(fe,r);return o.listener=n,r.wrapFn=o}function pe(e,t,n){var r=e._events;if(!r)return[];var o=r[t];return o?"function"==typeof o?n?[o.listener||o]:[o]:n?ye(o):ve(o,o.length):[]}function de(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function he(e,t){for(var n=t,r=n+1,o=e.length;r<o;n+=1,r+=1)e[n]=e[r];e.pop()}function ve(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function ye(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function me(e){var t=function(){};return t.prototype=e,new t}function ge(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t);return t}function we(e){var t=this;return function(){return t.apply(e,arguments)}}ee?Object.defineProperty($,"defaultMaxListeners",{enumerable:!0,get:function(){return Z},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');Z=e}}):$.defaultMaxListeners=Z;var be="6.0.14";function _e(e){var t=parseInt(e,10);return t<9e7&&(t=100*(t+9e5)),t}var Ee=new G("PlayerManager"),Ie=function(){function e(e){this.Package=e}return e.prototype.createPlayer=function(e){void 0===e&&(e={}),Ee.log("createPlayer,params: "+G.stringify(e));var t=e.tvid,n=e.vid;t=t||"",(n=n||"")||(e.vid="fake123456"),e.plyct=+new Date,Ee.log("<APP>播放器类型： 点播 - MobileWeb, .v = "+be),Ee.log("initialize info,params: location = "+window.location.href+", env: "+navigator.userAgent.toLowerCase()),Ee.log("initialize parameter,params: info =="+G.stringify(e)),e.playerType="mbweb",e.tvid=_e(e.tvid);var r=this.Package,o=null;if(e.videoId&&document.getElementById(e.videoId)){var i=document.getElementById(e.videoId),a=e.adapi||{};return a.adContainer=i.parentNode,e.parentId=e.videoId,r.view=a,r.ad=window.aresPad,o=new r(e,r),r.ad?(o.init(i),o):(o.sendLoaderError("Create","ADSDK"),Ee.log("播放器广告sdk获取失败"),null)}return o.sendLoaderError("Create","VIDEO"),Ee.log("播放器videoId参数结构不能为空"),null},e}(),Pe=new G("QiyiLoader"),Ae,Le;return Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length,n=+arguments[1]||0;if(0===t||isNaN(n)||t<=n)return-1;for(n<0&&(n=t+n)<0&&(n=0);n<t;++n)if(this[n]===e)return n;return-1}),new(function(t){function e(){var e=t.call(this)||this;return Pe.log("player v2 mbweb sdk init,player-"+be),e.Package=null,e.packLoader=new V,e.manager=null,e}return n(e,t),e.prototype.ready=function(e){var t=this;"function"==typeof e&&(this.isActived=!0,this.manager?e(this.manager):this.once("ready",function(){e(t.manager)}))},e.prototype.logger=function(){return G},e.prototype.setPackage=function(e){var t=this;this.Package=e,this.packLoader.loadAD(function(){t.manager||(t.manager=new Ie(t.Package)),t.emit("ready")})},e}($))});