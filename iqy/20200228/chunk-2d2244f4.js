(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2244f4"],{e01d:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("AppealPage",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:"choicethpt",expression:"'choicethpt'"}],ref:"page"},[a("AppealTitle",{attrs:{title:"请选择您的授权验证方式"}}),a("section",{directives:[{name:"show",rawName:"v-show",value:t.showWays.length,expression:"showWays.length"}],staticClass:"m-appeal-methodsList"},t._l(t.showWays,function(e,n){return a("div",{directives:[{name:"pingback",rawName:"v-pingback",value:e.rseat,expression:"way.rseat"}],key:n,staticClass:"method-item",on:{click:function(a){return t.toNativeAuth(e)}}},[a("picture",{staticClass:"method-icon"},[a("source",{attrs:{srcset:e.iconImg_dark,media:"(prefers-color-scheme: dark)"}}),a("img",{attrs:{src:e.iconImg}})]),a("div",{staticClass:"method-intro"},[a("div",{staticClass:"method-title"},[t._v(t._s(e.title))]),a("div",{staticClass:"method-info"},[t._v(t._s(e.info))])]),a("div",{staticClass:"method-arrow"},[a("i",{staticClass:"c-passport-icon icon-arrowR"})])])}),0),a("AppealChangeWay")],1)},s=[],i=(a("7f7f"),a("6d67"),a("0cd8"),a("96cf"),a("3b8d")),r=(a("d25f"),a("e917")),c=a("d5cb"),o=a("1d84"),u=a("261c"),p=a("53a7"),h=a("8296"),l=a("5321"),m={name:"AppealAuthWays",components:{AppealPage:c["a"],AppealChangeWay:o["a"],AppealTitle:r["a"]},data:function(){return{ways:[{type:u["b"],name:"wx",iconImg:"//www.iqiyipic.com/common/fix/h5-passport3.0/weixin.png",iconImg_dark:"//www.iqiyipic.com/common/fix/h5-passport3.0/weixin-dark.png",title:"微信授权验证",rseat:"choicethpt-wx"},{type:u["a"],name:"qq",iconImg:"//www.iqiyipic.com/common/fix/h5-passport3.0/QQ.png",iconImg_dark:"//www.iqiyipic.com/common/fix/h5-passport3.0/QQ-dark.png",title:"QQ账号授权验证",rseat:"choicethpt-qq"}],authWays:{}}},computed:{showWays:function(){var t=this;return this.ways.filter(function(e){return!!t.authWays[e.type]})}},beforeMount:function(){this.queryAuthWays()},methods:{queryAuthWays:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["r"])();case 2:e=t.sent,e.success?(a=e.data,this.authWays=a.reduce(function(t,e){return t[e["type"]]={account:e["account"],uid:e["uid"]},t},{}),this.ways=this.ways.map(function(t){var e=n.authWays[t.type]||{};return t.info=e.account,t.uid=e.uid,t})):Object(u["p"])({title:"账号类型不符合申诉条件",msg:e.msg});case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),toNativeAuth:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){var a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.toast({isLoading:!0}),t.next=3,Object(p["b"])("JSBRIDGE_AUTHORIZATION",{authType:e.name},function(t){var a=t&&t.result,s=h["G"].ios?t&&t.data:t.data&&JSON.parse(t.data.authInfo),i=s?s.accessToken||s.access_token||s.code:"";a&&s&&i?n.verifyAuthToken(s,e):n.toast({title:"授权失败",info:"很抱歉，您的账号无法进行第三方授权验证，请尝试其他验证方式。"})});case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),verifyAuthToken:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,a){var n,s,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n={snstype:a.type,uid:e.uid||"",atoken:e.accessToken||e.access_token,code:e.code},t.next=3,Object(u["w"])(n);case 3:s=t.sent,this.clearToast(),s.success?(h["O"].setItem(u["g"],1),Object(l["h"])({block:"choicethpt-".concat(a.name,"scs")}),this.toast({isMiniToast:!0,text:"授权成功"}),setTimeout(function(){i.clearToast(),i.$router.push("/m/appeal/newphone")},2e3)):this.toast({title:"授权失败",info:"很抱歉，您的账号无法进行第三方授权验证，请尝试其他验证方式。"});case 6:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),clearToast:function(){this.$refs.page.clearToast()},toast:function(t){var e=this;this.$refs.page.toast({isMiniToast:t.isMiniToast,text:t.text,title:t.title,info:t.info,isLoading:!1,closeIcon:!1,buttonInfo:[{text:"关闭",callback:function(){return e.clearToast()}}]})}}},d=m,f=a("2877"),w=Object(f["a"])(d,n,s,!1,null,null,null);e["default"]=w.exports}}]);