(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["appps"],{b671:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{ref:"section",staticClass:"m-video-wrap fullScreen-wrap change",style:{width:e.options.videoWidth,height:e.options.videoHeight},attrs:{id:"videoControl"}},[i("div",{staticClass:"m-video",on:{click:e.wrapperClick,touchstart:e.clearAutoHide}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.titleShow,expression:"titleShow"}],staticClass:"m-video-title"},[i("span",{staticClass:"logo"}),i("h1",{staticClass:"title"},[e._v(e._s(e.playInfo.videoName))])]),i("QiyiPlayer",{ref:"player",attrs:{tvid:e.playInfo.qipuId,vid:e.playInfo.vid,poster:e.playInfo.imageUrl,"vip-type":e.vipType,dashboard:!1,"play-button":!1,"video-name":e.playInfo.videoName,record:!1,rate:e.currentRate,fatherid:e.fatherid,"player-type":e.playerType,"loading-callapp":!e.hideLoadingCallapp,"pingback-params":e.pingbackParams,"auto-play":e.options.autoPlay,"ad-params":e.adParams,"purchase-type":e.playInfo.purchaseType,"control-ele":"videoControl"},on:{created:e.init,playEnd:e.handleEnd,authReady:e.onAuthReady,videoChanged:e.onVideoChanged,loaded:e.loaded,videoStatusChange:e.videoStatusChangeHandle,sourceTypeChange:e.sourceTypeChangeHandle,sourceLayerFoo:e.sourceLayerFooHandle,showSourceLayer:e.showSourceLayer,rateSwitched:e.afterSwitchRate,error:e.errorHandle},scopedSlots:e._u([{key:"layer",fn:function(){return[i("PlaySharePlayBtn",{on:{playClick:e.togglePlay}}),i("PlayShareLoading",{directives:[{name:"show",rawName:"v-show",value:e.loadingShow,expression:"loadingShow"}],attrs:{"loading-tip":e.loadingTip}}),e.playEndShow&&!e.hasErrorTip?i("PlayShareEnd",{attrs:{"next-show":e.playEndNextShow,"next-video-info":e.nextVideoInfo},on:{repeat:e.repeat}}):e._e(),e.isLong?i("PlayShareLimit",{attrs:{"play-info":e.playInfo,coop:e.options.coop}}):e._e(),e.recommendShow&&!e.hasErrorTip?i("PlayShareRecommend",{attrs:{"is-ugc":e.playInfo.isUGC,"video-type":e.videoType,"play-end-next-show":e.playEndNextShow,tvid:e.playInfo.qipuId,"next-video-info":e.nextVideoInfo},on:{repeat:e.repeat}}):e._e(),i("VideoLayerAccountError",{directives:[{name:"show",rawName:"v-show",value:!e.isLong,expression:"!isLong"}],attrs:{"qipu-id":e.playInfo.qipuId},on:{sourceTypeChange:e.sourceTypeChangeHandle}}),i("VideoLayerDefaultError",{attrs:{show:e.sdkError}})]},proxy:!0}])}),i("PlayShareDashboard",{directives:[{name:"show",rawName:"v-show",value:e.dashboardShow,expression:"dashboardShow"}],attrs:{"hide-fullscreen":e.options.hideFullscreen,"clarity-bid-list":e.clarityBidList,clarity:e.options.clarity,"hide-clarity":e.options.hideClarity||e.prv,"video-type":e.videoType,"is-video":e.isVideo,"show-progress":e.showProgress},on:{seek:e.seek,fullscreen:e._handleFullscreen,rateChange:e.rateChange,rateListShow:function(t){e.rateShow=!0},rateListClose:function(t){e.rateShow=!1},showAlbum:e.showAlbum}}),i("div",{directives:[{name:"show",rawName:"v-show",value:e.albumShow,expression:"albumShow"}],staticClass:"videoEpisode-wrap"},[i("a",{staticClass:"c-close-link",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.albumShow=!1}}},[i("i",{staticClass:"c-videoplay-icon c-icon-close"})]),i("keep-alive",["SOURCE"===e.videoType?i("AlbumSource",{directives:[{name:"show",rawName:"v-show",value:e.albumShow,expression:"albumShow"}],ref:"AlbumList",attrs:{tvid:e.playInfo.qipuId,"source-id":e.playInfo.sourceId,period:e.playInfo.period,cid:e.playInfo.channelId,summary:e.playInfo.summary},on:{playVideo:e.playVideo}}):e._e(),"ALBUM"===e.videoType?i("AlbumEposide",{directives:[{name:"show",rawName:"v-show",value:e.albumShow,expression:"albumShow"}],ref:"AlbumList",attrs:{tvid:e.playInfo.qipuId,cid:e.playInfo.channelId,"album-id":e.playInfo.albumId,"video-order":e.playInfo.order},on:{playVideo:e.playVideo}}):e._e()],1)],1)],1),i("PlayShareApi",{attrs:{"qiyi-video":e.qiyiVideo,"play-info":e.playInfo,"is-video":e.isVideo}}),i("AuraPopup",e._b({directives:[{name:"show",rawName:"v-show",value:e.popUpOptions.show,expression:"popUpOptions.show"}],on:{leftButtonClick:e.popUpOptions.onleftBtnClick,closeBtnClick:e.popUpOptions.onCloseBtnClick}},"AuraPopup",e.popUpOptions,!1))],1)},a=[],r=(i("7f7f"),i("5176")),s=i.n(r),o=(i("d92a"),i("2fdb"),i("6762"),i("e814")),u=i.n(o),c=i("cebc"),l=i("a745"),p=i.n(l),d=(i("96cf"),i("3b8d")),h=i("2f62"),f=i("fe3a"),v=i("6330"),y=i("fd12"),m=i("b2e7"),g=i("8296"),b=i("11ad"),w=i("936f");function x(e,t){return k.apply(this,arguments)}function k(){return k=Object(d["a"])(regeneratorRuntime.mark(function e(t,i){var n,a,r,o,u,c,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,t.state,a=Object(g["n"])(this.$userAgent.userAgent||""),r=a.os,delete i.vconsole,e.next=5,w["a"].jsonp(b["o"],{params:s()({tvId:i.tvId||i.tvid},{device:r.tablet?"pad":"phone",stystem:r.android?"android":"ios"})});case 5:return o=e.sent,u=o.data||o,c=u.code,l=u.data,"A00000"===c&&n("setData",l),l.token&&n("setSecureToken",l.token),e.abrupt("return",l.playInfo);case 10:case"end":return e.stop()}},e,this)})),k.apply(this,arguments)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.playInfo=t.playInfo}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.secureJsonpToken=t}var I={namespaced:!0,state:function(){return{playInfo:{}}},actions:{getPlayInfo:x},mutations:{setData:S,setSecureToken:C}},P=i("248c"),_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{height:"100%"}},[i("AlbumTabs",{ref:"albumTabs",attrs:{tags:e.tags,"cur-group-index":e.tabPage},on:{changeTag:e.tabChange}}),i("div",{staticClass:"videoEpisode-info"},[i("AlbumVideos",{staticClass:"m-album-list",attrs:{videos:e.videos,tvid:e.tvid,"item-class":"c-album-link m-topList"},on:{click:e.playVideo},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.video;return[e._v("\n      "+e._s(i.shortTitle||i.vt)+"\n    ")]}}])})],1)],1)},T=[],O=(i("759f"),i("c5f6"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"g-tab-num"},[i("div",{ref:"wrapper",staticClass:"m-tab-num m-sliding"},[i("div",{staticClass:"m-tab-num-list m-sliding-list",staticStyle:{"-webkit-transform":"translate(0px, 0px) scale(1)",transform:"translate(0px, 0px) scale(1)"}},e._l(e.tags,function(t,n){return i("span",{key:n,ref:"tab",refInFor:!0,class:["c-tab-item",{selected:n==e.curGroupIndex}],on:{click:function(t){return e.changeTag(n)}}},[e._v(e._s(t.groupName))])}),0)])])}),R=[],L=i("1fba"),$={name:"AlbumTabs",props:{curGroupIndex:{type:Number,default:0},tags:{type:Array,default:function(){return[]}}},methods:{initScroll:function(){var e=this;this.$nextTick(function(){e.scroll=new L["a"](e.$refs.wrapper,s()({scrollX:!0,preventDefault:!0,click:!0})),e.setTagPosition(e.curGroupIndex)})},setTagPosition:function(e){this.scroll&&this.$refs.tab&&this.scroll.scrollToElement(this.$refs.tab[e])},changeTag:function(e){this.setTagPosition(e),this.$emit("changeTag",e)}}},j=$,A=i("2877"),V=Object(A["a"])(j,O,R,!1,null,null,null),E=V.exports,N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.videos&&e.videos.length?i("section",e._l(e.videos,function(t,n){return i("a",{key:n,staticClass:"c-album-item",class:[e.itemClass,{selected:e.tvid==t.id}],attrs:{href:"javascript:void(0);"},on:{click:function(i){return e.$emit("click",t)}}},[e._t("default",null,{video:t})],2)}),0):e._e()},q=[],D={name:"AlbumVideos",props:{videos:{type:Array,default:function(){return[]}},tvid:{type:String|Number,default:""},itemClass:{type:String,default:""}}},B=D,z=Object(A["a"])(B,N,q,!1,null,null,null),H=z.exports,U=(i("55dd"),i("6d67"),i("0cd8"),i("1d52"));function F(e){return e.reduce(function(e,t){return e.concat(t)},[])}function M(e){return G.apply(this,arguments)}function G(){return G=Object(d["a"])(regeneratorRuntime.mark(function e(t){var i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i={sourceId:t.sourceId,year:t.year,month:t.month,token:t.token},e.next=3,Object(U["d"])(i);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)})),G.apply(this,arguments)}function W(e){return J.apply(this,arguments)}function J(){return J=Object(d["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,i=t.sort(function(e,t){return u()(t.year)-u()(e.year)}).map(function(e){return e.monthList.sort(function(e,t){return u()(t)-u()(e)}).map(function(t){return{year:e.year,month:t}})}),e.abrupt("return",F(i).map(function(e,t){return Object(c["a"])({},e,{index:t,groupName:"".concat(e.year,"年").concat(e.month,"月")})}));case 5:return e.prev=5,e.t0=e["catch"](0),e.abrupt("return",[]);case 8:case"end":return e.stop()}},e,null,[[0,5]])})),J.apply(this,arguments)}function Q(e){for(var t=e.total,i=e.pageSize||10,n=[],a=t%i===0?t/i-1:t/i,r=0;r<=a;r++){var s=r*i+1,o=(r+1)*i,u=Math.min(o,t),c=s===t?s:"".concat(s,"-").concat(u);n.push({from:s,end:o,to:u,groupName:c})}return n}function X(e){return Y.apply(this,arguments)}function Y(){return Y=Object(d["a"])(regeneratorRuntime.mark(function e(t){var i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i={albumId:t.albumId,size:t.pageSize,page:t.page,needPrevue:!1},e.next=3,Object(U["a"])(i);case 3:return n=e.sent,e.abrupt("return",{albumTags:Q({total:n.total,pageSize:n.pageSize,currentPage:n.currentPage}),videos:n.videos,total:n.total});case 5:case"end":return e.stop()}},e)})),Y.apply(this,arguments)}function K(e,t){if(!t)return null;var i=null;return e.some(function(n,a){return(n.tvid===t.tvid||n.qipuId===t.tvid)&&(a!==e.length-1&&(i=e[a+1],!0))}),i}var Z={name:"AlbumSource",components:{AlbumTabs:E,AlbumVideos:H},props:{tvid:{type:[String,Number],default:""},cid:{type:[String,Number],default:""},sourceId:{type:[String,Number],default:""},period:{type:String,default:""},summary:{type:Array,default:function(){return[]}}},data:function(){return{tabPage:0,videoPage:0,videos:[],tags:[]}},computed:Object(c["a"])({},Object(h["e"])("playShare",["secureJsonpToken"])),mounted:function(){this.init()},methods:{init:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getInitPage();case 2:return this.videoPage=this.tabPage=e.sent,e.next=5,this._getSourceList(this.tabPage);case 5:this.initTabScroll();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),initTabScroll:function(){this.$refs.albumTabs.initScroll()},getInitPage:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W(this.summary);case 2:return this.tags=e.sent,t={year:this.period.slice(0,4),month:this.period.slice(4,6)},i=0,this.tags.some(function(e,n){return e.year===t.year&&e.month===t.month&&(i=n,!0)}),e.abrupt("return",i);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),playVideo:function(e){this.$emit("playVideo",e)},tabChange:function(e){this.tabPage=e,this._getSourceList(e)},_getSourceList:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=Object(c["a"])({cid:this.cid,sourceId:this.sourceId,token:this.secureJsonpToken},this.tags[t]),e.next=3,M(i);case 3:n=e.sent,this.videos=n||[];case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),playNext:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=K(this.videos,{tvid:this.tvid}),!t){e.next=4;break}return this.$emit("playVideo",t,!0),e.abrupt("return");case 4:if(this.hasNextPage){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this._getSourceList(this.videoPage+1);case 8:this.tabPage=this.videoPage=this.videoPage+1,t=this.videos[0],this.$emit("playVideo",t,!0);case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),hasNext:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=K(this.videos,{tvid:this.tvid}),!t){e.next=3;break}return e.abrupt("return",!0);case 3:if(this.hasNextPage){e.next=5;break}return e.abrupt("return",!1);case 5:return i=Object(c["a"])({cid:this.cid,sourceId:this.sourceId},this.tags[this.videoPage+1]),e.next=8,M(i);case 8:return n=e.sent,e.abrupt("return",{hasNext:!!n[0],nextVideoInfo:n[0]||null});case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},ee=Z,te=Object(A["a"])(ee,_,T,!1,null,null,null),ie=te.exports,ne=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{height:"100%"}},[i("AlbumTabs",{ref:"albumTabs",attrs:{tags:e.tags,"cur-group-index":e.tabPage},on:{changeTag:e.tabChange}}),i("div",{staticClass:"videoEpisode-info"},[i("AlbumVideos",{staticClass:"m-album-num clearfix",attrs:{videos:e.videos,tvid:e.tvid,"item-class":"c-album-item"},on:{click:e.playVideo},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.video;return[i("span",{staticClass:"num"},[e._v(e._s(n.pd))]),i("div",{staticClass:"c-rt"},[n.upperRightCorner?i("AuraVideoPicicon",{attrs:{text:n.upperRightCorner,picicon:"c-picicon-s"}}):e._e()],1),e.tvid==n.id?i("span",[i("i",{staticClass:"c-videoplay-icon c-album-current"})]):e._e()]}}])})],1)],1)},ae=[],re={name:"AlbumEposide",components:{AlbumTabs:E,AlbumVideos:H},props:{pageSize:{type:Number,default:30},tvid:{type:[String,Number],default:""},cid:{type:[String,Number],default:""},albumId:{type:[String,Number],default:""},videoOrder:{type:Number,default:0}},data:function(){return{tabPage:0,videoPage:0,eposideInfo:null,videos:[],tags:[],total:0}},computed:{hasNextPage:function(){return this.videoPage<this.tags.length}},mounted:function(){this.init()},methods:{init:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getInitPage();case 2:return this.videoPage=this.tabPage=e.sent,e.next=5,this._getAlbumListAndTags(this.tabPage);case 5:this.videos=e.sent,this.initTabScroll();case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),initTabScroll:function(){this.$refs.albumTabs.initScroll()},getInitPage:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.videoOrder?Math.floor(u()(this.videoOrder)/this.pageSize):this.tabPage);case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),playVideo:function(e){this.$emit("playVideo",e)},tabChange:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.tabPage=t,e.next=3,this._getAlbumListAndTags(t);case 3:this.videos=e.sent;case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),_getAlbumListAndTags:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i={albumId:this.albumId,pageSize:this.pageSize,page:t+1},e.next=3,X(i);case 3:return n=e.sent,this.tags.length||(this.tags=n.albumTags,this.total=n.total),e.abrupt("return",n.videos);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),playNext:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=K(this.videos,{tvid:this.tvid}),!t){e.next=4;break}return this.$emit("playVideo",t,!0),e.abrupt("return");case 4:if(this.hasNextPage){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,this._getAlbumListAndTags(this.videoPage+1);case 8:i=e.sent,this.tabPage=this.videoPage=this.videoPage+1,this.videos=i,t=this.videos[0],this.$emit("playVideo",t,!0);case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getNextVideo:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=K(this.videos,{tvid:this.tvid}),!t){e.next=3;break}return e.abrupt("return",t);case 3:if(this.hasNextPage){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this._getAlbumListAndTags(this.videoPage+1);case 7:return i=e.sent,e.abrupt("return",i[0]||null);case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),hasNext:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=this.videoOrder<this.total,!(this.videoOrder<this.total)){e.next=7;break}return e.next=4,this.getNextVideo();case 4:e.t1=e.sent,e.next=8;break;case 7:e.t1=null;case 8:return e.t2=e.t1,e.abrupt("return",{hasNext:e.t0,nextVideoInfo:e.t2});case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},se=re,oe=Object(A["a"])(se,ne,ae,!1,null,null,null),ue=oe.exports,ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div")},le=[];function pe(e){return{title:e.videoName,tvid:e.qipuId,vid:e.vid,aid:1===e.videoType?e.albumId:"",sid:2===e.videoType?e.sourceId:"",duration:e.duration||""}}var de={name:"PlayShareApi",props:{qiyiVideo:{type:Object,default:function(){return null}},playInfo:{type:Object,default:function(){return null}},isVideo:{type:Boolean,default:!1}},data:function(){return{video:null}},watch:{qiyiVideo:function(e){e&&!this.video&&this.init()}},methods:{init:function(){this.video=this.qiyiVideo.getVideo(),this.exportThirdpartyApi(),this.exportOpenApi()},bindPostMessage:function(){window.document.domain="iqiyi.com",window.addEventListener("message",function(e){var t=window.__toThirdPartyAPI,i=e.data,n=i.name,a=i.method,r=i.param;"qiyiPlayer"===n&&t&&t[a]&&t[a](r)})},triggerEvent:function(e){if(e.ele){var t=CustomEvent?new CustomEvent(e.name,{detail:e.data}):new Event(e.name);e.ele.dispatchEvent(t)}},exportThirdpartyApi:function(){if(this.triggerEvent({ele:document,name:"videoReady",data:"Video is ready!"}),window){var e=this.video;this.bindPostMessage(),window.__toThirdPartyAPI={play:function(){e.play()},pause:function(){e.pause()},progress:function(t){var i=u()(e.currentTime())+u()(t);e.seek(i),this.play()},back:function(t){var i=u()(e.currentTime())-u()(t);i>0&&e.seek(i),this.play()},fullScreen:function(){!e.isFullscreen()&&e.requestFullscreen()},exitFullScreen:function(){e.exitFullscreen()}}}},exportOpenApi:function(){var e=this;if(window&&this.playInfo){var t=this.video,i=this;this.triggerEvent({ele:window,name:"apiReady",data:{status:!!this.playInfo.tvid}}),t.on("videoChanged",function(){e.triggerEvent({ele:window,name:"loadVideo",data:pe(e.playInfo)})}),window.openApi={getTimeInfo:function(){return{currentTime:t.currentTime()||0,duration:i.playInfo.duration||0,isVideo:i.isVideo}},getVideoInfo:function(){return pe(i.playInfo)},playBySetTime:function(e){if(!(i.playInfo.duration<e)){t.paused()&&t.play();var n=function n(){i.isVideo&&(t.seek(e),t.play(),t.off("timeupdate",n))};t.on("timeupdate",n)}}}}}}},he=de,fe=Object(A["a"])(he,ce,le,!1,null,null,null),ve=fe.exports,ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"m-play-watching"},[i("div",{staticClass:"title"},[i("div",{staticClass:"c-title"},[e._v("猜你喜欢")]),i("a",{staticClass:"c-link",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.$emit("repeat")}}},[i("i",{staticClass:"c-videoplay-icon c-play-replay"}),e._v("重播\n    ")]),i("ButtonDown",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:"h5zw_bkxiazai",expression:"'h5zw_bkxiazai'"},{name:"pingback",rawName:"v-pingback",value:"h5zw_bkxiazai",expression:"'h5zw_bkxiazai'"}],attrs:{subtype:e.subtype,"extral-options":e.extralOptions(e.nextVideoInfo),"to-page":"play","down-app-url":"//ota.iqiyi.com/f4.jsp?url=h5_qiantao"}},["ALBUM"!==e.videoType&&"SOURCE"!==e.videoType||!e.playEndNextShow?e._e():i("a",{staticClass:"c-link",attrs:{href:"javascript:void(0)"}},[i("i",{staticClass:"c-videoplay-icon c-play-next"}),e._v("下一集\n      ")])])],1),e.video?i("div",{staticClass:"inner"},[i("ButtonDown",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:"h5zw_bkxiazai",expression:"'h5zw_bkxiazai'"},{name:"pingback",rawName:"v-pingback",value:"h5zw_bkxiazai",expression:"'h5zw_bkxiazai'"}],attrs:{subtype:e.subtype,"extral-options":e.extralOptions(e.video),"to-page":"play","down-app-url":"//ota.iqiyi.com/f4.jsp?url=h5_qiantao"}},[i("a",{staticClass:"inner-content",attrs:{href:"javascript:void(0)"}},[i("div",{staticClass:"content-img",style:{"background-image":"url("+e.video.imageUrl+")"}},[e.video.isLong?i("div",{staticClass:"c-rt"},[i("span",{staticClass:"c-icon-wanzheng"},[e._v("完整版")])]):e._e(),i("div",{staticClass:"c-rb"},[i("span",{staticClass:"c-date"},[e._v(e._s(e.video.duration||e.video.showContent))])])]),i("div",{staticClass:"content-info"},[i("div",{staticClass:"con-title"},[e._v(e._s(e.video.title||e.video.shortTitle||e.video.vt||e.video.mainTitle))]),i("div",{staticClass:"con-info"},[e._v(e._s(e.video.desc||e.video.subTitle))]),i("div",{staticClass:"con-btn"},[e._v("到爱奇艺观看")])])])])],1):e._e()])},me=[],ge=i("38ff"),be="//pub.m.iqiyi.com/jp/h5/recommend/videos/",we="//pub.m.iqiyi.com/h5/main/rec/longVideo/";function xe(e){return ke.apply(this,arguments)}function ke(){return ke=Object(d["a"])(regeneratorRuntime.mark(function e(t){var i,n,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w["a"].jsonp(we,{params:{videoId:t}});case 3:if(i=e.sent,n=i.data,a=n.code,r=n.data,"A00000"===a){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",{video:s()({},r,{isLong:!0})});case 12:return e.prev=12,e.t0=e["catch"](0),e.abrupt("return",null);case 15:case"end":return e.stop()}},e,null,[[0,12]])})),ke.apply(this,arguments)}function Se(e){return Ce.apply(this,arguments)}function Ce(){return Ce=Object(d["a"])(regeneratorRuntime.mark(function e(t){var i,n,a,r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i={area:"h_squirrel",referenceId:t,withRefer:"true",page:1,size:1,type:"video",playPlatform:"H5_QIYI"},e.next=3,w["a"].jsonp(be,{params:i});case 3:return n=e.sent,a=n.data,r=a.videos,o=a.pingback,e.abrupt("return",{video:r&&r.length?s()({},r[0],{isLong:!1}):null,pingback:o});case 8:case"end":return e.stop()}},e)})),Ce.apply(this,arguments)}var Ie=i("5bcb"),Pe={name:"PlayShareRecommend",components:{ButtonDown:ge["a"]},directives:{swipe:Ie["a"]},props:{isUgc:{type:Boolean,default:!1},tvid:{type:[String,Number],default:""},videoType:{type:String,default:""},playEndNextShow:{type:Boolean,default:!1},nextVideoInfo:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{swipeOptions:{stopPropagation:!0,startSlide:0,callback:function(t){e.dotIndex=t},continuous:!0,auto:3e3},video:null,pingback:{},dotIndex:0,subtype:"H5bfqx_989"}},mounted:function(){this.getRecommend()},methods:{getRecommend:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,i,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.isUgc){e.next=4;break}return e.next=3,xe(this.tvid);case 3:t=e.sent;case 4:if(t){e.next=8;break}return e.next=7,Se(this.tvid);case 7:t=e.sent;case 8:i=t,n=i.video,a=i.pingback,this.video=n,this.pingback=a;case 11:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),extralOptions:function(e){return e?{aid:e.albumId,tvid:e.id||e.tvid||e.playVideoId||e.qipuId,cid:e.cid,vid:e.vid,coop:this.$route.query.coop||"",ftype:27,video:e}:{}}}},_e=Pe,Te=Object(A["a"])(_e,ye,me,!1,null,null,null),Oe=Te.exports,Re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"m-video-dashboard"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showProgress,expression:"showProgress"}],ref:"progress",staticClass:"video-progress",on:{touchstart:function(t){return t.preventDefault(),e.touchstart(t)},touchmove:function(t){return t.preventDefault(),e.touchmove(t)},touchend:function(t){return t.preventDefault(),e.touchend(t)}}},[i("div",{staticClass:"progress-track"},[i("div",{staticClass:"progress-load",style:{width:e.progressLoad}}),i("div",{staticClass:"progress-play",style:{width:e.progressPlay}}),i("div",{staticClass:"progress-seek",style:{left:e.progressSeek,marginLeft:"-9px"}})])]),i("div",{staticClass:"video-console"},[i("div",{directives:[{name:"visibility",rawName:"v-visibility",value:e.showProgress?"visible":"hidden",expression:"showProgress ? 'visible' : 'hidden'"}],staticClass:"timeDisplay"},[i("span",{staticClass:"timeDisplay-current"},[e._v(e._s(e.currentTime))]),i("span",{staticClass:"timeDisplay-splite"},[e._v("/")]),i("span",{staticClass:"timeDisplay-duration"},[e._v(e._s(e.duration))])]),e.showRate?i("PlayShareRate",{attrs:{"bid-list":e.clarityBidList,clarity:e.clarity},on:{rateChange:e.rateChange,rateListShow:function(t){return e.$emit("rateListShow")},rateListClose:function(t){return e.$emit("rateListClose")}}}):e._e(),i("div",{staticClass:"video-type"},["ALBUM"===e.videoType||"SOURCE"===e.videoType?i("a",{staticClass:"c-link",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.$emit("showAlbum")}}},[e._v("\n          剧集\n        ")]):e._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.hideFullscreen&&e.showProgress,expression:"!hideFullscreen && showProgress"}],staticClass:"fullScreen",on:{click:e.fullscreen}},[i("i",{staticClass:"c-videoplay-icon",class:{"c-icon-fullscreen":!e.isFullscreen,"c-icon-exitFullScreen":e.isFullscreen}})])],1)])])},Le=[],$e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"video-type"},[i("a",{staticClass:"c-link",attrs:{href:"javascript:void(0)"},on:{click:e.rateListShow}},[e._v("\n      "+e._s(e.clarityName)+"\n    ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.clarityShow,expression:"clarityShow"}],staticClass:"video-type-choice"},[i("a",{staticClass:"c-close-link",attrs:{href:"javascript:void(0)"},on:{click:e.rateListClose}},[i("i",{staticClass:"c-videoplay-icon c-icon-close"})]),i("div",{staticClass:"inner"},e._l(e.rates,function(t,n){return i("a",{key:n,staticClass:"c-link",class:{selected:t._rate===e.clarity},attrs:{href:"javascript:void(0);"},on:{click:function(i){return e.rateChange(t)}}},[e._v(e._s(t.name))])}),0)])])])},je=[],Ae=i("784b"),Ve={name:"PlayShareRate",props:{bidList:{type:Array,default:function(){return[]}},clarity:{type:[Number,String],default:1}},data:function(){return{rates:[],clarityShow:!1,rateMap:{}}},computed:{clarityName:function(){return this.rateMap[this.clarity]||(this.rates[0]?this.rates[0].name:"")}},mounted:function(){var e=this.getRatesInfo();this.rates=e.rates,this.rateMap=e.rateMap},methods:{rateChange:function(e){this.clarityShow=!1,this.$emit("rateChange",e)},getRatesInfo:function(){return this.bidList.sort(function(e,t){return u()(t.bid)-u()(e.bid)}).reduce(function(e,t){var i=Object(Ae["b"])(t.bid);return i&&!e.rateMap[i._rate]&&(e.rates.push(i),e.rateMap[i._rate]=i.name),e},{rates:[],rateMap:{}})},rateListShow:function(){var e=this;this.clarityShow=!0,this.$emit("rateListShow"),setTimeout(function(){e.rateListClose()},3e3)},rateListClose:function(){this.clarityShow=!1,this.$emit("rateListClose")}}},Ee=Ve,Ne=Object(A["a"])(Ee,$e,je,!1,null,null,null),qe=Ne.exports,De=i("4e77"),Be={name:"QiyiDashboard",components:{PlayShareRate:qe},directives:{visibility:{bind:function(e,t){e.style.visibility=t.value},update:function(e,t){e.style.visibility=t.value}}},props:{hideFullscreen:{type:Boolean,default:!1},hideClarity:{type:Boolean,default:!0},isVideo:{type:Boolean,default:!1},clarityBidList:{type:Array,default:function(){return[]}},videoType:{type:String,default:""},clarity:{type:[String,Number],default:""},showProgress:{type:Boolean,default:!1}},data:function(){return{duration:"",currentTime:"00:00",progressPlay:"",progressSeek:"",progressLoad:"",isFullscreen:!1,$player:null}},computed:Object(c["a"])({},Object(h["e"])("playShare",["playInfo"]),{showRate:function(){return this.clarityBidList.length&&this.isVideo&&!this.hideClarity&&this.showProgress}}),beforeMount:function(){var e=this;this.$parent.$on("init",function(t,i){e.$player=i;var n=t.getVideo();e.video=n,e.init(n)})},mounted:function(){Object(De["c"])(this.orienTationChange.bind(this))},methods:{orienTationChange:function(){},init:function(e){this.bindEvent(e)},bindEvent:function(e){var t=this;e.on("src",function(){t.duration=Object(g["q"])(t.getDuration())}),e.on("durationchange",function(){t.duration=Object(g["q"])(t.getDuration())}),e.on("timeupdate",function(){if(!t.isDraging){var i=e.currentTime(),n=t.getDuration(),a=i/n;t.updateCurrentTime(i),t.updateProgress(a)}}),e.on("progress",function(){var i=t.getBufferPercent(e);t.updateProgressLoad(i)}),e.on("fullscreenchange",function(){t.isFullscreen=e.isFullscreen()})},getBufferPercent:function(e){var t=this.getDuration();return t?e.buffered()/t:0},updateProgress:function(e){var t="".concat(100*e,"%");this.progressPlay=t,this.progressSeek=t},updateProgressLoad:function(e){var t="".concat(100*e,"%");this.progressLoad=t},touchstart:function(e){this.isDraging=!0,this.seekPos=e.touches[0].pageX},touchmove:function(e){this.isDraging=!0,this.seekPos=e.touches[0].pageX,this.seekDashboard(this.seekPos)},touchend:function(){var e=this.seekDashboard(this.seekPos);this.isDraging=!1,this.$emit("seek",e)},seekDashboard:function(e){var t=this.$refs.progress,i=t.getBoundingClientRect().left,n=t.offsetWidth,a=e-i,r=Math.min(Math.max(a,0),n),s=r/n;return this.updateProgress(s),this.updateCurrentTimeProgress(s)},seekVideo:function(e){var t=this.videoStartPos,i=e-t,n=this.getDuration(),a=n/2e3,r=(this.videoStartSecond+i*a)/n;return r=Math.min(Math.max(r,0),1),this.updateProgress(r),this.updateCurrentTimeProgress(r)},updateCurrentTimeProgress:function(e){var t=this.getDuration(),i=e*t;return this.updateCurrentTime(i),i},updateCurrentTime:function(e){e>=0&&(this.currentTime=Object(g["q"])(e))},fullscreen:function(e){this.$emit("fullscreen",e)},rateChange:function(e){this.$emit("rateChange",e)},getDuration:function(){return this.$player.duration()}}},ze=Be,He=Object(A["a"])(ze,Re,Le,!1,null,null,null),Ue=He.exports,Fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:"190910_videoplay",expression:"'190910_videoplay'"},{name:"pingback",rawName:"v-pingback",value:"190910_videoplay",expression:"'190910_videoplay'"},{name:"show",rawName:"v-show",value:e.playShow,expression:"playShow"}],staticClass:"c-videoplay",class:{selected:!e.paused},attrs:{onclick:"if(!this.getAttribute('srcset')) {this.setAttribute('playBtnClickedBeforeInit', 'true'); document.getElementById('video').play();}"},on:{click:function(t){return e.$emit("playClick")}}},[i("i",{staticClass:"c-videoplay-icon c-videoplay-big"})])},Me=[],Ge={name:"PlaySharePlayBtn",data:function(){return{playShow:!0,paused:!0,timer:null}},beforeMount:function(){var e=this;this.$parent.$on("created",function(t){e.video=t.getVideo(),e.video.on("playing",function(){e.paused=!1,e.autoHide()}),e.video.on("pause",function(){e.playShow=!0,e.paused=!0}),e.video.on("click",e.videoClickListener)}),this.$parent.$on("loaded",function(t){!e.$el.getAttribute("srcset")&&e.$el.getAttribute("playBtnClickedBeforeInit")&&e.$parent.play(),e.$el.setAttribute("srcset",!0)})},methods:{videoClickListener:function(){clearTimeout(this.timer),this.video.paused()||(this.playShow?this.playShow=!1:this.video.paused()||(this.playShow=!0,this.autoHide()))},autoHide:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.timer=setTimeout(function(){t.playShow=t.paused},3e3);case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},We=Ge,Je=Object(A["a"])(We,Fe,Me,!1,null,null,null),Qe=Je.exports,Xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"m-player-tip",staticStyle:{"z-index":"1001"}},[i("div",{staticClass:"player-tip-inner"},[i("div",{staticClass:"c-player-tip-info",domProps:{innerHTML:e._s(e.info.text)}}),e.info.callAppText?i("ButtonDown",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:"h5zw_bkxiazai",expression:"'h5zw_bkxiazai'"},{name:"pingback",rawName:"v-pingback",value:"h5zw_bkxiazai",expression:"'h5zw_bkxiazai'"}],staticClass:"c-btn",attrs:{"extral-options":e.videoInfo,subtype:e.subtype,"down-app-url":"//ota.iqiyi.com/f4.jsp?url=h5_qiantao",tag:"a","to-page":"play"}},[e._v("\n      "+e._s(e.info.callAppText)+"\n    ")]):e._e()],1)])},Ye=[],Ke={name:"PlayShareLimit",components:{ButtonDown:ge["a"]},props:{playInfo:{type:Object,default:function(){return{}}},coop:{type:String,default:""}},data:function(){return{subtype:"H5bfqx_989"}},computed:{videoInfo:function(){return{aid:this.playInfo.albumId,tvid:this.playInfo.qipuId,cid:this.playInfo.channelId,vid:this.playInfo.vid,coop:this.coop||"",ftype:27,video:this.playInfo}},info:function(){return{text:"很抱歉，<br>应版权方要求，当前节目只能在客户端观看",callAppText:"去爱奇艺APP观看"}}}},Ze=Ke,et=Object(A["a"])(Ze,Xe,Ye,!1,null,null,null),tt=et.exports,it=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"loading-playTip"},[i("span",{staticClass:"loading-play"},[i("svg",{staticClass:"circle-svg"},[i("circle",{staticClass:"circle-change",attrs:{cx:"50%",cy:"50%",r:"32%","stroke-width":"1",stroke:"#00c000",fill:"none","stroke-linecap":"round","stroke-dasharray":"200%","stroke-dashoffset":"200%"}},[i("animate",{attrs:{attributeName:"stroke-dashoffset",from:"200%",to:"0%",dur:"1.2s",fill:"freeze",repeatCount:"indefinite"}})])]),i("i",{staticClass:"c-videoplay-icon c-play-triangle"})]),e._v(" "+e._s(e.loadingTip)+"\n")])},nt=[],at={name:"PlayShareLoding",props:{loadingTip:{type:String,default:""}}},rt=at,st=Object(A["a"])(rt,it,nt,!1,null,null,null),ot=st.exports,ut=i("0578"),ct=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"m-player-tip"},[i("div",{staticClass:"player-tip-inner"},[i("div",{staticClass:"c-player-tip-info"},[i("div",{staticClass:"play-link-wrap"},[i("a",{directives:[{name:"show",rawName:"v-show",value:e.repeatShow,expression:"repeatShow"}],staticClass:"c-link",attrs:{href:"javascript:void(0);"},on:{click:function(t){return e.$emit("repeat")}}},[i("i",{staticClass:"c-videoplay-icon c-play-replay"}),e._v("重播\n        ")]),i("ButtonDown",{directives:[{name:"show-pingback",rawName:"v-show-pingback",value:"h5zw_bkxiazai",expression:"'h5zw_bkxiazai'"},{name:"pingback",rawName:"v-pingback",value:"h5zw_bkxiazai",expression:"'h5zw_bkxiazai'"}],attrs:{subtype:e.nextSubtype,"extral-options":e.extralOptions,"to-page":"play","down-app-url":"//ota.iqiyi.com/f4.jsp?url=h5_qiantao"}},[i("a",{directives:[{name:"show",rawName:"v-show",value:e.nextShow,expression:"nextShow"}],staticClass:"c-link",attrs:{href:"javascript:void(0);"}},[i("i",{staticClass:"c-videoplay-icon c-play-next"}),e._v("下一集\n          ")])])],1)])])])},lt=[],pt={name:"PlayShareRepeat",components:{ButtonDown:ge["a"]},props:{repeatShow:{type:Boolean,default:!0},nextShow:{type:Boolean,default:!1},nextVideoInfo:{type:Object,default:function(){return{}}}},data:function(){return{nextSubtype:"H5bfqx_989"}},computed:{extralOptions:function(){return this.nextVideoInfo?{aid:this.nextVideoInfo.albumId,tvid:this.nextVideoInfo.id,cid:this.nextVideoInfo.cid,vid:this.nextVideoInfo.vid,coop:this.$route.query.coop||"",ftype:27,video:this.nextVideoInfo}:{}}}},dt=pt,ht=Object(A["a"])(dt,ct,lt,!1,null,null,null),ft=ht.exports,vt=(i("6b54"),i("87b3"),i("28a5"),i("0a0d")),yt=i.n(vt),mt="//openapi.iqiyi.com/api/player/validation",gt="//openapi.iqiyi.com/api/player/newvalidation";function bt(e){return{adId:e.ADPlayerID||"",vid:e.vid+"",player:e.player,rate:e.rate,aid:e.albumId,channelId:e.channelId,isUGC:e.isUGC,duration:e.duration,authcookie:Object(m["x"])(),relatedTheme:e.relatedTheme,timestamp:yt()()}}function wt(e){return xt.apply(this,arguments)}function xt(){return xt=Object(d["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,kt(t);case 2:return i=e.sent,e.abrupt("return",i&&i.data?Ct(i.data):{});case 4:case"end":return e.stop()}},e)})),xt.apply(this,arguments)}function kt(e){return St.apply(this,arguments)}function St(){return St=Object(d["a"])(regeneratorRuntime.mark(function e(t){var i,n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=t.sign?gt:mt,e.next=3,w["a"].get(i,{params:t});case 3:return n=e.sent,a=n.data,a&&"[object String]"===Object.prototype.toString.call(a)&&(a=JSON.parse(a)),e.abrupt("return",a&&"A00000"===a.code?a:null);case 7:case"end":return e.stop()}},e)})),St.apply(this,arguments)}function Ct(e){var t={};if(e.ad&&e.ad.h5&&e.ad.h5.cid&&(t.ADPlayerID=e.ad.h5.cid),e.controlbar&&e.controlbar.coderate){var i=e.controlbar.coderate.h5;i&&1===i.split(",").length&&(t.rate=i)}return t}var It=i("a78e"),Pt=i.n(It),_t=i("ec1c"),Tt="5",Ot="coop_248_521w",Rt="playShare",Lt=["coop_337_dsg"],$t={name:"PlayShare",components:{QiyiPlayer:P["a"],AlbumSource:ie,AlbumEposide:ue,PlayShareRecommend:Oe,PlayShareDashboard:Ue,PlaySharePlayBtn:Qe,PlayShareApi:ve,PlayShareLimit:tt,PlayShareEnd:ft,PlayShareLoading:ot,VideoLayerAccountError:ut["a"],AuraPopup:y["a"],VideoLayerDefaultError:v["a"]},mixins:[f["a"]],style:["shareplay"],title:function(){return this.playInfo.videoName||"爱奇艺-shareplay"},data:function(){return{newRateInfo:"",oldRate:"",adParams:{},vipTypes:[],albumShow:!1,recommendShow:!1,playEndShow:!1,hasErrorTip:!1,playEndNextShow:!1,options:{},titleShow:!1,dashboardShow:!1,clarityBidList:[],isVideo:!1,qiyiVideo:null,loadingShow:!1,loadingTip:"",rateShow:!1,nextVideoInfo:null,currentRate:1,prv:!1,ended:!1,isLandscape:!1,hideLoadingCallapp:!1,popUpOptions:{show:!1,onleftBtnClick:function(){},onCloseBtnClick:function(){}},pingbackParams:{},sdkError:!1}},asyncData:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i=t.store,t.route,n=t.isUpdate,!n&&i.registerModule("playShare",I,{preserveState:i.state[Rt]}),e.next=4;break;case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),beforeRouteUpdate:function(e,t,i){var n=this;this.$store.dispatch("".concat(Rt,"/getPlayInfo"),e.query).then(function(e){e=p()(e)?e[0]:e,document.title=e.videoName,n.loadVideo(e.qipuId)}),i()},computed:Object(c["a"])({},Object(h["e"])("playShare",["playInfo"]),{vipType:function(){return p()(this.vipTypes)?this.vipTypes.join(","):""},videoType:function(){if(!this.playInfo.videoType)return"";if(!this.playInfo.isFeatureFilm)return"SHORT";var e=u()(this.playInfo.videoType);return 1===e?"ALBUM":2===e?"SOURCE":1===this.playInfo.channelId||4===this.playInfo.channelId?"MOVIE":"SHORT"},isLong:function(){if(this.isWhiteCoop())return!1;if(1!==u()(this.playInfo.contentType))return!1;var e=u()(this.playInfo.channelId),t=[1,2,4,6,3,16,31];return t.includes(e)},isOutsideShort:function(){var e=u()(this.playInfo.channelId),t=[5,7,8,9,10,12,13,15,17,20,21,22,24,25,26,27,28,29,30,32];return t.includes(e)},showProgress:function(){return this.isVideo&&(!this.hasErrorTip||this.hasErrorTip&&this.prv)&&!this.ended&&!this.isLong},fatherid:function(){return"SOURCE"===this.videoType?this.playInfo.sourceId:"ALBUM"===this.videoType?this.playInfo.albumId:0},isOpenPlay:function(){return this.$route.path.includes("openplay.html")},playerType:function(){return this.isOpenPlay?"1":"2"}}),beforeMount:function(){this.options=this.getOptions(),this.hideLoadingCallapp=this.options.hideLoadingCallapp,this.currentRate=Object(Ae["c"])(this.options.clarity)||this.currentRate,this.bindPageEvent(),this.adParams={playerId:this.getADPlayerID(),adId:this.getADPlayerID(),adTheme:"h5-new"},g["E"].setItem("QiyiPlayerVD",this.currentRate)},methods:{bindPageEvent:function(){this.isLandscape=90===window.orientation||-90===window.orientation,this.checkLandscapeErrortip(),Object(De["c"])(this.orienTationChange.bind(this))},orienTationChange:function(e){this.isLandscape=!!e.landscape,this.checkLandscapeErrortip()},checkLandscapeErrortip:function(){this.isLandscape&&this.hasErrorTip&&this.autoHidePanel()},isWhiteCoop:function(){return Lt.includes(this.$route.query.coop)},getOptions:function(){function e(e){return function(t){return"undefined"!==typeof t&&u()(t)===e}}var t=e(0),i=e(1);return this.$route.query.clarity&&Object(Ae["e"])(this.$route.query.clarity),{autoPlay:i(this.$route.query.autoplay)&&g["G"].android&&(g["i"].qq||g["i"].miuibrowser),isFullscreen:!i(this.$route.query.fullscreen),hideLoadingCallapp:t(this.$route.query.loadingCallapp),hideFullscreen:t(this.$route.query.fullscreenbtn),noContinuous:t(this.$route.query.isContinuousPlay),noRecommend:t(this.$route.query.isRecommend,0),hidePanel:t(this.$route.query.default,0),clarity:u()(this.$route.query.clarity||this.getCookieRate()||1),hideClarity:t(this.$route.query.claritybtn,0),videoWidth:this.$route.query.videoWidth?this.$route.query.videoWidth+"px":"auto",videoHeight:this.$route.query.videoHeight?this.$route.query.videoHeight+"px":"auto",coop:this.$route.query.coop,ADPlayerID:this.$route.query.cid}},init:function(e){this.checkOptions(),this.isLong||(this.pingbackParams=Object(_t["a"])(),this.qiyiVideo=e,this.video=this.qiyiVideo.getVideo(),this.bindVideoEvent(),this.$emit("init",e,this.$refs.player))},onAuthReady:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getOpenplayParams();case 2:return t=e.sent,e.next=5,Object(m["H"])();case 5:this.vipTypes=e.sent,i=this.getPlayParam(this.playInfo.qipuId),n=s()(i,t),this.$refs.player.afterAuth(n);case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),onVideoChanged:function(){!this.isLong&&this.play(),this.hideLayer()},getOpenplayParams:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t,i,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.isOpenPlay){e.next=2;break}return e.abrupt("return",{});case 2:return t=this.getOpenplayUrlParam(),e.next=5,wt(t);case 5:return i=e.sent,e.next=8,bt(s()({player:this.video.player},this.playInfo,i));case 8:return n=e.sent,e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getOpenplayUrlParam:function(){return{tv_id:this.$route.query.tvId||this.$route.query.tvid,sign:this.$route.query.sign,appId:this.$route.query.appId,access_token:this.$route.query.accessToken,save_type:this.$route.query.save_type,validation_type:1}},loadVideo:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t,i){var n,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(m["H"])();case 2:return this.vipTypes=e.sent,n=this.getPlayParam(t),a=s()(n,i),e.abrupt("return",this.$refs.player.loadSource(a));case 6:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}(),getPlayParam:function(e){return{uid:Object(m["C"])(),anonymousUid:Object(m["w"])(),tvid:e,vid:this.playInfo.vid,ut:this.vipTypes,https:this.options.coop===Ot,purchaseType:this.playInfo.purchaseType,adId:this.getADPlayerID()}},getADPlayerID:function(){return this.options.ADPlayerID?this.options.ADPlayerID:g["G"].ios?"qc_105105_300461":g["G"].android?"qc_105105_300462":g["G"].ipad?"qc_105105_300463":""},playVideo:function(e){if(e){this.autoplay=!0,this.$refs.player.src(""),this.qiyiVideo.stopAres(),this.pause(),this.showPanel(),this.$refs.player.preplay(),this.albumShow=!1;var t=this.$route.query;this.$router.push({path:this.$route.path,query:s()({},t,{tvId:e.qipuId||e.id})})}},play:function(){if(!this.hasErrorTip)return this.$refs.player.play()},pause:function(){this.$refs.player.pause()},handleEnd:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(t){var i,n,a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.end,this.ended=i,this.ended&&!this.prv){e.next=4;break}return e.abrupt("return");case 4:if(this.playEndNextShow=!1,!this.isOutsideShort||this.isWhiteCoop()){e.next=14;break}if("ALBUM"!==this.videoType&&"SOURCE"!==this.videoType){e.next=12;break}return e.next=9,this.$refs.AlbumList.hasNext();case 9:n=e.sent,this.playEndNextShow=n.hasNext,this.nextVideoInfo=n.nextVideoInfo;case 12:return this.showRecommend(),e.abrupt("return");case 14:if("ALBUM"!==this.videoType&&"SOURCE"!==this.videoType){e.next=26;break}if(this.options.noContinuous){e.next=21;break}return e.next=18,this.$refs.AlbumList.hasNext();case 18:return a=e.sent,a.hasNext&&this.playNext(),e.abrupt("return");case 21:return e.next=23,this.$refs.AlbumList.hasNext();case 23:r=e.sent,this.playEndNextShow=r.hasNext,this.nextVideoInfo=r.nextVideoInfo;case 26:this.showRecommend();case 27:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),showRecommend:function(){this.recommendShow=!this.options.noRecommend,this.playEndShow=!this.recommendShow},repeat:function(){this.hideLayer(),this.$refs.player.replay()},playNext:function(){this.hideLayer(),this.$refs.AlbumList.playNext()},hideLayer:function(){this.playEndShow=!1,this.recommendShow=!1},loaded:function(e){this.clarityBidList=e.videoInfo.data.program.video||[],this.prv=!!e.videoInfo.prv;var t=e.videoInfo.data.ctl,i=t&&t.bid,n=Object(Ae["b"])(i);this.currentRate=n&&n.rate,this.$emit("loaded")},videoStatusChangeHandle:function(e){this.isVideo=e,(!this.isVideo&&this.hasErrorTip||this.isLong)&&this.removeSrc()},removeSrc:function(){this.$refs.player.src()&&(this.pause(),this.$refs.player.src(""),this.video&&this.video.isFullscreen()&&this.$refs.player.exitFullscreen())},rateChange:function(e){this.options.clarity=e._rate,this.newRateInfo=e,this.oldRate=this.currentRate;var t=Object(Ae["c"])(e._rate);if(this.currentRate!==t){this.rateShow=!1,this.showLoadingTip("正在切换 ".concat(e.name)),Object(Ae["e"])(e._rate);var i={t:Tt,a:"4",from_ra:Ae["d"][this.currentRate],to_ra:Ae["d"][t],tvid:this.playInfo.qipuId,vid:this.playInfo.vid};Object(_t["f"])(i),this.currentRate=t,this.$refs.player.switchRate(t)}},afterSwitchRate:function(e){var t=this;e.success?this.hideLoadingTip():(this.options.clarity=Ae["d"][this.oldRate],this.currentRate=this.oldRate,this.showLoadingTip("切换到 ".concat(this.newRateInfo.name," 失败")),setTimeout(function(){t.hideLoadingTip()},2e3))},showLoadingTip:function(e){this.loadingTip=e,this.loadingShow=!0},hideLoadingTip:function(){this.loadingTip="",this.loadingShow=!1},seek:function(e){this.$refs.player.seek(e),this.play()},_handleFullscreen:function(e){e.defaultPrevented||this.toggleFullscreen()},toggleFullscreen:function(){this.video.isFullscreen()?this.$refs.player.exitFullscreen():(this.play(),this.$refs.player.fullscreen())},errorHandle:function(e){if(e){var t=e.targetName||(e.target?e.target.tagName:"qiyiPlayer");"api"===t&&(this.sdkError=!0)}},wrapperClick:function(){this.isLong||this.video.paused()&&!this.isLandscape||(this.rateShow?this.autoHidePanel():this.titleShow||this.rateShow?this.hidePanel():this.autoHidePanel())},showPanel:function(){this.options.hidePanel||(this.titleShow=!0,this.dashboardShow=!0)},hidePanel:function(){this.titleShow=!1,this.dashboardShow=!1},clearAutoHide:function(){clearTimeout(this.autoHideTimer)},autoHidePanel:function(){var e=Object(d["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.clearAutoHide(),this.showPanel(),this.autoHideTimer=setTimeout(function(){t.hidePanel()},3e3);case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),bindVideoEvent:function(){var e=this;this.video.on("playing",function(){e.ended=!1,e.autoHidePanel()}),this.video.on("pause",function(){e.clearAutoHide(),e.showPanel()}),this.video.on("src",function(t){t||(e.clearAutoHide(),e.showPanel())})},checkOptions:function(){!this.options.hidePanel&&this.showPanel()},showAlbum:function(){this.albumShow=!0,this.$refs.AlbumList.initTabScroll()},getCookieRate:function(){return Pt.a.get("play_stream")},sourceTypeChangeHandle:function(e){var t=e.type;this.hasErrorTip=0!==t,this.hasErrorTip&&this.removeSrc()},togglePlay:function(){this.video&&(this.video.paused()?this.play():this.pause())},showSourceLayer:function(){this.ended=!0},sourceLayerFooHandle:function(e){var t=this,i=e.code,n=e.data;"sealingRivalCopyLink"===i&&"success"===n.code&&(this.popUpOptions={show:!0,title:"提示",info:'链接已复制成功！请<span class="info-bold">打开浏览器</span>输入链接，下载爱奇艺观看视频！',leftButtonText:"我知道了",infoStyle:"left",isCloseShow:!0,onleftBtnClick:function(e){t.popUpOptions.show=!1},onCloseBtnClick:function(e){t.popUpOptions.show=!1}})}}},jt=$t,At=Object(A["a"])(jt,n,a,!1,null,null,null);t["default"]=At.exports}}]);